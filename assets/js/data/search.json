[ { "title": "[Flutter] Flutter 3.38 & Dart 3.10 cÃ³ gÃ¬ má»›i ?", "url": "/posts/flutter-338/", "categories": "Flutter", "tags": "dart, flutter", "date": "2025-11-14 02:00:00 +0000", "content": "Giá»›i thiá»‡u Hi ae, Ä‘Ã£ ráº¥t lÃ¢u rá»“i nay má»›i quay trá»Ÿ láº¡i chuyÃªn má»¥c Blog. HÃ´m nay mÃ¬nh sáº½ cÃ¹ng tÃ¬m hiá»ƒu xem Flutter phiÃªn báº£n má»›i cÃ³ gÃ¬ nhÃ©. Ok letâ€™s go! Flutter 3.38 vá»«a Ä‘Æ°á»£c ra máº¯t vá»›i nhiá»u cáº­p nháº­t thÃº vá»‹, táº­p trung vÃ o viá»‡c tÄƒng nÄƒng suáº¥t vÃ  cáº£i thiá»‡n tráº£i nghiá»‡m phÃ¡t triá»ƒn. Äiá»ƒm nháº¥n chÃ­nh cá»§a báº£n phÃ¡t hÃ nh nÃ y lÃ  dot shorthands vÃ  cÃ¡c cáº­p nháº­t máº¡nh máº½ cho Widget Previews. ÄÃ¡ng chÃº Ã½ lÃ  báº£n phÃ¡t hÃ nh nÃ y cÃ³ 825 commits tá»« 145 contributors khÃ¡c nhau, trong Ä‘Ã³ cÃ³ 37 ngÆ°á»i Ä‘Ã³ng gÃ³p láº§n Ä‘áº§u tiÃªn - má»™t con sá»‘ áº¥n tÆ°á»£ng cho tháº¥y sá»©c máº¡nh cá»§a cá»™ng Ä‘á»“ng Flutter. I. Dart 3.10 - Dot Shorthands 1.1. TÃ­nh nÄƒng chÃ­nh Má»™t trong nhá»¯ng tÃ­nh nÄƒng Ä‘Æ°á»£c mong chá» nháº¥t - dot shorthands - cuá»‘i cÃ¹ng cÅ©ng Ä‘Ã£ cÃ³ máº·t trong Dart 3.10! TÃ­nh nÄƒng nÃ y giÃºp code Dart ngáº¯n gá»n hÆ¡n Ä‘Ã¡ng ká»ƒ báº±ng cÃ¡ch cho phÃ©p bá» qua cÃ¡c kiá»ƒu mÃ  Dart cÃ³ thá»ƒ tá»± suy luáº­n. VÃ­ dá»¥, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng shorthands Ä‘á»ƒ viáº¿t .start thay vÃ¬ MainAxisAlignment.start: // Vá»›i shorthands Column( mainAxisAlignment: .start, crossAxisAlignment: .center, children: [ /* ... */ ], ), // KhÃ´ng cÃ³ shorthands Column( mainAxisAlignment: MainAxisAlignment.start, crossAxisAlignment: CrossAxisAlignment.center, children: [ /* ... */ ], ), 1.2. Named constructors TÃ­nh nÄƒng nÃ y cÅ©ng hoáº¡t Ä‘á»™ng vá»›i named constructors! Báº¡n cÃ³ thá»ƒ viáº¿t .all thay vÃ¬ EdgeInsets.all: Padding( padding: .all(8.0), child: Text('Hello world'), ), TÃ­nh nÄƒng nÃ y Ä‘Æ°á»£c báº­t máº·c Ä‘á»‹nh trong Dart 3.10 vÃ  Flutter 3.38. Äá»ƒ biáº¿t thÃªm thÃ´ng tin, xem trang dot shorthands trÃªn dart.dev. II. Web - Cáº£i tiáº¿n cho Web Development 2.1. Web development configuration files Lá»‡nh flutter run hiá»‡n há»— trá»£ file cáº¥u hÃ¬nh cho cÃ i Ä‘áº·t web. Äiá»u nÃ y cho phÃ©p báº¡n chá»‰ Ä‘á»‹nh host, port, certificate vÃ  header information trong file web_dev_config.yaml á»Ÿ thÆ° má»¥c gá»‘c cá»§a project. Commit file nÃ y Ä‘á»ƒ má»i ngÆ°á»i trong team debug vá»›i cÃ¹ng cÃ i Ä‘áº·t. 2.2. Web development proxy settings File web dev config cÅ©ng há»— trá»£ cÃ i Ä‘áº·t proxy má»›i. Proxy settings giÃºp chuyá»ƒn tiáº¿p requests Ä‘áº¿n cÃ¡c Ä‘Æ°á»ng dáº«n Ä‘Ã£ cáº¥u hÃ¬nh sang server khÃ¡c, giÃºp viá»‡c phÃ¡t triá»ƒn web client káº¿t ná»‘i vá»›i dynamic endpoints trÃªn cÃ¹ng host dá»… dÃ ng hÆ¡n. 2.3. Hot reload trÃªn web Ä‘Æ°á»£c má»Ÿ rá»™ng Stateful hot reload hiá»‡n Ä‘Æ°á»£c báº­t máº·c Ä‘á»‹nh khi cháº¡y vá»›i -d web-server vÃ  báº¡n má»Ÿ link Ä‘áº¿n á»©ng dá»¥ng Flutter trong trÃ¬nh duyá»‡t. TÃ­nh nÄƒng nÃ y tháº­m chÃ­ hoáº¡t Ä‘á»™ng vá»›i nhiá»u trÃ¬nh duyá»‡t káº¿t ná»‘i cÃ¹ng lÃºc. TÆ°Æ¡ng tá»± nhÆ° -d chrome, tÃ­nh nÄƒng nÃ y cÃ³ thá»ƒ táº¡m thá»i táº¯t báº±ng cÃ¡ch sá»­ dá»¥ng flag --no-web-experimental-hot-reload. III. Framework - Cáº£i tiáº¿n Framework 3.1. OverlayPortal enhancements OverlayPortal giá» Ä‘Ã¢y máº¡nh máº½ hÆ¡n nhiá»u khi táº¡o pop-ups, dialogs vÃ  cÃ¡c floating UI elements. Äiá»ƒm má»›i lÃ  cÃ³ thá»ƒ render má»™t child trong báº¥t ká»³ Overlay nÃ o lÃªn widget tree báº±ng cÃ¡ch sá»­ dá»¥ng OverlayPortal.overlayChildLayoutBuilder (#174239). Äiá»u nÃ y ráº¥t há»¯u Ã­ch khi cáº§n hiá»ƒn thá»‹ thÃ´ng bÃ¡o toÃ n á»©ng dá»¥ng hoáº·c UI cáº§n â€œthoÃ¡tâ€ khá»i layout constraints cá»§a parent widget. 3.2. Predictive back transitions (Android) Äá»ƒ cÃ³ tráº£i nghiá»‡m navigation hiá»‡n Ä‘áº¡i hÆ¡n trÃªn Android, predictive back route transitions hiá»‡n Ä‘Æ°á»£c báº­t máº·c Ä‘á»‹nh trong MaterialApp (#173860). Khi ngÆ°á»i dÃ¹ng thá»±c hiá»‡n cá»­ chá»‰ back, há» sáº½ tháº¥y preview cá»§a mÃ n hÃ¬nh home khi route hiá»‡n táº¡i animate ra ngoÃ i. NgoÃ i ra, page transition máº·c Ä‘á»‹nh Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t tá»« ZoomPageTransitionsBuilder sang FadeForwardsPageTransitionsBuilder Ä‘á»ƒ pháº£n Ã¡nh hÃ nh vi native. 3.3. Windows desktop integration Má»™t cáº£i tiáº¿n Ä‘Ã¡ng chÃº Ã½ cho Windows: giá» Ä‘Ã¢y cÃ³ thá»ƒ truy cáº­p danh sÃ¡ch cÃ¡c mÃ n hÃ¬nh Ä‘Æ°á»£c káº¿t ná»‘i vÃ  láº¥y thÃ´ng tin chi tiáº¿t nhÆ° resolution, refresh rate, kÃ­ch thÆ°á»›c váº­t lÃ½ (#164460). Má»Ÿ ra kháº£ nÄƒng xÃ¢y dá»±ng cÃ¡c á»©ng dá»¥ng desktop vá»›i tÃ­nh nÄƒng quáº£n lÃ½ window chuyÃªn nghiá»‡p hÆ¡n. 3.4. Framework resilience Framework giá» Ä‘Ã¢y bá»n vá»¯ng hÆ¡n. CÃ¡c lá»—i xáº£y ra trong widget lifecycle callbacks (nhÆ° didUpdateWidget) giá» Ä‘Æ°á»£c xá»­ lÃ½ gracefully hÆ¡n, ngÄƒn chÃºng gÃ¢y ra cascading failures trong element tree (#173148). ResizeImage giá» implement equality Ä‘Ãºng cÃ¡ch, giÃºp image caching vÃ  comparison dá»… Ä‘oÃ¡n hÆ¡n (#172643). 3.5. Web UI polish TrÃªn web, sá»­a lá»—i cho RSuperellipse ngÄƒn rendering errors khi corner radii lá»›n hÆ¡n chÃ­nh widget (#172254). 3.6. Locale detection improvements Äá»‘i vá»›i ngÆ°á»i dÃ¹ng quá»‘c táº¿, viá»‡c phÃ¡t hiá»‡n ngÃ´n ngá»¯ Æ°a thÃ­ch cá»§a trÃ¬nh duyá»‡t giá» Ä‘Ã¢y máº¡nh máº½ hÆ¡n. Engine hiá»‡n sá»­ dá»¥ng Intl.Locale web API chuáº©n Ä‘á»ƒ parse browser languages (#172964). 3.7. Android IME bug fix Má»™t bug Android (#171973) Ä‘Ã£ Ä‘Æ°á»£c giáº£i quyáº¿t, chá»§ yáº¿u áº£nh hÆ°á»Ÿng Ä‘áº¿n cÃ¡c thiáº¿t bá»‹ Samsung cÃ³ bÃ n phÃ­m pháº§n cá»©ng. TrÆ°á»›c Ä‘Ã¢y, sau khi ngÆ°á»i dÃ¹ng tÆ°Æ¡ng tÃ¡c vá»›i TextField, Android Input Method Editor (IME) cÃ³ thá»ƒ bá»‹ stuck á»Ÿ tráº¡ng thÃ¡i cÅ©, khiáº¿n IME cháº·n cÃ¡c phÃ­m â€œEnterâ€ hoáº·c â€œSpaceâ€, ngÄƒn cÃ¡c widget khÃ´ng pháº£i text nhÆ° Checkbox hoáº·c Radio nháº­n event. IV. Material vÃ  Cupertino Updates 4.1. MaterialState to WidgetState migration Báº£n phÃ¡t hÃ nh nÃ y tiáº¿p tá»¥c migration ná»™i bá»™ tá»« MaterialState Ä‘Ã£ deprecated sang WidgetState thá»‘ng nháº¥t hÆ¡n. Migration nÃ y Ä‘Ã£ Ä‘Æ°á»£c Ã¡p dá»¥ng cho nhiá»u widgets vÃ  themes cá»§a chÃºng, bao gá»“m IconButton, ElevatedButton, Checkbox, vÃ  Switch (#173893). API má»›i cÅ©ng thÃªm sá»©c máº¡nh vÃ  tÃ­nh linh hoáº¡t; vÃ­ dá»¥, IconButton giá» bao gá»“m thuá»™c tÃ­nh statesController (#169821) cho phÃ©p kiá»ƒm soÃ¡t programmatic cÃ¡c visual states. 4.2. New features vÃ  convenience APIs Badge.count constructor giá» bao gá»“m parameter maxCount (#171054) Ä‘á»ƒ dá»… dÃ ng giá»›i háº¡n sá»‘ hiá»ƒn thá»‹ (vÃ­ dá»¥: hiá»ƒn thá»‹ â€œ99+â€ thay vÃ¬ â€œ100â€) InkWell widget giá» cÃ³ callback onLongPressUp (#173221) CupertinoSlidingSegmentedControl thÃªm thuá»™c tÃ­nh isMomentary (#164262) CupertinoSheet giá» cÃ³ hiá»‡u á»©ng â€œstretchâ€ nháº¹ khi kÃ©o lÃªn (#168547) 4.3. Refinements Fix cho DropdownMenuFormField Ä‘á»ƒ xÃ³a Ä‘Ãºng text field khi form Ä‘Æ°á»£c reset (#174937) Cáº­p nháº­t cho SegmentedButton Ä‘á»ƒ cáº£i thiá»‡n focus handling (#173953) V. Decoupling Material vÃ  Cupertino Má»™t káº¿ hoáº¡ch lá»›n Ä‘ang Ä‘Æ°á»£c triá»ƒn khai: tÃ¡ch Material vÃ  Cupertino libraries khá»i framework core. ÄÃ¢y lÃ  má»™t thay Ä‘á»•i kiáº¿n trÃºc quan trá»ng sáº½ lÃ m cho Flutter linh hoáº¡t hÆ¡n. Má»™t sá»‘ design docs Ä‘Ã£ Ä‘Æ°á»£c cÃ´ng bá»‘: Improving the release process cho flutter/packages (Status: Decided) Colors vÃ  dot shorthands (Status: Decided) Decoupling tests (Status: In progress) Text (Status: In discussion) VI. Scrolling - Slivers máº¡nh máº½ hÆ¡n 6.1. SliverMainAxisGroup vÃ  SliverCrossAxisGroup fixes Náº¿u báº¡n lÃ m viá»‡c vá»›i cÃ¡c scrolling layouts phá»©c táº¡p, Ä‘áº·c biá»‡t lÃ  sá»­ dá»¥ng SliverMainAxisGroup vÃ  SliverCrossAxisGroup, tin vui lÃ  báº£n nÃ y Ä‘Ã£ fix ráº¥t nhiá»u váº¥n Ä‘á», lÃ m cho chÃºng hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh vÃ  dá»… Ä‘oÃ¡n hÆ¡n. Hit-testing cho taps vÃ  pointer events trÃªn slivers trong cÃ¡c groups nÃ y giá» Ä‘Æ°á»£c tÃ­nh toÃ¡n Ä‘Ãºng (#174265) CÃ¡c váº¥n Ä‘á» vá» over-scrolling khi sá»­ dá»¥ng pinned header Ä‘Æ°á»£c giáº£i quyáº¿t (#173349) Gá»i showOnScreen Ä‘á»ƒ reveal má»™t sliver giá» hoáº¡t Ä‘á»™ng Ä‘Ãºng (#171339) 6.2. SliverGrid.list constructor Khi xÃ¢y dá»±ng custom scroll views, constructor má»›i SliverGrid.list (#173925) sáº½ giÃºp táº¡o grid tá»« danh sÃ¡ch children Ä‘Æ¡n giáº£n vÃ  sáº¡ch sáº½ hÆ¡n nhiá»u. 6.3. Focus navigation improvements Trong nested scroll views vá»›i cÃ¡c scroll axes khÃ¡c nhau (nhÆ° danh sÃ¡ch vertical cá»§a horizontal carousels), directional focus navigation giá» dá»… Ä‘oÃ¡n hÆ¡n (#172875). VII. Accessibility - Tráº£i nghiá»‡m toÃ n diá»‡n hÆ¡n 7.1. Programmatic control Kháº£ nÄƒng báº­t accessibility máº·c Ä‘á»‹nh trÃªn iOS báº±ng WidgetsFlutterBinding.instance.ensureSemantics (#174163) debugDumpSemanticsTree bao gá»“m thÃ´ng tin validation káº¿t quáº£ text input bá»• sung (#174677) 7.2. SliverSemantics widget Widget SliverSemantics má»›i (#167300) giá» kháº£ dá»¥ng. Giá»‘ng nhÆ° widget Semantics hiá»‡n cÃ³, developers cÃ³ thá»ƒ sá»­ dá»¥ng SliverSemantics bÃªn trong CustomScrollView Ä‘á»ƒ annotate cÃ¡c pháº§n cá»§a sliver tree vá»›i thÃ´ng tin semantic cá»¥ thá»ƒ. 7.3. Widget accessibility refinements CupertinoExpansionTile giá» accessible máº·c Ä‘á»‹nh (#174480) AutoComplete widget giá» thÃ´ng bÃ¡o status cá»§a search results (#173480) Touch targets lá»›n hÆ¡n trong TimePicker (#170060) VIII. iOS - Platform Updates 8.1. Latest platform support Flutter há»— trá»£ Ä‘áº§y Ä‘á»§ cÃ¡c báº£n phÃ¡t hÃ nh platform má»›i nháº¥t: iOS 26, Xcode 26, vÃ  macOS 26 (phÃ¡t hÃ nh thÃ¡ng 9). 8.2. Deployment improvements Cáº£i tiáº¿n quality-of-life lá»›n: loáº¡i bá» yÃªu cáº§u á»©ng dá»¥ng Xcode tá»± Ä‘á»™ng khá»Ÿi Ä‘á»™ng khi cháº¡y Flutter apps trÃªn thiáº¿t bá»‹ váº­t lÃ½. PhÆ°Æ¡ng thá»©c deployment má»›i sá»­ dá»¥ng cÃ´ng cá»¥ command line Xcode 26 devicectl Ä‘á»ƒ cÃ i Ä‘áº·t, khá»Ÿi cháº¡y vÃ  debug app. Náº¿u gáº·p váº¥n Ä‘á», cÃ³ thá»ƒ táº¯t báº±ng: flutter config --no-enable-lldb-debugging 8.3. UIScene Lifecycle Migration (QUAN TRá»ŒNG!) Flutter 3.38 bao gá»“m há»— trá»£ thiáº¿t yáº¿u cho UIScene lifecycle do Apple yÃªu cáº§u. ÄÃ¢y lÃ  cáº­p nháº­t quan trá»ng theo thÃ´ng bÃ¡o cá»§a Apple táº¡i WWDC25: â€œTrong báº£n phÃ¡t hÃ nh sau iOS 26, báº¥t ká»³ UIKit app nÃ o Ä‘Æ°á»£c build vá»›i SDK má»›i nháº¥t sáº½ Ä‘Æ°á»£c yÃªu cáº§u sá»­ dá»¥ng UIScene life cycle, náº¿u khÃ´ng nÃ³ sáº½ khÃ´ng khá»Ÿi cháº¡y.â€ Táº¥t cáº£ á»©ng dá»¥ng iOS Flutter hiá»‡n táº¡i pháº£i migrate sang lifecycle má»›i. Hai cÃ¡ch migration: Manual migration: LÃ m theo hÆ°á»›ng dáº«n trÃªn website Flutter Automatic migration (Experimental): Báº­t tÃ­nh nÄƒng thá»±c nghiá»‡m: flutter config --enable-uiscene-migration 8.4. Migrating Flutter plugins Flutter plugins phá»¥ thuá»™c vÃ o application lifecycle events pháº£i Ä‘Æ°á»£c cáº­p nháº­t Ä‘á»ƒ sá»­ dá»¥ng UIScene lifecycle events. Plugins chÆ°a migrate sáº½ hiá»ƒn thá»‹ warnings trong báº£n phÃ¡t hÃ nh tÆ°Æ¡ng lai. IX. Android - Platform Updates 9.1. 16KB page size compatibility (QUAN TRá»ŒNG!) NÃ¢ng cáº¥p lÃªn Flutter 3.38 lÃ  chuáº©n bá»‹ thiáº¿t yáº¿u cho yÃªu cáº§u tÆ°Æ¡ng thÃ­ch page size 16 KB cá»§a Google Play. Tá»« ngÃ y 1 thÃ¡ng 11, 2025, apps targeting Android 15 trá»Ÿ lÃªn pháº£i há»— trá»£ 16 KB pages. Flutter 3.38 cáº­p nháº­t ndkVersion Android máº·c Ä‘á»‹nh sang NDK r28, phiÃªn báº£n tá»‘i thiá»ƒu cáº§n thiáº¿t Ä‘á»ƒ native code Ä‘áº¡t Ä‘Æ°á»£c alignment phÃ¹ há»£p cho há»— trá»£ 16 KB. 9.2. Memory leak fix Flutter 3.38 sá»­a memory leak Ä‘Ã¡ng ká»ƒ áº£nh hÆ°á»Ÿng Ä‘áº¿n táº¥t cáº£ Flutter apps trÃªn Android. Váº¥n Ä‘á» (Ä‘Æ°á»£c giá»›i thiá»‡u trong 3.29.0) xáº£y ra khi Activities bá»‹ destroyed khi thoÃ¡t. 9.3. Android dependency updates Flutter 3.38 Ä‘Ã£ test vÃ  xÃ¡c nháº­n tÆ°Æ¡ng thÃ­ch vá»›i cÃ¡c phiÃªn báº£n Android dependency sau: Java 17: phiÃªn báº£n tá»‘i thiá»ƒu báº¯t buá»™c cho Android development trong Flutter 3.38 KGP 2.2.20: phiÃªn báº£n Kotlin Gradle Plugin tá»‘i Ä‘a Ä‘Ã£ biáº¿t vÃ  Ä‘Æ°á»£c há»— trá»£ AGP 8.11.1: phiÃªn báº£n Android Gradle Plugin má»›i nháº¥t tÆ°Æ¡ng thÃ­ch vá»›i KGP 2.2.20 Gradle 8.14: hoáº¡t Ä‘á»™ng vá»›i cÃ¡c phiÃªn báº£n Ä‘Ã£ chá»n cá»§a Java, KGP, vÃ  AGP CÃ¡c giÃ¡ trá»‹ Ä‘Ã£ cáº¥u hÃ¬nh cho báº£n phÃ¡t hÃ nh nÃ y: flutter.compileSdkVersion (API 36) flutter.targetSdkVersion (API 36) flutter.minSdkVersion (API 24) hoáº·c cao hÆ¡n X. Engine - Performance vÃ  Stability 10.1. Performance overlay Performance overlay Ä‘Ã£ Ä‘Æ°á»£c refactor Ä‘á»ƒ hiá»‡u quáº£ hÆ¡n, giáº£m rendering time trÃªn cáº£ Skia vÃ  Impeller backends (#176364). 10.2. Vulkan vÃ  OpenGL ES Nhiá»u fixes vÃ  improvements cho Vulkan vÃ  OpenGL ES backends cáº£i thiá»‡n stability vÃ  performance trÃªn pháº¡m vi thiáº¿t bá»‹ rá»™ng hÆ¡n, bao gá»“m xá»­ lÃ½ tá»‘t hÆ¡n cá»§a: Pipeline caches (#176322) Fence waiters (#173085) Image layout transitions (#173884) 10.3. Renderer unification CÃ´ng viá»‡c tiáº¿p tá»¥c Ä‘á»ƒ thá»‘ng nháº¥t CanvasKit vÃ  Skwasm renderers. Báº£n phÃ¡t hÃ nh nÃ y bao gá»“m refactoring Ä‘Ã¡ng ká»ƒ Ä‘á»ƒ chia sáº» nhiá»u code hÆ¡n giá»¯a hai renderer (#174588). 10.4. Thread merging Kháº£ nÄƒng opt-out khá»i thread merging Ä‘Ã£ Ä‘Æ°á»£c loáº¡i bá» khá»i iOS vÃ  Android. XI. DevTools vÃ  IDEs 11.1. Widget Previews - Cáº­p nháº­t lá»›n (Experimental) Flutter 3.35 Ä‘Ã£ giá»›i thiá»‡u Widget Previews, vÃ  Flutter 3.38 mang Ä‘áº¿n cÃ¡c cáº£i tiáº¿n Ä‘Ã¡ng ká»ƒ: IDE integration Cáº£ VSCode vÃ  IntelliJ/Android Studio plugins Ä‘á»u Ä‘Æ°á»£c cáº­p nháº­t vá»›i há»— trá»£ ban Ä‘áº§u cho Widget Previews. Báº¡n cÃ³ thá»ƒ xem previews trá»±c tiáº¿p trong IDE. Environment theming Widget preview environment giá» há»— trá»£ light vÃ  dark modes, cÅ©ng nhÆ° custom IDE color schemes Ä‘á»ƒ khá»›p vá»›i mÃ´i trÆ°á»ng phÃ¡t triá»ƒn cá»§a báº¡n. Preview extensibility Class annotation Preview khÃ´ng cÃ²n Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u lÃ  final vÃ  giá» cÃ³ thá»ƒ Ä‘Æ°á»£c extend Ä‘á»ƒ táº¡o custom Preview annotations. MultiPreview support Class cÆ¡ sá»Ÿ MultiPreview má»›i cho phÃ©p táº¡o nhiá»u Preview variations tá»« má»™t annotation tÃ¹y chá»‰nh duy nháº¥t. Preview groups Parameter group má»›i trong class Preview cho phÃ©p nhÃ³m cÃ¡c previews liÃªn quan. Reduced restrictions Private constants giá» Ä‘Æ°á»£c há»— trá»£ lÃ m arguments cho Preview annotations. LÆ°u Ã½ quan trá»ng: CÃ³ má»™t váº¥n Ä‘á» Ä‘Ã£ biáº¿t khi Widget Previewer cÃ³ thá»ƒ crash hoáº·c ngá»«ng cáº­p nháº­t sau flutter pub get. Náº¿u gáº·p váº¥n Ä‘á» nÃ y, cháº¡y flutter pub get vÃ  restart IDE. 11.2. DevTools updates Flutter 3.38 chá»©a fixes cho má»™t sá»‘ pain points hÃ ng Ä‘áº§u mÃ  ngÆ°á»i dÃ¹ng Ä‘Ã£ chá»‰ ra trong kháº£o sÃ¡t DevTools 2025: Network Panel Improvements Dá»… hiá»ƒu hÆ¡n khi panel Ä‘ang recording network traffic (#9495) Sá»­a cÃ¡c váº¥n Ä‘á» liÃªn quan Ä‘áº¿n copy-paste network requests (#9472, #9482, #9485, #8588) Flutter Inspector fixes Sá»­a bug khi selecting má»™t widget Ä‘Ã´i khi má»Ÿ underlying framework source code thay vÃ¬ userâ€™s source code (#176530) Sá»­a bug Ä‘Ã´i khi ngÄƒn tÆ°Æ¡ng tÃ¡c vá»›i top buttons trong Inspector panel (#9327) XII. Deprecations vÃ  Breaking Changes 12.1. Build vÃ  tooling changes File version á»Ÿ root cá»§a Flutter SDK Ä‘Ã£ Ä‘Æ°á»£c loáº¡i bá», thay vÃ o Ä‘Ã³ lÃ  file flutter.version.json má»›i trong bin/cache (#172793) File AssetManifest.json khÃ´ng cÃ²n Ä‘Æ°á»£c táº¡o máº·c Ä‘á»‹nh (#172594) 12.2. Notable changes SnackBar bao gá»“m action sáº½ khÃ´ng cÃ²n auto-dismiss (#173084) OverlayPortal.targetsRootOverlay constructor bá»‹ deprecated, thay vÃ o Ä‘Ã³ dÃ¹ng OverlayPortal(overlayLocation: OverlayChildLocation.rootOverlay) Nhiá»u properties trÃªn CupertinoDynamicColor nhÆ° withAlpha vÃ  withOpacity giá» bá»‹ deprecated (#171160) Flutter 3.38 yÃªu cáº§u Java 17 lÃ  phiÃªn báº£n tá»‘i thiá»ƒu cho Android Káº¿t luáº­n Flutter 3.38 lÃ  má»™t báº£n cáº­p nháº­t táº­p trung vÃ o tráº£i nghiá»‡m developer, vá»›i nhiá»u cáº£i tiáº¿n giÃºp viáº¿t code nhanh hÆ¡n vÃ  dá»… chá»‹u hÆ¡n. Tá»« dot shorthands giÃºp code gá»n gÃ ng, Widget Previews máº¡nh máº½ hÆ¡n, Ä‘áº¿n cÃ¡c fixes quan trá»ng cho iOS vÃ  Android - táº¥t cáº£ Ä‘á»u hÆ°á»›ng Ä‘áº¿n má»¥c tiÃªu lÃ m cho Flutter ngÃ y cÃ ng tá»‘t hÆ¡n. Äá»ƒ biáº¿t chi tiáº¿t Ä‘áº§y Ä‘á»§ vá» táº¥t cáº£ thay Ä‘á»•i, báº¡n cÃ³ thá»ƒ xem: Breaking changes Release notes Upgrade ngay Ä‘á»ƒ tráº£i nghiá»‡m nhá»¯ng tÃ­nh nÄƒng má»›i: flutter upgrade ChÃºc cÃ¡c báº¡n code vui váº»! ğŸ‰ Tham kháº£o: Whatâ€™s new in Flutter 3.38 - Kevin Chisholm" }, { "title": "[Flutter] Flutter 3.3 cÃ³ gÃ¬ má»›i ?", "url": "/posts/flutter-33/", "categories": "Flutter", "tags": "dart, flutter, new", "date": "2022-09-10 14:15:03 +0000", "content": "I. Introduction ChÃ o má»«ng Ä‘áº¿n vá»›i Flutter 3.3 ÄÃ¢y lÃ  phiÃªn báº£n cáº­p nháº­t vá»›i nhiá»u tÃ­nh nÄƒng thÃº vá»‹ Ä‘á»ƒ xá»­ lÃ½ vÄƒn báº£n, cáº£i thiá»‡n hiá»‡u suáº¥t vÃ  hÆ¡n tháº¿ ná»¯a! Chá»‰ 3 thÃ¡ng trÆ°á»›c khi cÃ´ng bá»‘ Flutter 3, cá»™t má»‘c quan trong bao gá»“m cÃ¡c tÃ­nh nÄƒng á»•n Ä‘á»‹nh cho táº¥t cáº£ cÃ¡c ná»n táº£ng. Tin tá»‘t ráº±ng Ä‘Ã  tÄƒng luÃ´n Ä‘Æ°á»£c cáº£i thiá»‡n, tá»« khi phÃ¡t hÃ nh Flutter 3, Flutter team Ä‘Ã£ merged 5,687 pull request. ChÃºng tÃ´i cÅ©ng giá»›i thiá»‡u cÃ¡c báº£n cáº­p nháº­t cho package go_router, DevTools, vÃ  cÃ¡c extension cho VSCode. II. Framework 1. Global Selection TÃ­nh Ä‘áº¿n hiá»‡n táº¡i, Flutter web apps khÃ´ng Ä‘áº¡t Ä‘Æ°á»£c kÃ¬ vá»ng nhÆ° mong Ä‘á»£i khi cá»‘ gáº¯ng chá»n vÄƒn báº£n. CÅ©ng giá»‘ng nhÆ° Flutter apps, native web app cÅ©ng Ä‘Æ°á»£c composed bá»Ÿi cÃ¢y cÃ¡c pháº§n tá»­ (tree of elements). Vá»›i cÃ¡c á»©ng dá»¥ng web app truyá»n thá»‘ng, báº¡n cÃ³ thá»ƒ chá»n nhiá»u pháº§n tá»­ web chá»‰ báº±ng má»™t cá»­ chá»‰ quÃ©t, Ä‘iá»u mÃ  khÃ´ng dá»… dÃ ng thá»±c thiá»‡n trÃªn á»©ng dá»¥ng web Flutter. VÃ  giá» thÃ¬ má»i thá»© Ä‘Ã£ thay Ä‘á»•i. Vá»›i sá»± ra Ä‘á»i cá»§a SelectableArea widget, báº¥t cá»© pháº§n tá»­ con nÃ o cá»§a nÃ³ cÅ©ng Ä‘Æ°á»£c enable tÃ­nh nÄƒng select nÃ y. Äáº¿ sá»­ dá»¥ng tÃ­nh nÄƒng nÃ y, chá»‰ cáº§n wrap route body (vÃ­ dá»¥ Scaffold) vá»›i SlectionArea. Chi tiáº¿t hÆ¡n táº¡i Ä‘Ã¢y. 2. Trackpad input Flutter 3.3 cung cáº¥p má»™t sá»‘ cáº£i tiáº¿n cho trackpad input. KhÃ´ng chá»‰ cung cáº¥p kháº£ nÄƒng kiá»ƒm soÃ¡t phong phÃº vÃ  mÆ°á»£t mÃ  hÆ¡n, cÃ²n giáº£m sá»± hiá»ƒu sai trong má»™t sá»‘ trÆ°á»ng há»£p nháº¥t Ä‘á»‹nh. Äá»ƒ tháº¥y Ä‘Æ°á»£c vÃ­ dá»¥ vá» cÃ¡ch hiá»ƒu sai nÃ y, hÃ£y xem Drag a UI element 3. Scribble Cáº£m Æ¡n Ä‘Ã³ng gÃ³p tuyá»‡t vá»›i cá»§a fbcounch Flutter giá» Ä‘Ã£ há»— trá»£ nháº­p liá»‡u báº±ng chá»¯ viáº¿t tay Scribble báº±ng Apple pendcil trÃªn IpadOS. TÃ­nh nÄƒng nÃ y Ä‘Æ°á»£c báº­t máº·c Ä‘á»‹nh trÃªn CupertinoTextField, TextField vÃ  EditableText 4. Text input Äá»ƒ cáº£i thiá»‡n kháº£ nÄƒng há»— trá»£ chá»‰nh sá»­a vÄƒn báº£n, phiÃªn báº£n nÃ y giá»›i thiá»‡u kháº£ nÄƒng nháº­n cÃ¡c cáº­p nháº­t vÄƒn báº£n chi tiÃ©t tá»« TextInputPlugin. TrÆ°á»›c Ä‘Ã³, TextInputClient chá»‰ cung cáº¥p tráº¡ng thÃ¡i chá»‰nh sá»­a má»›i mÃ  khÃ´ng cÃ³ dáº¥u phÃ¢n cÃ¡h giá»¯a cÅ© vÃ  má»›i. Äá»ƒ tÃ¬m hiá»ƒu thÃªm, hÃ£y xem Rich Text Editor demo 5. Material Design 3 Flutter team tiáº¿p tá»¥c migrate thÃªm má»™t sá»‘ component cá»§a Material Design 3 sang Flutter. Báº£n phÃ¡t hÃ nh nÃ y bao gá»“m 1 sá»‘ cáº­p nháº­t cho IconButton, Chips vÃ  AppBar Äá»ƒ theo dÃµi tiáº¿n Ä‘á»™ migrate Material Design 3, hÃ£y theo dÃµi Bring Material 3 to Flutter trÃªn GitHub. 5.1. IconButton 5.2 Chip 5.3 Medium &amp; large AppBar III. Desktop TrÆ°á»›c Ä‘Ã¢y, phiÃªn báº£n cá»§a á»©ng dá»¥ng Window dÃ nh cho mÃ¡y tÃ­nh Ä‘á»ƒ bÃ n Ä‘Æ°á»£c Ä‘áº·t bá»Ÿi má»™t tá»‡p dÃ nh riÃªng cho á»©ng dá»¥ng Windows. Äiá»u nÃ y khÃ´ng phÃ¹ há»£p vá»›i cÃ¡ch cÃ¡c ná»n táº£ng khÃ¡c thiáº¿t láº­p vá»›i phiÃªn báº£n cá»§a há». CÃ¡c phiÃªn báº£n á»©ng dá»¥ng dÃ nh cho Window giá» Ä‘Ã¢y cÃ³ thá»ƒ Ä‘Æ°á»£c Ä‘áº·t tá»« tá»‡p pubspec.yaml vá»›i cÃ¡c Ä‘á»‘i sá»‘. Äiá»u nÃ y giÃºp khÃ¡ch hÃ ng cá»§a báº¡n cÃ³ thá»ƒ dá»… dÃ ng báº­t cáº­p nháº­t tá»± Ä‘á»™ng Ä‘á»ƒ nháº­n Ä‘Æ°á»£c cáº­p nháº­t má»›i nháº¥t. Äá»ƒ rÃµ hÆ¡n vá» cÃ¡ch thiáº¿t láº­p version cho á»©ng dá»¥ng cá»§a báº¡n, hÃ£y lÃ m theo tÃ i liá»‡u docs.flutter.dev vÃ  migration guide. CÃ¡c dá»± Ã¡n Ä‘Æ°á»£c táº¡o trÆ°á»›c phiÃªn báº£n Flutter 3.3 cáº§n Ä‘Æ°á»£c cáº­p nháº­t lÃªn Ä‘á»ƒ sá»­ dá»¥ng Ä‘Æ°á»£c tÃ­nh nÄƒng nÃ y. IV. Packages go_router Khi thiáº¿t káº¿ á»©ng dá»¥ng cÃ³ nhu cáº§u Ä‘iá»u hÆ°á»›ng phá»©c táº¡p, má»i thá»© dÆ°á»ng nhÆ° khÃ¡ khÃ³ khÄƒn. Äá»ƒ má»Ÿ rá»™ng bá»™ API Ä‘iá»u hÆ°á»›ng cá»§a Flutter, nhÃ³m Ä‘Ã£ xuáº¥t báº£n má»™t phiÃªn báº£n má»›i cá»§a package go_router, giÃºp viá»‡c thiáº¿t káº¿ logic Ä‘á»‹nh tuyáº¿n trá»Ÿ nÃªn Ä‘Æ¡n giáº£n hÆ¡n. Package go_router Ä‘Æ°á»£c maintained bá»Ÿi Flutter team, giÃºp Ä‘Æ¡n háº£n hoÃ¡ viá»‡c routing báº±ng cÃ¡ch cung cáº¥p cÃ¡c bá»™ API dá»±a trÃªn URL, khai bÃ¡o, Ä‘iá»u hÆ°á»›ng, vÃ  xá»­ lÃ½ deeplink dá»… dÃ ng hÆ¡n. PhiÃªn báº£n má»›i nháº¥t (4.3) cho phÃ©p cÃ¡c á»©ng dá»¥ng navigate báº±ng cÃ¡c khá»‘i code khÃ´ng Ä‘á»“ng bá»™, vÃ  bao gá»“m cÃ¡c má»™t sá»‘ breaking change Ä‘Æ°á»£c mÃ´ táº£ trong migration guide Äá»ƒ biáº¿t thÃªm thÃ´ng tin, hÃ£y xem trang Navigation and routing táº¡i docs.flutter.dev V. Visual Studio Code extension enhancements Visual Studio Code extension cho Flutter cÃ³ má»™t sá»‘ update bao gá»“m viá»‡c cáº£i tiáº¿n khi thÃªm dependencies. Giá» báº¡n cÃ³ thá»ƒ thÃªm nhiá»u package liÃªn tá»¥c báº±ng cÃ¡ch liá»‡t kÃª danh sÃ¡ch package cÃ¡ch nhau bá»Ÿi dáº¥u , khi dÃ¹ng tÃ­nh nÄƒng Dart: Add Dependencies Báº¡n cÅ©ng cÃ³ thá»ƒ xem thÃªm cÃ¡c cáº£i tiÃªn cá»§a VS code ká»ƒ tá»« báº£n release stable cuá»‘i táº¡i Ä‘Ã¢y: VS Code extensions v3.46 VS Code extensions v3.44 VS Code extensions v3.42 VI. Flutter DevTools updates DevTools Ä‘i kÃ¨m vá»›i má»™t cáº­p nháº­t, chá»§ yáº¿u bao gá»“m cÃ¡c cáº£i tiáº¿n vá» UX vÃ  hiá»‡u suáº¥t cho cÃ¡c bang hiá»ƒn thá»‹ dá»¯ liá»‡u nhanh hÆ¡n. Má»™t sá»‘ changelog táº¡i Ä‘Ã¢y : Flutter DevTools 2.16.0 release notes Flutter DevTools 2.15.0 release notes Flutter DevTools 2.14.0 release notes VII. Performance 1. Raster cache improvements PhiÃªn báº£n nÃ y tÄƒng hiá»‡u suáº¥t táº£i áº£nh tá»« assets báº±ng cÃ¡ch loáº¡i bá» cÃ¡c báº£n sao vÃ  giáº£m Ã¡p lá»±c thu gom rÃ¡c (GC). TrÆ°á»›c Ä‘Ã¢y, khi load image assets, ImageProvider API yÃªu cáº§u dá»¯ liá»‡u nÃ©n Ä‘Æ°á»£c sao chÃ©p nhiá»u láº§n. Láº§n Ä‘áº§u tiÃªn, nÃ³ Ä‘Æ°á»£c sao chÃ©p vÃ o bá»™ nhá»› heap cá»§a native khi má»Ÿ asset vÃ  hiá»ƒn thá»‹ nÃ³ vá»›i Dart dÆ°á»›i dáº¡ng má»™t máº£ng dá»¯ liá»‡u. Sau Ä‘Ã³ nÃ³ Ä‘Æ°á»£c sao chÃ©p láº§n thá»© hai khi máº£ng dá»¯ liá»‡u trÃªn Ä‘Æ°á»£c sao chÃ©p vÃ o bá»™ nhá»› trong cá»§a ui.ImmutableBuffer Vá»›i viá»‡c bá»• sung ui.ImmutableBuffer.fromAsset, cÃ¡c bytes hÃ¬nh áº£nh nÃ©n cÃ³ thá»ƒ Ä‘Æ°á»£c táº£i trá»±c tiáº¿p vÃ o cáº¥u trÃºc áº£nh Ä‘á»ƒ giáº£i mÃ£. CÃ¡ch tiáº¿p cáº§n nÃ y yÃªu cáº§u cÃ¡c thay Ä‘á»•i Ä‘á»‘i vá»›i Ä‘Æ°á»ng dáº«n táº£i byte cá»§a ImageProviders. QuÃ¡ trÃ¬nh nÃ y cÅ©ng nhanh hÆ¡n bá»i vÃ¬ nÃ³ bá» qua má»™t sá»‘ chi phÃ­ láº­p lá»‹ch bá»• sung (additional scheduling) Ä‘Æ°á»£c yÃªu cáº§u bá»Ÿi bá»™ táº£i trÆ°á»›c Ä‘Ã³ nhÆ° Ä‘Ã£ liá»‡t kÃª á»Ÿ trÃªn. Äáº·c biá»‡t, khi sá»­ dá»¥ng cÃ¡ch nÃ y, thá»i gian táº£i hÃ¬nh áº£nh Ä‘Æ°á»£c cáº£i thiá»‡n gáº§n gáº¥p Ä‘Ã´i trong cÃ¡c láº§n Ä‘o microbenchmarks cá»§a chÃºng tÃ´i. Äá»ƒ thÃªm thÃ´ng tin vá» cÃ¡ch migrate, hÃ£y xem á»Ÿ Ä‘Ã¢y 2. Stability 2.1. iOS pointer compression disabled Táº¡i báº£n release 2.10, chÃºng tÃ´i Ä‘Ã£ enable tÃ­nh nÄƒng tá»‘i Æ°u hoÃ¡ nÃ©n con trá» (pointer_compression_optimization) trÃªn IOS. Tuy nhiÃªn, Yeatse Ä‘Ã£ cáº£nh bÃ¡o vá» má»™t háº­u quáº£ khÃ´ng mong muá»‘n vá»›i cÃ¡ch tá»‘i Æ°u trÃªn. TÃ­nh nÄƒng nÃ y hoáº¡t Ä‘á»™ng báº±ng cÃ¡ch dÃ nh riÃªng má»™t vÃ¹ng bá»™ nhá»› báº£o lá»›n cho Dartâ€™s heap. VÃ¬ tá»•ng virtual memory Ä‘Æ°á»£c cáº¥p trÃªn IOS Ã­t hÆ¡n so vá»›i cÃ¡c nÃªn táº£ng khÃ¡c, nÃªn viá»‡c nÃ y lÃ m giáº£m dung lÆ°á»£ng bá»™ nhá»› cÃ³ sáºµn Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi cÃ¡c thÃ nh pháº§n khÃ¡c, cháº³ng háº¡n nhÆ° Flutter plugin. VÃ¬ váº­y chÃºng tÃ´i Ä‘Ã£ disable vÃ  xem xÃ©t láº¡i cÃ¡ch tá»‘i Æ°u hoÃ¡. 3. API improvements 3.1. PlatformDispatcher.onError á» cÃ¡c phiÃªn báº£n release trÆ°á»›c, báº¡n pháº£i cáº¥u hÃ¬nh Zone thá»§ cÃ´ng Ä‘á»ƒ báº¯t Ä‘Æ°á»£c táº¥t cáº£ cÃ¡c exception vÃ  error trÃªn toÃ n á»©ng dá»¥ng. Tuy nhiÃªn viá»‡c nÃ y gÃ¢y báº¥t lá»£i cho má»™t sá»‘ optimization trong thÆ° viá»‡n core cá»§a Dart, lÃ m giáº£m thá»i gian khá»Ÿi Ä‘á»™ng á»©ng dá»¥ng. á» phiÃªn báº£n release nÃ y, thay vÃ¬ sá»­ dá»¥ng custom Zone, báº¡n nÃªn báº¯t táº¥t cáº£ cÃ¡c exceptions vÃ  error báº±ng cÃ¡ch setting PlatformDispatcher.onError callback. Äá»ƒ rÃµ hÆ¡n, hÃ£y tÃ¬m hiá»ƒu thÃªm táº¡i Handling erors in Flutter 3.2. FragmentProgram changes TrÃ¬nh táº¡o bÃ³ng phÃ¢n máº£nh (Fragment shaders) Ä‘Æ°á»£c viáº¿t báº±ng GLSL vÃ  Ä‘Æ°á»£c liá»‡t kÃª dÆ°á»›i trÃ¬nh táº¡o bÃ³ng: pháº§n trong tá»‡p pubspec.yaml giá» Ä‘Æ°á»£c tá»± Ä‘á»™ng biÃªn dá»‹ch sang Ä‘á»‹nh dáº¡ng chÃ­nh xÃ¡c mÃ  engine hiá»ƒu vÃ  dÆ°á»£c Ä‘Ã³ng gÃ³i cÃ¹ng vá»›i á»©ng dá»¥ng dÆ°á»›i dáº¡ng asset. Äá»ƒ biáº¿t thÃªm chi tiáº¿t, tham kháº£o táº¡i Ä‘Ã¢y 3.3. Fractional translation TrÆ°á»›c Ä‘Ã¢y, Flutter engine luÃ´n cÄƒn chá»‰nh cÃ¡c lá»›p tá»•ng há»£p theo ranh giá»›i pixel chÃ­nh xÃ¡c vÃ¬ nÃ³ giÃºp cáº£i thiá»‡n hiá»‡u suáº¥t trÃªn cÃ¡c iphone kiá»ƒu cÅ© (32-bit). Tuy nhiÃªn, sau khi há»— trá»£ mÃ¡y tÃ­nh Ä‘á»ƒ bÃ n, chÃºng tÃ´i tháº¥y Ä‘iá»u nÃ y dáº«n Ä‘áº¿n viá»‡c bá»‹ snapshot cÃ³ thá»ƒ xem Ä‘Æ°á»£c. Sau khi xÃ¡c Ä‘á»‹nh ráº±ng tÃ­nh nÄƒng snapping pixel nÃ y khÃ´ng cáº§n thiáº¿t trÃªn cÃ¡c iphone Ä‘á»i má»›i, chÃºng tÃ´i Ä‘Ã£ xoÃ¡ tÃ­nh nÄƒng nÃ y Ä‘á»ƒ cáº£i thiá»‡n Ä‘á»™ trung thá»±c cá»§a desktop. VII. Changes to supported platforms 1. 32-bit iOS deprecation NhÆ° Ä‘Ã£ thÃ´ng bÃ¡o tá»« phiÃªn báº£n 3.0, do lÆ°á»£ng sá»­ dá»¥ng giáº£m 3.0 lÃ  phiÃªn báº£n cuá»‘i há»— trá»£ cÃ¡c thiáº¿t bá»‹ 32 bit vÃ  cÃ¡c phiÃªn báº£n ios 9, 10. Thay Ä‘á»•i nÃ y áº£nh hÆ°á»Ÿng Ä‘áº¿n ip4s, ip5c, iPad tháº¿ há»‡ 2,3,4. Äiá»u nÃ y Ä‘á»“ng nghÄ©a vá»›i viá»‡c cÃ¡c á»©ng dá»¥ng cháº¡y trÃªn Flutter 3.3 sáº½ khÃ´ng cháº¡y Ä‘Æ°á»£c trÃªn cÃ¡c thiÃªt bá»‹ Ä‘Ã³. 2. Sunsetting macOS 10.11 and 10.12 Trong báº£n phÃ¡t hÃ nh stable trong Q4 2022, chÃºng tÃ´i dá»± kiáº¿n sáº½ ngá»«ng há»— trá»£ cho cÃ¡c phiÃªn báº£n mac OS 10.11 vÃ  10.12. PhiÃªn báº£n tá»‘i thiá»ƒu macOS Ä‘Æ°á»£c há»— trá»£ sáº½ tÄƒng lÃªn 10.13 tá»©c Mac High Sierra. 3. Bitcode deprecation Bitcode sáº½ khÃ´ng cÃ²n Ä‘Æ°á»£c cháº¥p nháº­n cho cÃ¡c á»©ng dá»¥ng IOS trong ban XCode 14 sÄƒp tá»›i, vÃ  cÃ¡c dá»± Ã¡n Ä‘ang sá»­ dá»¥ng bitcode sáº½ cÃ³ áº£nh bÃ¡o build. Flutter sáº½ ngá»«ng há»— trá»£ bitcode trong má»™t báº£n phÃ¡t hÃ nh tÆ°Æ¡ng lai. Máº·c Ä‘á»‹nh, Flutter app khÃ´ng enable tÃ­nh nÄƒng nÃ y lÃªn, vÃ  chÃºng tÃ´i khÃ´ng mong Ä‘á»£i Ä‘iá»u nÃ y áº£nh hÆ°á»Ÿng Ä‘áº¿n nhiá»u nhÃ  phÃ¡t triá»ƒn. Tuy nhiÃªn, náº¿u báº¡n Ä‘Ã£ enable rá»“i thÃ¬ hÃ£y disable nÃ³ ngay khi nÃ¢ng cáº¥p lÃªn XCode 14. Má»Ÿ ios/Runner.xcworkspace -&gt; Turn off Enable Bitcode Xem tÃ i liá»‡u cá»§a Apple Ä‘á»ƒ biáº¿t thÃªm chi tiáº¿t IX. Tá»•ng káº¿t NhÆ° chÃºng tÃ´i váº«n thÆ°á»ng nÃ³i, nhÃ³m Flutter táº¡i Google vÃ´ cÃ¹ng biáº¿t Æ¡n cÃ´ng sá»©c mÃ  cá»™ng Ä‘á»“ng Ä‘Ã£ ná»— lá»±c Ä‘á»ƒ mang Ä‘áº¿n cho Flutter tráº£i nghiá»‡m tuyá»‡t vá»i nhÆ° váº­y. ChÃºng tÃ´i mong muá»‘n tiáº¿p tá»¥c láº·p láº¡i vÃ  táº­p trung vÃ o nhá»¯ng gÃ¬ quan trá»ng nháº¥t - táº¥t cáº£ vÃ¬ cÃ¡c báº¡n~ X. TÃ i liá»‡u BÃ i viáº¿t Ä‘Æ°á»£c dá»‹ch tá»« Whatâ€™s new in Flutter 3.3. Cáº£m Æ¡n cÃ¡c báº¡n Ä‘Ã£ theo dÃµi. Happy coding!!!" }, { "title": "[Flutter] Flutter 3.0 cÃ³ gÃ¬ má»›i ?", "url": "/posts/what-news-in-flutter3/", "categories": "Flutter", "tags": "dart, flutter, flutter3, flutter, window", "date": "2022-06-01 14:15:03 +0000", "content": "Giá»›i thiá»‡u 11/05/2022, Google I/O chÃ­nh thá»©c phÃ¡t hÃ nh phiÃªn báº£n Flutter 3 vá»›i ráº¥t nhiá»u cáº£i tiáº¿n Ä‘Ã¡ng ká»ƒ. Äáº·c biá»‡t dÃ nh cho cÃ¡c thiáº¿t bá»‹ sá»­ dá»¥ng window. Trong bÃ i viáº¿t nÃ y mÃ¬nh sáº½ cÃ¹ng tÃ¬m hiá»ƒu xem cÃ³ gÃ¬ trong báº£n cáº­p nháº­t nÃ y nhÃ©. Flutter hiá»‡n Ä‘Ã£ stable cho cáº£ 3 ná»n táº£ng MacOS, Linux vÃ  Windows. 5248 pull requests Ä‘Æ°á»£c merged. Má»™t sá»‘ thÃ´ng tin thÃªm vá» Flutter 3 báº¡n cÃ³ thá»ƒ tÃ¬m hiá»ƒu thÃªm á»Ÿ Ä‘Ã¢y: Introducing Flutter 3 Whatâ€™s new in Flutter 3 Dart 2.17: Productivity and integration Flutter 3 release notes I. Thay Ä‘á»•i trÃªn cÃ¡c thiáº¿t bá»‹ Desktop Linux vÃ  macOS Ä‘Ã£ cháº¡y á»•n Ä‘á»‹nh vÃ  bao gá»“m nhá»¯ng tÃ­nh nÄƒng sau: 1. Cascading menus and support for the macOS system menu bar Giá» báº¡n cÃ³ thá»ƒ táº¡o Ä‘Æ°á»£c thanh menu trÃªn macOS sá»­ dá»¥ng widget PlatformMenuBar, há»— trá»£ chÃ¨n cÃ¡c platform menus vÃ  Ä‘iá»u khiá»ƒn nhá»¯ng gÃ¬ xuáº¥t hiá»‡n trong á»©ng dá»¥ng. 2. Full support for international text input on all desktop platforms Text input bao gá»“m cÃ¡c ngÃ´n ngá»¯ nhÆ° tiáº¿ng Trung, Nháº­t, HÃ n Ä‘Ã£ Ä‘Æ°á»£c há»— trá»£ Ä‘áº§y Ä‘á»§ trÃªn cÃ¡c platform desktop, bao gá»“m cáº£ cÃ¡c phÆ°Æ¡ng thá»©c nháº­p cá»§a bÃªn thá»© ba nhÆ° Google Japan Input, Sogou. 3. Accessibility on all desktop platforms Flutter cháº¡y trÃªn Windows, macOS, vÃ  Linux Ä‘Æ°á»£c há»— trá»£ cÃ¡c dá»‹ch vá»¥ trá»£ nÄƒng nhÆ° trÃ¬nh Ä‘á»c mÃ n hÃ¬nh (screen-readers), trÃ¬nh Ä‘iá»u hÆ°á»›ng (accessible navigation) vÃ  Ä‘áº£o ngÆ°á»£c mÃ u (inverted colors) 4. Universal binaries by default on macOS Tá»« phiÃªn báº£n Flutter 3, cÃ¡c á»©ng dá»¥ng cháº¡y trÃªn macOS Ä‘Æ°á»£c xÃ¢y dá»±ng dÆ°á»›i dáº¡ng nhá»‹ phÃ¢n há»£p (universal binaries), cÃ¹ng vá»›i viá»‡c há»— trá»£ riÃªng cho mÃ¡y Mac cháº¡y intel vÃ  cÃ¡c thiáº¿t bá»‹ Apple Silicon má»›i nháº¥t. 5. Deprecating Windows 7/8 for development Flutter team khuyáº¿n nghá»‹ nÃ¢ng cáº¥p phÃ¡t triá»ƒn lÃªn phiÃªn báº£n Window10. Máº·c dÃ¹ khÃ´ng cháº·n viá»‡c cháº¡y trÃªn cÃ¡c phiÃªn báº£n cÅ© (window7,8â€¦) nhÆ°ng cÃ¡c phiÃªn báº£n trÃªn khÃ´ng Ä‘Æ°á»£c Microsoft há»— trá»£ ná»¯a vÃ  team Flutter cÅ©ng chá»‰ cÃ³ tháº» cung cáº¥p cÃ¡c phiÃªn báº£n thá»­ nghiá»‡m giá»›i háº¡n. ChÃº Ã½: Viá»‡c thÃ´ng bÃ¡o trÃªn chá»‰ áº£nh hÆ°á»Ÿng Ä‘áº¿n mÃ´i trÆ°á»ng phÃ¡t triá»ƒn khuyáº¿n nghá»‹. Team Flutter váº«n tiáº¿p tá»¥c cung cáº¥p cÃ¡c há»— trá»±o cho cÃ¡c á»©ng dá»¥ng cháº¡y trÃªn Window 7,8. II. Thay Ä‘á»•i trÃªn cÃ¡c thiáº¿t bá»‹ Mobile PhiÃªn báº£n cáº­p nháº­t nÃ y bao gá»“m cÃ¡c thay Ä‘á»•i sau trÃªn ná»n táº£ng di Ä‘á»™ng: 1. Foldable phone support Fluter 3 há»— trá»£ cÃ¡c thiáº¿t bá»‹ gáº­p (foldable phone). MediaQuery giá» Ä‘Ã£ bá»• sung thÃªm DisplayFeatures, há»— trá»£ mÃ´ táº£ cÃ¡c giá»›i háº¡n (bounds) vÃ  cÃ¡c tráº¡ng thÃ¡i cá»§a thiáº¿t bá»‹ nhÆ° báº£n lá» (linges), gáº¥p (folds) vÃ  cÃ¡c Ä‘oáº¡n cáº¯t (cutofs). NgoÃ i ra, tÃ­nh nÄƒng DisplayFeatureSubScreen cho phÃ©p hiá»ƒn thá»‹ tÃ­nh nÄƒng con mÃ  khÃ´ng bá»‹ chá»“ng chÃ©o lÃªn vÃ¹ng hiá»ƒn thá»‹ DisplayFeatures â€Œâ€ŒRáº¥t cáº£m Æ¡n nhÃ³m Microsoft, vÃ  Ä‘áº·t biá»‡t lÃ  @andreidiaconu, vÃ¬ nhá»¯ng Ä‘Ã³ng gÃ³p cá»§a há»! Báº¡n cÃ³ thá»ƒ thá»­ tráº£i nghiá»‡m Surface Duo emulator sample , bao gá»“m má»™t nhÃ¡nh (branch) Ä‘áº·c biá»‡t cá»§a Flutter Gallery, Ä‘á»ƒ xem cÃ¡c mÃ n hÃ¬nh kÃ©p cá»§a Flutter Ä‘ang hoáº¡t Ä‘á»™ng. 2. iOS variable refresh rate support Flutter há»— trá»±o tá»‘c Ä‘á»™ quÃ©t mÃ n hÃ¬nh trÃªn cÃ¡c thiáº¿t bá»‹ IOS cÃ³ mÃ n hÃ¬nh ProMotion, bao gá»“m iPhone13 Pro vÃ  iPad Pro. á»¨ng dá»¥ng trÃªn cÃ¡c thiáº¿t bá»‹ trÃªn cÃ³ thá»ƒ Ä‘áº¡t tá»‘c Ä‘á»™ quÃ©t 120Hz thay vÃ¬ bá»‹ giá»›i háº¡n 60Hz nhÆ° trÆ°á»›c Ä‘Ã¢y. Äá»ƒ biáº¿t thÃªm chi tiáº¿t, tham kháº£o á»Ÿ Ä‘Ã¢y 3 Simplified iOS releases Team Flutter Ä‘Ã£ cáº£i tiáº¿n thÃªm 1 sá»‘ option trong viá»‡c build ipa nháº±m Ä‘Æ¡n giáº£n hoÃ¡ viá»‡c phÃ¡t hÃ nh á»©ng dá»¥ng IOS cá»§a báº¡n. Khi á»©ng dá»¥ng Ä‘Ã£ sáºµn sÃ ng phÃ¢n phá»‘i tá»›i TestFlight hoáº·c Appstore, cháº¡y cÃ¢u lá»‡nh sau Ä‘á»ƒ táº¡o Xcode archive file (.xcarchive) vÃ  bundle file (.ipa) flutter build ipa Má»™t sá»‘ params tuá»³ chá»n thÃªm: â€”-export-method ad-hoc, â€”-export-method development â€”-export-method enterprise Sau khi app bundle Ä‘Æ°á»£c táº¡o, hÃ£y upload á»©ng dá»¥ng thÃ´ng qua Apple Transport macOS hoáº·c sá»­ dá»¥ng command lines sá»­ dá»¥ng xcrun altool báº±ng cÃ¡ch cháº¡y: man altool Sau khi upload thÃ nh cÃ´ng, á»©ng dá»¥ng cá»§a báº¡n sáº½ available trÃªn TestFlight hoáº·c AppStore. Sau khi thiáº¿t láº­p cÃ i Ä‘áº·t ban Ä‘áº§u dá»± Ã¡n, báº¡n khÃ´ng cáº§n pháº£i má»Ÿ XCode Ä‘á»ƒ phÃ¡t hÃ nh á»©ng dá»¥ng ná»¯a. 4. Gradle version update TrÃªn Flutter 3, náº¿u báº¡n táº¡o má»™t dá»± Ã¡n má»›i báº±ng cÃ´ng cá»¥ Flutter tool, báº¡n sáº½ tháº¥y cÃ¡c file gen sá»­ dá»¥ng phiÃªn báº£n má»›i nháº¥t cá»§a Gradle plugin vÃ  Android gradle. Vá»›i cÃ¡c dá»± Ã¡n hiá»‡n táº¡i, báº¡n cáº§n migrate lÃªn Gradle 7.4 vÃ  7.1.2 cho Android gradle plugin thá»§ cÃ´ng. 5. Sunsetting 32-bit iOS/iOS 9/iOS 10 NhÆ° Ä‘Ã£ thÃ´ng bÃ¡o vÃ o thÃ¡ng 2/2022 vá»›i báº£n phÃ¡t hÃ nh 2.10. Flutter sáº½ dá»«ng há»— trá»£ cho cÃ¡c thiáº¿t bá»‹ ios32 bit vÃ  cÃ¡c phiÃªn báº£n ios9, ios10. Thay Ä‘á»•i nÃ y sáº½ áº£nh hÆ°á»Ÿng Ä‘áº¿n cÃ¡c thiáº¿t bá»‹ iPhone 4S,5,5C vÃ  cÃ¡c thiáº¿t bá»‹ iPad tháº¿ há»‡ 2,3,4. Flutter 3 sáº½ lÃ  báº£n phÃ¡t hÃ nh cuá»‘i cÃ¹ng há»™ trá»£ cÃ¡c thiáº¿t bá»‹ trÃªn. Äá»ƒ tÃ¬m hiá»ƒu thÃªm vá» thay Ä‘á»•i nÃ y, hÃ£y xem á»Ÿ Ä‘Ã¢y RFC: End of support for 32-bit iOS devices III. Thay Ä‘á»•i trÃªn Web 1. Image decoding Flutter web hiá»‡n nay tá»± Ä‘á»™ng phÃ¡t hiá»‡n vÃ  sá»­ dá»¥ng API ImageDecoder trong cÃ¡c trÃ¬nh duyá»‡t Ä‘Æ°á»£c há»— trá»£. Cho Ä‘áº¿n hÃ´m nay, háº§u háº¿t cÃ¡c trÃ¬nh duyá»‡t dá»±a trÃªn Chromium (Chrome, Edge, Opera, Samsung Browser, v.v.) Ä‘Ã£ thÃªm API nÃ y. API má»›i nÃ y decode hÃ¬nh áº£nh báº¥t Ä‘á»“ng bá»™ khá»i main thread mÃ  báº±ng cÃ¡ch sá»­ dá»¥ng image codec tÃ­ch há»£p cá»§a trÃ¬nh duyá»‡t. Äiá»u nÃ y giÃºp tÄƒng tá»‘c Ä‘á»™ giáº£i mÃ£ hÃ¬nh áº£nh lÃªn gáº¥p 2 láº§n vÃ  main thread sáº½ khÃ´ng bao giá» bá»‹ cháº·n ná»¯a, loáº¡i bá» táº¥t cáº£ cÃ¡c lá»—i jank do hÃ¬nh áº£nh gÃ¢y ra trÆ°á»›c Ä‘Ã³. 2. Web app lifecycles VÃ²ng Ä‘á»i (lifecycle) API má»›i cá»§a cÃ¡c á»©ng dá»¥ng web Flutter cung cáº¥p cho báº¡n sá»± linh hoáº¡t Ä‘á»ƒ kiá»ƒm soÃ¡t quÃ¡ trÃ¬nh khá»Ÿi Ä‘á»™ng cá»§a á»©ng dá»¥ng Flutter tá»« trang HTML hosting vÃ  giÃºp Lighthouse phÃ¢n tÃ­ch hiá»‡u suáº¥t cá»§a á»©ng dá»¥ng cá»§a báº¡n. Äiá»u nÃ y Ã¡p dá»¥ng cho nhiá»u trÆ°á»ng há»£p sá»­ dá»¥ng, bao gá»“m cÃ¡c trÆ°á»ng há»£p Ä‘Æ°á»£c yÃªu cáº§u thÆ°á»ng xuyÃªn nhÆ° sau: MÃ n hÃ¬nh splash khi khá»Ÿi Ä‘á»™ng. Hiá»‡u á»©ng loading indicator. CÃ¡c trang Html thuáº§n. Äá»ƒ biáº¿t thÃªm chi tiáº¿t, xem á»Ÿ Ä‘Ã¢y IV. Tooling updates Má»™t sá»‘ cáº­p nháº­t cho Flutter vÃ  Dart bao gá»“m: 1. Lint package Lint 2.0 Ä‘Ã£ release trÃªn cáº£ 2 báº£n Flutter vÃ  Dart Flutter: https://pub.dev/packages/flutter_lints/versions/2.0.0 Dart: https://pub.dev/packages/lints/versions/2.0.0 CÃ¡c á»©ng dá»¥ng Ä‘Æ°á»£c táº¡o tá»« Flutter 3 báº±ng lá»‡nh flutter create sáº½ Ä‘Æ°á»£c tá»± Ä‘á»™ng sá»­ dá»¥ng bá»™ lints 2.0. CÃ¡c plugin &amp; package Ä‘Æ°á»£c khuyáº¿n nghá»‹ chuyá»ƒn sang phiÃªn báº£n 2.0 Ä‘á»ƒ cáº­p nháº­t. flutter pub upgrade --major-versions flutter_lints 2. Performance improvements TÃ­nh nÄƒng repaint partial Ä‘Æ°á»£c báº­t trÃªn cÃ¡c thiáº¿t bá»‹ android Ä‘Æ°á»£c há»— trá»£. Cáº£m Æ¡n @knopp Cáº£i thiá»‡n hiá»‡u suáº¥t cá»§a cÃ¡c OpacityAnimation. Cáº£i thiá»‡n má»©c Ä‘á»™ Æ°u tiÃªn cá»§a raster &amp; ui thread trÃªn Android vÃ  IOS cao hÆ¡n cÃ¡c thread khÃ¡c. GiÃºp tÄƒng ~20% tá»‘c Ä‘á»™ frame build. Cáº£m Æ¡n @JsouLiang Cáº£i thiá»‡n frame dropped trÃªn ios. Cáº£m Æ¡n @ColdPaleLight 3. Impeller Flutter Ä‘Ã£ lÃ m viá»‡c chÄƒm chá»‰ Ä‘á»ƒ tÃ¬m ra giáº£i phÃ¡t giáº£i quyáº¿t tÃ¬nh tráº¡ng Jank á»Ÿ nhá»¯ng frame Ä‘áº§u trÃªn trÃªn IOS vÃ  cÃ¡c ná»n táº£ng khÃ¡c. Trong báº£n Flutter 3, báº¡n cÃ³ thá»ƒ xem trÆ°á»›c thá»­ nghiá»‡m nÃ y trÃªn IOS cÃ³ tÃªn lÃ  Impeller. Impeller sáº½ biÃªn dá»‹ch trÆ°á»›c má»™t bá»™ Ä‘á»• bÃ³ng nhá» vÃ  Ä‘Æ¡n giáº£n hÆ¡n Ä‘á»ƒ chÃºng khong biÃªn dá»‹ch láº¡i khi á»©ng dá»¥ng Ä‘ang cháº¡y. ÄÃ¢y lÃ  nguyÃªn nhÃ¢n cá»§a Jank trong Flutter. Impeller váº«n trong giai Ä‘oáº¡n phÃ¡t triá»ƒn vÃ  cÃ²n khÃ¡ lÃ¢u má»›i hoÃ n thÃ nh. KhÃ´ng pháº£i táº¥t cáº£ tÃ­nh nÄƒng cá»§a Flutter Ä‘á»u Ä‘Æ°á»£c triá»ƒn khai, nhÆ°ng Flutter team khÃ¡ hÃ i lÃ²ng vá»›i Ä‘á»™ trung thá»±c vÃ  hiá»‡u suáº¥t cá»§a nÃ³ trÃªn á»©ng dá»¥ng Flutter Gallery mÃ  team Ä‘ang phÃ¡t triá»ƒn vÃ  chia sáº» vá» tiáº¿n trÃ¬nh cá»§a mÃ¬nh. Má»™t Ä‘iá»u Ä‘áº·c biá»‡t lÃ  frame kÃ©m nháº¥t trong animation chuyá»ƒn tiáº¿p cá»§a á»©ng dá»¥ng nÃ y Ä‘Ã£ nhanh hÆ¡n khoáº£ng 20 láº§n so vá»›i trÆ°á»›c Ä‘Ã¢y. Impeller cÃ³ thá»ƒ Ä‘Æ°á»£c kÃ­ch hoáº¡t dÆ°á»›i dáº¡ng flag trÃªn IOS. CÃ¡ch 1: Báº£n cÃ³ thá»ƒ thÃªm nÃ³ khi gá»i flutter run vÆ¡i flag â€”-enable-impeller CÃ¡ch 2: Trong Info.plist, set FLTEnableImpellerflag = true 4. Inline ads on android TÄƒng hiá»‡u suáº¥t package google_mobile_ads V. CÃ¡c cáº­p nháº­t khÃ¡c 1. Material 3 Flutter 3 há»— trá»£ Material Design 3, tháº¿ há»‡ tiáº¿p theo cá»§a Material Design Flutter 3 cung cáº¥p há»— trá»±o chá»n cho M3 bao gá»“m cÃ¡c tÃ­nh nÄƒng nhÆ° dynamic color, color system, text styleâ€¦ Báº¡n cÃ³ thá»ƒ thá»­ cÃ¡c tÃ­nh nÄƒng má»›i cá»§a Material 3 trong codelab sau : Take your Flutter app from Boring to Beautiful 2. Theme extensions Flutter giá» cho phÃ©p thÃªm báº¥t ká»³ thá»© gÃ¬ vÃ o ThemeData vá»›i concept gá»i lÃ  Theme Extensions. Triá»ƒn khai copyWith, lerf,â€¦ 3. Ads Team Flutter biáº¿t ráº±ng Ä‘iá»u quan trá»ng lÃ  cÃ¡c publishers pháº£i yÃªu cáº§u sá»± Ä‘á»“ng Ã½ Ä‘á»‘i vá»›i quáº£ng cÃ¡o Ä‘Æ°á»£c cÃ¡ nhÃ¢n hÃ³a vÃ  xá»­ lÃ½ cÃ¡c yÃªu cáº§u vá» tÃ­nh minh báº¡ch theo dÃµi á»©ng dá»¥ng (ATT) cá»§a Apple. Äá»ƒ biáº¿t thÃªm chi tiáº¿t, tham kháº£o Google mobiles ads package google_mobile_ads VI. Breaking changes Vá»›i mong muá»‘n phÃ¡t triá»ƒn vÃ  cáº£i thiá»‡n Flutter, team mong muá»‘n sá»‘ lÆ°á»£ng breaking changes lÃ  tá»‘i thiá»ƒu. Táº¡i báº£n phÃ¡t hÃ nh Flutter 3, chÃºng ta cÃ³ má»™t sá»‘ breaking change sau: Deprecated API removed after v2.10 Page transitions replaced by ZoomPageTransitionsBuilder Migrate useDeleteButtonTooltip to deleteButtonTooltipMessage of Chips Náº¿u báº¡n Ä‘ang sá»­ dá»¥ng báº¥t kÃ¬ bá»™ API nÃ o trong sá»‘ ká»ƒ trÃªn, hÃ£y tham kháº£o migration guide. Conclusion Cáº£m Æ¡n cÃ¡c báº¡n Ä‘Ã£ Ä‘á»c bÃ i viáº¿t. Happy coding ^^ References https://medium.com/flutter/whats-new-in-flutter-3-8c74a5bc32d0" }, { "title": "[Flutter] Flutter 2.8 cÃ³ gÃ¬ má»›i ?", "url": "/posts/flutter-2.8/", "categories": "Flutter", "tags": "dart, flutter, new", "date": "2021-12-10 14:15:03 +0000", "content": "Introduction Hi, xin chÃ o má»i ngÆ°á»i :D Flutter vá»«a má»›i cho ra máº¯t phiÃªn báº£n 2.8 vá»›i khÃ¡ nhiá»u cáº­p nháº­t má»›i cÃ¹ng nhá»¯ng con sá»‘ Ä‘Ã¡ng chÃº Ã½ 207 contributor &amp; 178 reviewers 2424 MRs Ä‘Æ°á»£c merged 2976 lá»—i Ä‘Æ°á»£c close Bartosz Selwesiuk - KÄ© sÆ° Flutter táº¡i Very Good Ventures Ä‘Ã£ Ä‘Ã³ng gÃ³p tá»›i 23 PRs vÃ  háº§u háº¿t Ä‘á»u táº­p trung vÃ o camera plugin dÃ nh cho web. Táº¥t cáº£ cÃ¡c cÃ´ng viá»‡c táº­p thá»ƒ trÃªn Ä‘Ã£ táº¡o ra nhá»¯ng cáº£i tiáº¿n Ä‘Ã¡ng ká»ƒ vá» hiá»‡u suáº¥t vÃ  vá» engine láº«n DevTools, má»™t báº£n Google Mobile Ads SDK cho Flutter, má»™t loáº¡t tÃ­nh nÄƒng vÃ  cáº£i tiáº¿n Firebase má»›i, Webview 3.0, má»™t loáº¡t cÃ¡c gÃ³i Flutter Favorite má»›i, má»™t loáº¡t cáº­p nháº¥t cho Desktop, phiÃªn báº£n má»›i DartPad. Okay, letâ€™s start. Performance NhÆ° má»i khi, cÃ´ng viá»‡c #1 vá»›i Flutter lÃ  cháº¥t lÆ°á»£ng. ChÃºng tÃ´i dÃ nh pháº§n lá»›n thá»i gian Ä‘á»ƒ Ä‘áº£m báº£o ráº±ng Flutter cháº¡y trÆ¡n chu vÃ  máº¡nh máº½ nháº¥t cÃ³ thá»ƒ trÃªn cÃ¡c thiáº¿t bá»‹ Ä‘Æ°á»£c há»— trá»£ Startup PhiÃªn báº£n release nÃ y bao gá»“m cáº£i tiáº¿n vá» Ä‘á»— trá»… khá»Ÿi Ä‘á»™ng á»©ng dá»¥ng. Thá»­ nghiá»‡m vá»›i Google Pay, má»™t á»©ng dá»¥ng Ä‘á»§ lá»›n vá»›i hÆ¡n 1 triá»‡u dÃ²ng code Ä‘á»ƒ Ä‘áº£m báº£o ráº±ng cÃ¡c thay Ä‘á»•i nÃ y cÃ³ thá»ƒ cáº£m nháº­n Ä‘Æ°á»£c. Google Pay Ä‘Ã£ giáº£m 50% thá»i gian khá»Ÿi Ä‘á»™ng trÃªn cÃ¡c thiáº¿t bá»‹ Android cáº¥p tháº¥p vÃ  10% vá»›i cÃ¡c thiáº¿t bá»‹ cao cáº¥p Nhá»¯ng cáº£i tiáº¿n nÃ y Ä‘áº¿n tá»« viá»‡c thay Ä‘á»•i chÃ­nh sÃ¡ch thu há»“i rÃ¡c Dart VM GC giÃºp trÃ¡nh cÃ¡c kÃ¬ GC khÃ´ng Ä‘Ãºng lÃºc trong suá»‘t quÃ¡ trÃ¬nh khá»Ÿi Ä‘á»™ng. VÃ­ dá»¥ trÆ°á»›c Ä‘Ã¢y, viá»‡c GC Ä‘Æ°á»£c báº¯t Ä‘áº§u trÆ°á»›c khi khung hÃ¬nh Ä‘áº§u tiÃªn Ä‘Æ°á»£c hiá»ƒn thá»‹ trÃªn Android, thÃ¬ nay chá»‰ Ä‘Æ°á»£c thÃ´ng bÃ¡o khi cÃ³ tÃ­n hiá»‡u TRIM_LEVEL_RUNNING_CRITTIAL. Thay Ä‘á»•i nÃ y giáº£m thá»i gian Ä‘áº¿n khung hÃ¬nh Ä‘áº§u lÃªn tá»›i 300ms trÃªn thiáº¿t bá»‹ cáº¥p tháº¥p. Memory CÃ¡c nhÃ  phÃ¡t triá»ƒn Flutter nháº¯m Ä‘áº¿n má»¥c tiÃªu bá»™ nhá»› trÃªn cÃ¡c thiáº¿t bá»‹ Ä‘ang gáº·p váº¥n Ä‘á» trong viá»‡c náº¡p Dart VMâ€™s service isolate. TrÃªn báº£n 2.8 cÃ¡c dá»‹ch vá»¥ nÃ y cá»§a Dart VM Ä‘Æ°á»£c chia thÃ nh cÃ¡c package riÃªng láº» vÃ  Ä‘Æ°á»£c táº£i riÃªng. Äiá»u nÃ y giÃºp tiáº¿t kiáº¿t kiá»‡m bá»™ nhá»› lÃªn tá»›i 40 MB cho Ä‘áº¿n khi cÃ¡c service isolate cáº§n thiáº¿t. Profiling ÄÃ´i khi cÃ¡c nhÃ  phÃ¡t triá»ƒn muá»‘n theo dÃµi hiá»‡u suáº¥t á»©ng dá»¥ng. HÆ¡n ná»¯a, há» thÆ°á»ng muá»‘n xem cÃ¡c native event ngay cáº£ trong cháº¿ Ä‘á»™ release Ä‘á»ƒ hiá»ƒu rÃµ hÆ¡n cÃ¡c váº¥n Ä‘á» hiá»‡u suáº¥t. PhiÃªn báº£n nÃ y sáº½ gá»­i cÃ¡c event Ä‘áº¿n systrace recorder náº¿u nÃ³ Ä‘Æ°á»£c báº­t, vÃ  nÃ³ cÃ³ thá»ƒ gá»­i ngay cáº£ á»Ÿ cháº¿ Ä‘á»™ release Flutter tracing events are now shown (bottom) in the Android systrace recording tooling Flutter DevTools Äá»ƒ há»— trá»£ gá»¡ lá»—i cÃ¡c váº¥n Ä‘á» liÃªn quan Ä‘áº¿n hiá»‡u suáº¥t, phiÃªn báº£n nÃ y bá»• sung tÃ­nh nÄƒng Enhance Tracing giÃºp báº¡n chuáº©n Ä‘oÃ¡n giao diá»‡n ngÆ°á»i dÃ¹ng bá»‹ jank bá»Ÿi cÃ¡c hoáº¡t Ä‘á»™ng build, layout, hay paint. Khi cÃ³ báº¥t kÃ¬ tÃ­nh nÄƒng nÃ o Ä‘Æ°á»£c báº­t, timeline bao gá»“m cÃ¡c sá»± kiá»‡n má»›i cho widget sáº½ Ä‘Æ°á»£c hiá»ƒn thá»‹ NgoÃ i ra báº£n phÃ¡t nÃ y cÃ²n bá»• sung tÃ­nh nÄƒng track hiá»‡u suáº¥t khá»Ÿi Ä‘á»™ng á»©ng dá»¥ng. Bao gá»“m cÃ¡c máº«u CPU tá»« khi khá»Ÿi táº¡o Dart VM cho Ä‘áº¿n khi khung Flutter Ä‘áº§u tiÃªn Ä‘Æ°á»£c hiá»ƒn thá»‹. Web platform views Android vÃ  IOS khÃ´ng pháº£i lÃ  nhá»¯ng ná»n táº£ng duy nháº¥t Ä‘Æ°á»£c cáº£i thiá»‡n hiá»‡u suáº¥t. Báº£n phÃ¡t hÃ nh nÃ y cÅ©ng cáº£i thiá»‡n hiá»‡u suáº¥t Ä‘á»‘i vá»›i ná»n táº£ng Web. Flutter Web sá»­ dá»¥ng HtmlElementView Ä‘á»ƒ lÆ°u trá»¯ cÃ¡c cÃ¡c HTML element bÃªn trong á»©ng dá»¥ng web flutter cá»§a mÃ¬nh. Náº¿u báº¡n Ä‘ang sá»­ dá»¥ng phiÃªn báº£n web cá»§a google_map_flutter hay plugin video_player thÃ¬ báº¡n Ä‘ang sá»­ dá»¥ng platform view Ä‘áº¥y. Trong cÃ¡c phiÃªn báº£n trÆ°á»›c, viá»‡c nhÃºng (embedding) 1 platform view láº­p tá»©c táº¡o ra 1 khung váº½ má»›i, Ä‘iá»u nÃ y ráº¥t tá»‘n kÃ©m bá»Ÿi má»—i khung hÃ¬nh cÃ³ kÃ­ch thÆ°á»›c cá»§a toÃ n bá»™ cá»­a sá»•. PhiÃªn báº£n nÃ y sá»­ dá»¥ng láº¡i cÃ¡c canvas Ä‘Æ°á»£c táº¡o cho cÃ¡c platform trÆ°á»›c Ä‘Ã³, vÃ¬ váº­y thay vÃ¬ phÃ¡t sinh chi phÃ­ gáº¥p 60 láº§n má»—i giay, báº¡n chá»‰ phá»‰a chá»‹u chi phÃ­ 1 lÃ n trong toÃ n bá»™ vÃ²ng Ä‘á»i cá»§a á»©ng dá»¥ng. Äiá»u nÃ y Ä‘á»“ng nghÄ©a báº¡n cÃ³ thá»ƒ cÃ³ nhiá»u instance cá»§a HtmlElementView trong cÃ¡c á»©ng dá»¥ng web cá»§a mÃ¬nh mÃ  khÃ´ng lÃ m giáº£m hiá»‡u suáº¥t, Ä‘á»“ng thá»i lÃ m giáº£m scroll jank. Ecosystem Flutter khÃ´ng chá»‰ lÃ  framework, engine, toolsâ€¦ CÃ³ hÆ¡n 20.000 package vÃ  plugins trÃªn pub.dev vá»›i nhiá»u hÆ¡n Ä‘Æ°á»£c thÃªm vÃ o má»—i ngÃ y. ÄÃ³ lÃ  má»™t pháº§n giÃºp há»‡ sinh thÃ¡i lá»›n hÆ¡n. GA of Flutter Adss Äáº§u tiÃªn vÃ  quan trá»ng nháº¥t Ä‘Ã³ lÃ  viá»‡c phÃ¡t hÃ nh Google Mobile SDK cho flutter vÃ o thÃ¡ng 11 Báº£n phÃ¡t hÃ nh nÃ y há»— trá»£ 5 Ä‘á»‹nh dáº¡ng quáº£ng cÃ¡o, tÃ­ch há»£p cáº£ há»— trá»£ AdMob vÃ  AdManager vÃ  báº£n beta cá»§a tÃ­nh nÄƒng mediation giÃºp báº¡n tá»‘i Æ°u hoÃ¡ hiá»‡u suáº¥t quáº£ng cÃ¡o. Äá»ƒ biáº¿t thÃªm thÃ´ng tin vá» viá»‡c tÃ­ch há»£p, hÃ£y xem á»Ÿ Ä‘Ã¢y Webview 3.0 Má»™t báº£n phÃ¡t hÃ nh má»›i Ä‘i kÃ¨m vá»›i Flutter láº§n nÃ y lÃ  phiÃªn báº£n 3.0 cá»§a plugin webview_flutter. Viá»‡c bump version lÃªn 3 bá»Ÿi sá»‘ lÆ°á»£ng tÃ­nh nÄƒng má»›i vÃ  má»™t sá»± thay Ä‘á»•i cÃ³ kháº£ nÄƒng break cÃ¡ch hoáº¡t Ä‘á»™ng trÃªn Android. Trong cÃ¡c phiÃªn báº£n trÆ°á»›c cá»§a webview_flutter, hybrid composition mode Ä‘Ã£ cÃ³ sáºµn nhÆ°ng khÃ´ng pháº£i lÃ  máº·c Ä‘á»‹nh. Hybrid composition Ä‘Ã£ kháº¯c phá»¥c má»™t vÃ i váº¥n Ä‘á» mÃ  cháº¿ Ä‘á»™ áº£o gáº·p pháº£i. Dá»±a trÃªn pháº£n há»“i cá»§a ngÆ°á»i dÃ¹ng vÃ  theo dÃµi váº¥n Ä‘á», chÃºng tÃ´i nghÄ© ráº±ng Ä‘Ã£ Ä‘áº¿n lÃºc composition nÃªn trá»Ÿ thÃ nh máº·c Ä‘á»‹nh. NgoÃ i ra, nÃ³ cÅ©ng bá»• sung má»™t sá»‘ tÃ­nh nÄƒng Ä‘Æ°á»£c yÃªu cáº§u nhÆ° : Há»— trá»£ POST &amp; GET (4450, 4479, 4480, 4573) Táº£i HTML tá»« chuá»—i vÃ  file (4446, 4486, 4544, 4558) Há»— trá»£ transparent background (3431, 4569, 4570) Táº¡o cookies trÆ°á»›c khi táº£i ná»™i dung (4555, 4556, 4557) HÆ¡n tháº¿ ná»¯a, trong phiÃªn báº£n 3.0, webview_flutter cÃ²n há»— trá»£ cho ná»n táº£ng web. ÄÃ£ cÃ³ nhiá»u báº¡n yÃªu cáº§u kháº£ nÄƒng lÆ°u trá»¯ webview trong á»©ng dá»¥ng web cá»§a Flutter. Tá»« gÃ³c Ä‘á»™ coding, nÃ³ Ä‘Æ°á»£c trÃ¬nh bÃ y nhÆ° sau import 'package:flutter/foundation.dart'; import 'package:flutter/material.dart'; import 'package:webview_flutter/webview_flutter.dart'; import 'package:webview_flutter_web/webview_flutter_web.dart'; void main() { runApp(const MaterialApp(home: HomePage())); } class HomePage extends StatefulWidget { const HomePage({Key? key}) : super(key: key); @override State&lt;HomePage&gt; createState() =&gt; _HomePageState(); } class _HomePageState extends State&lt;HomePage&gt; { @override void initState() { super.initState(); // required while web support is in preview if (kIsWeb) WebView.platform = WebWebViewPlatform(); } @override Widget build(BuildContext context) =&gt; Scaffold( appBar: AppBar(title: const Text('Flutter WebView example')), body: const WebView(initialUrl: 'https://flutter.dev'), ); } Khi cháº¡y trÃªn web, nÃ³ váº«n hoáº¡t Ä‘á»™ng Ä‘Ãºng nhÆ° mong Ä‘á»£i. LÆ°u Ã½ ráº±ng viá»‡c triá»ƒn khai webview trÃªn webview hiá»‡n táº¡i gáº·p pháº£i má»™t sá»‘ háº¡n cháº¿ bá»Ÿi nÃ³ Ä‘Æ°á»£c xÃ¢y dá»±ng dá»±a trÃªn iframe, chá»‰ há»— trá»£ táº£i URL Ä‘Æ¡n giáº£n vÃ  khÃ´ng cÃ³ kháº£ nÄƒng kiá»ƒm soÃ¡t hoáº·c tÆ°Æ¡ng tÃ¡c vá»›i ná»™i dung Ä‘Ã£ táº£i. Äá»ƒ biáº¿t thÃªm chi tiáº¿t, hÃ£y kiá»ƒm tra webview_flutter_web README á»Ÿ Ä‘Ã¢y Flutter Favorites Äá»™i ngÅ© Flutter Ecosystem Committee Ä‘Ã£ chá»‰ Ä‘á»‹nh nhá»¯ng package sau Ä‘áº¡t Flutter Favorite 3 package custom cho API router má»›i: beamer , routemaster, go_router Package drift, má»™t reactive persistance lib cho flutter vÃ  dart, Ä‘Æ°á»£c build dá»±a trÃªn sqlite3 Package [freezed] cÃ´ng cá»¥ cung cáº¥p cÃº phÃ¡p Ä‘Æ¡n giáº£n Ä‘á»ƒ define, clone, patching cÃ¡c Ä‘á»‘i tÆ°á»£ngâ€¦ Package dart_code_metrics má»™t analytics tools giÃºp báº¡n phÃ¢n tÃ­ch vÃ  nÃ¢ng cao cháº¥t lÆ°á»£ng code VÃ  má»™t sá»‘ GUI Package : flex_color_scheme, flutter_svg, feedback, toggle_switch vÃ  auto_size_text Platform-specific Packages Náº¿u báº¡n lÃ  tÃ¡c giáº£ cá»§a plugin, quyáº¿t Ä‘á»‹nh Ä‘Æ°a ra há»— trá»£ trÃªn ná»n táº£ng nÃ o. CÃ³ thá»ƒ lÃ m báº±ng cÃ¡ch sá»­ dá»¥ng thuá»™c tÃ­nh pluginClass trong pubspec.yaml. flutter: plugin: platforms: android: package: com.example.hello pluginClass: HelloPlugin ios: pluginClass: HelloPlugin Firebase Má»™t pháº§n lá»›n khÃ¡c trong há»‡ sinh thÃ¡i Flutter lÃ  FlutterFire, Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi 2/3 á»©ng dá»¥ng Flutter. Báº£n phÃ¡t hÃ nh nÃ y bá»• sung má»™t sá»‘ tÃ­nh nÄƒng má»›i giÃºp dá»… dÃ ng xÃ¢y dá»±ng cÃ¡c á»©ng dá»¥ng báº±ng Flutter vÃ  Firebase Táº¥t cáº£ cÃ¡c plugin FlutterFire Ä‘á»u chuyá»ƒn tá»« beta -&gt; stable Há»— trá»£ má»›i trong DartPad cho má»™t sá»‘ dá»‹ch vá»¥ Firebase ThÆ° viá»‡n má»›i dá»… dÃ ng xÃ¢y dá»±ng giao diá»‡n ngÆ°á»i dÃ¹ng Ä‘á»ƒ xÃ¡c thÆ°ucj vÃ  truy váº¥n trá»±c tiáº¿p vá»›i Firestore Firebase Object/Document mapping cho Flutter, Ä‘ang á»Ÿ báº£n alpha Production Quality Gáº§n nhÆ° toÃ n bá»™ cÃ¡c FlutterFire package Ä‘á»u sáºµn sÃ ng á»Ÿ tráº¡ng thÃ¡i stable Desktop Báº£n release 2.8 bao gá»“m 1 bÆ°á»›c tiáº¿n lá»›n trÃªn con Ä‘Æ°á»ng á»•n Ä‘á»‹nh Windows, macOS vÃ  Linux. Há»— trá»£ quá»‘c táº¿ hoÃ¡ vÃ  ná»™i dá»‹a : IME Trung Quá»‘c, HÃ n Quá»‘c, Kanji. Kiáº¿n trÃºc láº¡i cÃ¡ch xá»­ lÃ½ sá»± kiá»‡n bÃ n phÃ­m cho phÃ©p báº£n há»“i Ä‘á»“ng bá»™. â€¦ Remove dev channel Do háº¡n cháº¿ vá» máº·t tÃ i nguyÃªn, gáº§n Ä‘Ã¢y chÃºng tÃ´i Ä‘Ã£ ngá»«ng cáº­p nháº­t kÃªnh dev. ChÃºng tÃ´i tháº¥y ráº±ng cÃ³ dÆ°á»›i 3% cÃ¡c nhÃ  phÃ¡t triá»ƒn sá»­ dá»¥ng dev channel. VÃ¬ váº­y chÃºng tÃ´i quyáº¿t Ä‘á»‹nh báº¯t Ä‘áº§u quÃ¡ trÃ¬nh ngá»«ng hoáº¡t Ä‘á»™ng dev channel. Breaking changes NhÆ° má»i khi, chung tÃ´i cá»‘ gáº¯ng giáº£m sá»‘ lÆ°á»£ng break change trong má»—i báº£n phÃ¡t hÃ nh. Trong báº£n 2.8 khÃ´ng cÃ³ breaking change ngoÃ i cÃ¡c APIs bá»‹ deplecated vÃ  bá»‹ xoÃ¡ theo chÃ­nh sÃ¡ch thay Ä‘á»•i. 90292 Loáº¡i bá» autovalidate 90293 Loáº¡i bá» FloatingHeaderSnapConfiguration.vsync 90294 Loáº¡i bá» AndroidViewController.id 90295 Loáº¡i bá» BottomNavigationBarItem.title 90296 Loáº¡i bá» cÃ¡c class Ä‘á»‹nh dáº¡ng nháº­p vÄƒn báº£n Summary Khi chÃºng tÃ´i káº¿t thÃºc nÄƒm 2021 vÃ  mong chá» Ä‘áº¿n nÄƒm 2022, nhÃ³m Flutter muá»‘n bÃ y tá» lÃ²ng biáº¿t Æ¡n cá»§a Ä‘á»‘i vá»›i cÃ´ng viá»‡c vÃ  sá»± há»— trá»£ cá»§a toÃ n bá»™ cá»™ng Ä‘á»“ng Flutter. Máº·c dÃ¹ Ä‘Ãºng lÃ  chÃºng tÃ´i Ä‘ang xÃ¢y dá»±ng Flutter cho sá»‘ lÆ°á»£ng nhÃ  phÃ¡t triá»ƒn ngÃ y cÃ ng tÄƒng trÃªn tháº¿ giá»›i, nhÆ°ng cÅ©ng Ä‘Ãºng theo nghÄ©a Ä‘en lÃ  chÃºng tÃ´i khÃ´ng thá»ƒ xÃ¢y dá»±ng nÃ³ mÃ  khÃ´ng cÃ³ báº¡n. Cá»™ng Ä‘á»“ng Flutter khÃ´ng giá»‘ng ai vÃ  chÃºng tÃ´i biáº¿t Æ¡n táº¥t cáº£ nhá»¯ng gÃ¬ báº¡n lÃ m. ChÃºc báº¡n cÃ³ má»™t mÃ¹a lá»… vui váº» vÃ  chÃºng tÃ´i sáº½ gáº·p láº¡i báº¡n trong nÄƒm má»›i! Resources Whatâ€™s new in Flutter 2.8" }, { "title": "[Flutter] ShrinkWrap vs Slivers | Decoding Flutter", "url": "/posts/shrinkwrap-vs-slivers/", "categories": "Flutter", "tags": "dart, flutter, flutter performance, listview", "date": "2021-11-20 14:15:03 +0000", "content": "Introduction Má»™t trong nhá»¯ng widget cÆ¡ báº£n mÃ  cÃ¡c developer sá»­ dá»¥ng thÆ°á»ng xuyÃªn Ä‘Ã³ lÃ  ListView. ListView ráº¥t dá»… dÃ¹ng, nhÆ°ng Ä‘á»ƒ tá»‘i Æ°u nÃ³ thÃ¬ khÃ´ng háº³n ai cÅ©ng biáº¿t. Trong bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ cÃ¹ng Ä‘i vÃ o má»™t usecase ráº¥t phá»• biáº¿n Ä‘Ã³ lÃ  lá»“ng listview trong listview vÃ  bÃ i toÃ¡n performance. VÃ­ dá»¥ bÃªn dÆ°á»›i Ä‘Ã¢y cho báº¡n tháº¥y cÃ¡ch mÃ  ta lá»“ng cÃ¡c ListView con vÃ o 1 ListView thÃ´ng thÆ°á»ng. ListView( // Setting `shrinkWrap` to `true` here is both unnecessary and expensive. children: &lt;Widget&gt;[ ListView.builder( itemCount: list1Children.length, itemBuilder: (BuildContext context, int index) { return list1Children[index]; }, // This forces the `ListView` to build all of its children up front, // negating much of the benefit of using `ListView.builder`. shrinkWrap: true, ), ListView.builder( itemCount: list2Children.length, itemBuilder: (BuildContext context, int index) { return list2Children[index]; }, // This forces the `ListView` to build all of its children up front, // negating much of the benefit of using `ListView.builder`. shrinkWrap: true, ), ... ], ) HÃ£y cÃ¹ng xem láº¡i vá» Ä‘á»‹nh nghÄ©a cá»§a shrinkWrap á»Ÿ Ä‘Ã¢y Viá»‡c set shrinkWrap = true sáº½ force toÃ n bá»™ listview bÃªn trong cá»§a báº¡n tÃ­nh toÃ¡n láº¡i sao cho chiá»u cao cá»§a list lÃ  há»¯u háº¡n thay vÃ¬ chiá»u cao thÃ´ng thÆ°á»ng cá»§a cÃ¡c listview lÃ  vÃ´ cÃ¹ng. Äiá»u nÃ y sáº½ gÃ¢y giáº£m hiá»‡u nÄƒng hÆ¡n Ä‘Ã¡ng ká»ƒ bá»Ÿi kÃ­ch thÆ°á»›c cá»§a scrollview luÃ´n cáº§n Ä‘Æ°á»£c tÃ­nh toÃ¡n láº¡i báº¥t cá»© khi nÃ o vá»‹ trÃ­ scroll thay Ä‘á»•i. Giá» thÃ¬ báº¡n Ä‘Ã£ hiá»ƒu táº¡i sao pháº§n code bÃªn trÃªn sáº½ khÃ¡ tá»‘n kÃ©m rá»“i pháº£i khÃ´ng :D CÃ³ 2 váº¥n Ä‘á» báº¡n cáº§n pháº£i Ä‘á»ƒ Ã½ : ListView bao ngoÃ i cÃ¹ng Ä‘ang khÃ´ng set shrinkWrap = true, mÃ  chá»‰ listview con cáº§n set mÃ  thÃ´i ListView.Builder hiá»‡u quáº£ trong viá»‡c build cÃ¡c thÃ nh pháº§n con cá»§a nÃ³, trÃ¡nh viá»‡c pháº£i build nhá»¯ng widget khÃ´ng thuá»™c viewport. NhÆ°ng viá»‡c set shrinkWrap = true sáº½ overrides láº¡i cÃ¡ch lÃ m nÃ y, khi Ä‘Ã³ ListView.Builder sáº½ khÃ´ng cÃ²n Ã½ nghÄ©a ná»¯a. Everything builds! import 'package:flutter/material.dart'; import 'dart:math' as math; void main() { runApp(ShrinkWrApp()); } class ShrinkWrApp extends StatelessWidget { @override Widget build(BuildContext context) { return MaterialApp( debugShowCheckedModeBanner: false, title: 'ShrinkWrap vs Slivers', home: Scaffold( appBar: AppBar( title: const Text(\"ShrinkWrap, Street Rat, I don't, Buy that!\"), ), body: const ShrinkWrapSlivers(), ), ); } } class ShrinkWrapSlivers extends StatefulWidget { const ShrinkWrapSlivers({ Key? key, }) : super(key: key); @override _ShrinkWrapSliversState createState() =&gt; _ShrinkWrapSliversState(); } class _ShrinkWrapSliversState extends State&lt;ShrinkWrapSlivers&gt; { List&lt;ListView&gt; innerLists = []; final numLists = 15; final numberOfItemsPerList = 100; @override void initState() { super.initState(); for (int i = 0; i &lt; numLists; i++) { final _innerList = &lt;ColorRow&gt;[]; for (int j = 0; j &lt; numberOfItemsPerList; j++) { _innerList.add(const ColorRow()); } innerLists.add( ListView.builder( itemCount: numberOfItemsPerList, itemBuilder: (BuildContext context, int index) =&gt; _innerList[index], shrinkWrap: true, physics: const NeverScrollableScrollPhysics(), ), ); } } @override Widget build(BuildContext context) { return ListView.builder( itemCount: numLists, itemBuilder: (context, index) =&gt; innerLists[index]); } } @immutable class ColorRow extends StatefulWidget { const ColorRow({Key? key}) : super(key: key); @override State createState() =&gt; ColorRowState(); } class ColorRowState extends State&lt;ColorRow&gt; { Color? color; @override void initState() { super.initState(); color = randomColor(); } @override Widget build(BuildContext context) { print('Building ColorRowState'); return Container( decoration: BoxDecoration( gradient: LinearGradient( begin: Alignment.topLeft, end: Alignment.bottomRight, colors: [ randomColor(), randomColor(), ], ), ), child: Row( children: &lt;Widget&gt;[ Padding( padding: const EdgeInsets.all(8.0), child: Container(height: 50, width: 50, color: Colors.white), ), Flexible( child: Column( children: const &lt;Widget&gt;[ Padding( padding: EdgeInsets.all(8), child: Text('I\\'m a widget!', style: TextStyle(color: Colors.white)), ), ], ), ), ], ), ); } } Color randomColor() =&gt; Color((math.Random().nextDouble() * 0xFFFFFF).toInt()).withOpacity(1.0); Náº¿u cháº¡y thá»­, báº¡n sáº½ tháº¥y 1 váº¥n Ä‘á» xáº£y ra, Ä‘Ã³ lÃ  ngay khi UI Ä‘Æ°á»£c load, 100 item Ä‘áº§u Ä‘Æ°á»£c render ngay máº·c dÃ¹ ta má»›i chá»‰ nhÃ¬n tháº¥y vÃ i item Ä‘áº§uâ€¦ VÃ  khi báº¡n scroll thÃªm má»™t Ä‘oáº¡n Ä‘á»§ 100 item, thÃ¬ 100 item tiáº¿p theo sáº½ Ä‘Æ°á»£c load ngay sau Ä‘Ã³ táº¡i 1 thá»i Ä‘iá»ƒm. ÄÃ¢y nhÆ° lÃ  má»™t vá»¥ bom ná»• váº­y :D Giá» pháº£i lÃ m nhÆ° nÃ o ??? Lazily building nested lists Äá»ƒ cá»©u báº¡n, hÃ£y cÃ¹ng xay dá»±ng láº¡i giao diá»‡n vá»›i Slivers thay vÃ¬ ListViews. Äá»ƒ tÃ¬m hiá»ƒu thÃªm vá» sliver, hÃ£y Ä‘á»c á»Ÿ Ä‘Ã¢y BÆ°á»›c 1 Thay ListView wrap ngoÃ i cÃ¹ng báº±ng SliverList // Before @override Widget build(BuildContext context) { return ListView.builder( itemCount: numberOfLists, itemBuilder: (context, index) =&gt; innerLists[index], ); } // After @override Widget build(BuildContext context) { return CustomScrollView(slivers: innerLists); } BÆ°á»›c 2 Thay Ä‘á»•i data type cá»§a listview con tá»« List =&gt; List // Before List&lt;ListView&gt; innerLists = []; // After List&lt;SliverList&gt; innerLists = []; BÆ°á»›c 3 Giá» thÃ¬ restructure Ä‘á»‘ng listview con nÃ o. SliverList thÃ¬ hÆ¡i khÃ¡c so vá»›i ListView, chá»§ yáº¿u tá»« sá»± xuáº¥t hiá»‡n cá»§a 1 tháº±ng lÃ  delegate. // Before @override void initState() { super.initState(); for (int i = 0; i &lt; numberOfLists; i++) { final _innerList = &lt;ColorRow&gt;[]; for (int j = 0; j &lt; numberOfItemsPerList; j++) { _innerList.add(const ColorRow()); } innerLists.add( ListView.builder( itemCount: numberOfItemsPerList, itemBuilder: (BuildContext context, int index) =&gt; _innerList[index], shrinkWrap: true, physics: const NeverScrollableScrollPhysics(), ), ); } } // After @override void initState() { super.initState(); for (int i = 0; i &lt; numLists; i++) { final _innerList = &lt;ColorRow&gt;[]; for (int j = 0; j &lt; numberOfItemsPerList; j++) { _innerList.add(const ColorRow()); } innerLists.add( SliverList( delegate: SliverChildBuilderDelegate( (BuildContext context, int index) =&gt; _innerList[index], childCount: numberOfItemsPerList, ), ), ); } } VÃ  Ä‘Ã¢y lÃ  thÃ nh quáº£ import 'package:flutter/material.dart'; import 'dart:math' as math; void main() { runApp(SliversApp()); } class SliversApp extends StatelessWidget { @override Widget build(BuildContext context) { return MaterialApp( debugShowCheckedModeBanner: false, title: 'ShrinkWrap vs Slivers', home: Scaffold( appBar: AppBar( title: const Text(\"Revenge of the Slivers\"), ), body: const ShrinkWrapSlivers(), ), ); } } class ShrinkWrapSlivers extends StatefulWidget { const ShrinkWrapSlivers({ Key? key, }) : super(key: key); @override _ShrinkWrapSliversState createState() =&gt; _ShrinkWrapSliversState(); } class _ShrinkWrapSliversState extends State&lt;ShrinkWrapSlivers&gt; { List&lt;SliverList&gt; innerLists = []; final numLists = 15; final numberOfItemsPerList = 100; @override void initState() { super.initState(); for (int i = 0; i &lt; numLists; i++) { final _innerList = &lt;ColorRow&gt;[]; for (int j = 0; j &lt; numberOfItemsPerList; j++) { _innerList.add(const ColorRow()); } innerLists.add( SliverList( delegate: SliverChildBuilderDelegate( (BuildContext context, int index) =&gt; _innerList[index], childCount: numberOfItemsPerList, ), ), ); } } @override Widget build(BuildContext context) { return CustomScrollView(slivers: innerLists); } } @immutable class ColorRow extends StatefulWidget { const ColorRow({Key? key}) : super(key: key); @override State createState() =&gt; ColorRowState(); } class ColorRowState extends State&lt;ColorRow&gt; { Color? color; @override void initState() { super.initState(); color = randomColor(); } @override Widget build(BuildContext context) { print('Building ColorRowState'); return Container( decoration: BoxDecoration( gradient: LinearGradient( begin: Alignment.topLeft, end: Alignment.bottomRight, colors: [ randomColor(), randomColor(), ], ), ), child: Row( children: &lt;Widget&gt;[ Padding( padding: const EdgeInsets.all(8.0), child: Container(height: 50, width: 50, color: Colors.white), ), Flexible( child: Column( children: const &lt;Widget&gt;[ Padding( padding: EdgeInsets.all(8), child: Text('I\\'m a widget!', style: TextStyle(color: Colors.white)), ), ], ), ), ], ), ); } } Color randomColor() =&gt; Color((math.Random().nextDouble() * 0xFFFFFF).toInt()).withOpacity(1.0); HÃ£y cháº¡y thá»­ Ä‘oáº¡n code trÃªn, báº¡n sáº½ tháº¥y ráº±ng UI sáº½ khÃ´ng cÃ²n render 100 item 1 lÃºc mÃ  chá»‰ render 1 pháº§n ráº¥t nhá». CÃ²n gÃ¬ tuyá»‡t hÆ¡n khi scroll Ä‘áº¿n cuá»‘i danh sÃ¡ch mÃ  khÃ´ng máº¥t báº¥t kÃ¬ chi phÃ­ tá»‘n kÃ©m nÃ o. Conclusion Cáº£m Æ¡n cÃ¡c báº¡n Ä‘Ã£ Ä‘á»c bÃ i viáº¿t. Happy coding ^^ References https://www.youtube.com/watch?v=LUqDNnv_dh0" }, { "title": "[Flutter] Flutter 2.5 cÃ³ gÃ¬ má»›i", "url": "/posts/flutter-2.0.5-news/", "categories": "Flutter", "tags": "dart, flutter, flutter 2.5", "date": "2021-09-18 14:15:03 +0000", "content": "Giá»›i thiá»‡u Google, gÃ£ khá»•ng lá»“ tÃ¬m kiáº¿m má»›i Ä‘Ã¢y vá»«a tung ra phiÃªn báº£n release 2.5 vá»›i 4600 closed issues vÃ  3932 merged PRs. Äi kÃ¨m vá»›i nÃ³, Dart 2.14 cÅ©ng Ä‘Æ°á»£c release cÃ¹ng thá»i Ä‘iá»ƒm. Trong bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ cÃ¹ng xem cÃ³ gÃ¬ má»›i trong láº§n release nÃ y nhÃ©. Cáº£i thiá»‡n hiá»‡u nÄƒng 1. Giáº£m má»©c Ä‘á»™ giáº­t (jank), tiÃªu thá»¥ Ã­t CPU vÃ  Ä‘iá»‡n nÄƒng hÆ¡n trÃªn IOS. Giáº­t lag khung hÃ¬nh trÆ°á»›c/sau Má»™t trong nhá»¯ng lÃ½ do gÃ¢y ra giáº­t lag bá»Ÿi bá»™ thu dá»n rÃ¡c GC (garbage collector) dá»«ng UI thread láº¡i Ä‘á»ƒ láº¥y láº¡i memory. Trong báº£n release nÃ y, viá»‡c thu há»“i bá»™ nhá»› cho cÃ¡c hÃ¬nh áº£nh khÃ´ng Ä‘Æ°á»£c sá»­ dá»¥ng má»™t cÃ¡ch nhanh chÃ³ng, lÃ m giáº£m Ä‘Ã¡ng ká»ƒ sá»± giáº­t lag GCs before and after adding the fix to eagerly reclaim unused large image memory 2. Giáº£m Ä‘á»™ trá»… khi truyá»n message giá»¯a Dart vÃ  Objective-C/Swift (iOS) hay Java/Kotlin Viá»‡c Ä‘iá»u chá»‰nh message channel, xoÃ¡ cÃ¡c báº£n sao khÃ´ng cáº§n thiáº¿t khá»i codec message lÃ m giáº£m Ä‘á»™ trá»… lÃªn Ä‘áº¿n 50% tuá»³ thuá»™c vÃ o thiáº¿t bá»‹ vÃ  kÃ­ch thÆ°á»›c message OS message latencies before and after Cáº­p nháº­t Dart 2.14 Báº£n release nÃ y Ä‘i kÃ¨m vá»›i Dart 2.14. BÃªn dÆ°á»›i lÃ  nhá»¯ng thay Ä‘á»•i, cáº­p nháº­t má»›i: Há»— trá»£ Apple Sillicon Tá»‘i Æ°u dart formatter vá»›i cascades Pub há»— trá»£ ignore file sá»­ dá»¥ng .pubignore Pub nhanh &amp; thÃ´ng minh hÆ¡n XÃ¢y dá»±ng bá»™ lint tiÃªu chuáº©n cho cÃ¡c dá»± Ã¡n Dart &amp; Flutter ThÃªm toÃ¡n tá»­ triple shift huyá»n thoáº¡i (&gt;&gt;&gt;) Má»™t sá»‘ breaking changes: Dá»«ng support ECMAScript5 Deprecated dartfmt &amp; dart2native commands Deprecated the Dart VMâ€™s Native Extensions Chi tiáº¿t hÆ¡n vá» Dart 2.14, báº¡n cÃ³ thá»ƒ theo dÃµi táº¡i Ä‘Ã¢y Cáº­p nháº­t Framework 1. Android fullscreen support Flutter Ä‘Ã£ kháº¯c phá»¥c má»™t loáº¡t cÃ¡c váº¥n Ä‘á» liÃªn quan Ä‘áº¿n cháº¿ Ä‘á»™ toÃ n mÃ n hÃ¬nh. TÃªn cá»§a cÃ¡c cháº¿ Ä‘á»™ má»›i nÃ y lÃ  má»™t trong nhá»¯ng tÃ­nh nÄƒng má»›i Ä‘Æ°á»£c yÃªu thÃ­ch: Lean back Sticky Sticky immersive Edge to edge NgoÃ i ra, cÃ²n há»— trá»£ láº¯ng ngha thay Ä‘á»•i trÃªn toÃ n hÃ¬nh trong cÃ¡c cháº¿ Ä‘á»™ khÃ¡c nhau. Normal mode (left), Edge to Edge mode (center), Edge to Edge with a custom SystemUIOverlayStyle (right) 2. Cáº­p nháº­t kÃ­ch thÆ°á»›c Floating Button Cho phÃ©p config size Floating button vá»›i 4 kÃ­ch thÆ°á»›c small, regular, large, extended. NgoÃ i ra, thÃªm tráº¡ng thÃ¡i MaterialState.scrolledUnder trong SliverAppBar SliverAppBar( backwardsCompatibility: false, elevation: 0, backgroundColor: MaterialStateColor.resolveWith((Set&lt;MaterialState&gt; states) { return states.contains(MaterialState.scrolledUnder) ? Colors.indigo : Colors.blue; }), expandedHeight: 160, pinned: true, flexibleSpace: const FlexibleSpaceBar( title: Text('SliverAppBar'), ), ), MaterialState.scrolledUnder action 3. Scroll metrics Má»™t vÃ i cáº£i tiáº¿n khÃ¡c liÃªn quan Ä‘áº¿n scroll: #85221 , 85499 thÃ´ng bÃ¡o vá» khu vá»±c cÃ³ thá»ƒ scroll ngay cáº£ khi ngÆ°á»i dÃ¹ng khÃ´ng scroll. VÃ­ dá»¥ bÃªn dÆ°á»›i cho tháº¥y thanh cuá»™n áº©n/hiá»‡n thÃ­ch há»£p dá»±a trÃªn kÃ­ch thÆ°á»›c cá»§a listview The new scroll metrics notifications enabling the scrollbar to appear and disappear automatically without scrolling 4. ScaffoldMessenger banner Náº¿u phiÃªn báº£n Flutter 2.0 cho phÃ©p hiá»ƒn thá»‹ Snackbars á»Ÿ dÆ°á»›i cÃ¹ng mÃ n hÃ¬nh cung cáº¥p thÃ´ng bÃ¡o cho ngÆ°á»i dÃ¹ng thÃ¬ á»Ÿ phiÃªn báº£n 2.5, chÃºng ta cÃ³ thÃªm banner á»Ÿ trÃªn cÃ¹ng mÃ n hÃ¬nh. class HomePage extends StatelessWidget { const HomePage({Key? key}) : super(key: key); @override Widget build(BuildContext context) =&gt; Scaffold( appBar: AppBar( title: const Text('The MaterialBanner is below'), ), body: Center( child: ElevatedButton( child: const Text('Show MaterialBanner'), onPressed: () =&gt; ScaffoldMessenger.of(context).showMaterialBanner( MaterialBanner( content: const Text('Hello, I am a Material Banner'), leading: const Icon(Icons.info), backgroundColor: Colors.yellow, actions: [ TextButton( child: const Text('Dismiss'), onPressed: () =&gt; ScaffoldMessenger.of(context) .hideCurrentMaterialBanner(), ), ], ), ), ), ), ); } Cáº­p nháº­t má»™t sá»‘ deprecated plugin &amp; feature má»›i Cáº­p nháº­t má»™t sá»‘ tÃ­nh nÄƒng má»›i cho Camera &amp; Image picker plugin NgoÃ i ra, má»™t sá»‘ package khÃ´ng cÃ²n Ä‘Æ°á»£c báº£o trÃ¬ ná»¯a nÃªn chÃºng khÃ´ng cÃ²n Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u lÃ  plugin yÃªu thÃ­ch cá»§a flutter. Náº¿u báº¡n muá»‘n sá»­ dá»¥ng cáº­p nháº­t má»›i nháº¥t, hÃ£y chuyá»ƒn sang phiÃªn báº£n plus cá»§a cÃ¡c plugin sau: Flutter Dev tools Bá»• sung má»™t sá»‘ cáº£i tiáº¿n cho phÃ©p theo dÃµi sá»± thay Ä‘á»•i frame cá»¥ thá»ƒ, giÃºp xÃ¡c Ä‘á»‹nh táº¡i sao frame bá»‹ over. Giao diá»‡n inspect trá»±c quan hÆ¡n vá»›i mÃ u tÆ°Æ¡ng á»©ng Tools Náº¿u báº¡n Ä‘Ã£ quen vá»›i counter app, á»©ng dá»¥ng tháº§n thÃ¡nh khi khá»Ÿi táº¡o 1 template flutter thÃ¬ giá» báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng 1 template má»›i vá»›i nhiá»u tÃ­nh nÄƒng vÃ  tá»•ng quan hÆ¡n. Sá»­ dá»¥ng ChangeNotifier Ä‘á»ƒ control widget Localizations vá»›i arb áº¢nh máº«u vá»›i cÃ¡c kÃ­ch thÆ°á»›c 1x, 2x, 3x tÆ°Æ¡ng á»©ng cho tá»«ng thiáº¿t bá»‹ Há»— trá»£ shared_preferences Há»— trá»£ theme sÃ¡ng/tá»‘i Há»— trá»£ navigation giá»¯a cÃ¡c trang Chi tiáº¿t báº¡n cÃ³ thá»ƒ xem á»Ÿ PRs nÃ y nhÃ© : Skeleton Template Äá»ƒ táº¡o template má»›i sá»­ dá»¥ng cÃ¢u lá»‡nh sau: $ flutter create -t skeleton my_app Pigeon Náº¿u báº¡n Ä‘ang phÃ¡t triá»ƒn 1 plugin, cÃ³ thá»ƒ báº¡n sáº½ quan tÃ¢m Ä‘áº¿n phiÃªn báº£n phÃ¡t hÃ nh 1.0 Pigeon. Pigeon lÃ  má»™t tool codegen Ä‘á»ƒ xÃ¢y dá»±ng code tÆ°Æ¡ng tÃ¡c an toÃ n giá»¯a Flutter vÃ  ná»n táº£ng mÃ¡y chá»§ cá»§a nÃ³. NÃ³ cho phÃ©p báº¡n Ä‘á»‹nh nghÄ©a API vÃ  generate skeleton code cho Dart, Java/Kotlin, Objective-C/Swift Breaking changes &amp; deprecations BÃªn dÆ°á»›i lÃ  má»™t sá»‘ breaking changes trong phiÃªn báº£n 2.5 Default drag scrolling devices Deprecated API removed after v2.2 Introducing package:flutter_lints ThemeDataâ€™s accent properties have been deprecated GestureRecognizer Cleanup Replace AnimationSheetBuilder.display with collate Using HTML slots to render platform views in the web Migrate LogicalKeySet to SingleActivator Äá»ƒ xem Ä‘áº§y Ä‘á»§ nhá»¯ng thay Ä‘á»•i, truy cáº­p trang chá»§ Ä‘á»ƒ biáº¿t thÃªm chi tiáº¿t nhÃ©: flutter.dev Tá»•ng káº¿t ChÃºc cÃ¡c báº¡n coding vui váº»! Tham kháº£o https://medium.com/flutter/whats-new-in-flutter-2-5-6f080c3f3dc https://medium.com/dartlang/announcing-dart-2-14-b48b9bb2fb67" }, { "title": "[Flutter] Key trong Flutter", "url": "/posts/key-trong-flutter/", "categories": "Flutter", "tags": "dart, flutter, key, localkey, uniqueKey", "date": "2021-06-06 14:15:03 +0000", "content": "Giá»›i thiá»‡u Key Ä‘Æ°á»£c nhÃ¬n tháº¥y á»Ÿ háº§u háº¿t cÃ¡c phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o widget. NhÆ°ng viá»‡c sá»­ dá»¥ng chÃºng khÃ´ng Ä‘Æ°á»£c phá»• biáº¿n láº¯m. Trong bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ cÃ¹ng tÃ¬m hiá»ƒu xem key lÃ  gÃ¬, cÃ³ nhá»¯ng loáº¡i nÃ o, cÃ¡ch dÃ¹ng cá»§a chÃºng ra sao vÃ  khi nÃ o thÃ¬ sá»­ dá»¥ng Key nhÃ©. Key lÃ  gÃ¬ ? Key lÃ  má»™t Ä‘á»‘i tÆ°á»£ng Ä‘á»‹nh danh, nÃ³ dÃ¹ng Ä‘á»ƒ duy trÃ¬ tráº¡ng thÃ¡i cá»§a Widget khi cÃ¡c Widget di chuyá»ƒn vá»‹ trÃ­ trong Widget Tree. CÃ³ nhá»¯ng loáº¡i Key nÃ o ? Key cÃ³ 2 subclass lÃ  LocalKey vÃ  GlobalKey. Trong Ä‘Ã³ LocalKey cÃ³ 3 loáº¡i lÃ  ValueKey, ObjectKey, UniqueKey ValueKey Giáº£ sá»­ báº¡n Ä‘ang xÃ¢y dá»±ng á»©ng dá»¥ng ToDo App, má»—i ToDo item Ä‘á»u cÃ³ 1 ID duy nháº¥t Ä‘á»ƒ phÃ¢n biá»‡t giá»¯a cÃ¡c item. Trong trÆ°á»ng há»£p nÃ y, báº¡n nÃªn sá»­ dá»¥ng ValueKey. NÃ³ sáº½ giÃºp cho viá»‡c thÃªm, xoÃ¡, sá»­a 1 ToDo báº¥t ká»³ nhanh hÆ¡n, Ä‘áº·c biá»‡t lÃ  vá»›i xoÃ¡. ObjectKey Giáº£ sá»­ ráº±ng má»—i widget con lÆ°u má»™t táº­p dá»¯ liá»‡u phá»©c táº¡p, cháº³ng háº¡n nhÆ° má»™t á»©ng dá»¥ng lÆ°u trá»¯ sá»• Ä‘á»‹a chá»‰ cho thÃ´ng tin ngÆ°á»i dÃ¹ng. Báº¥t ká»³ trÆ°á»ng thÃ´ng tin nÃ o, cháº³ng háº¡n nhÆ° tÃªn hoáº·c ngÃ y sinh, cÃ³ thá»ƒ giá»‘ng vá»›i má»™t ngÆ°á»i khÃ¡c, nhÆ°ng má»—i má»™t táº­p dá»¯ liá»‡u lÃ  duy nháº¥t. Trong nhá»¯ng trÆ°á»ng há»£p nÃ y ObjectKey lÃ  phÃ¹ há»£p nháº¥t. UniqueKey Náº¿u cÃ³ nhiá»u widget cÃ³ cÃ¹ng loáº¡i hoáº·c náº¿u báº¡n cáº§n Ä‘áº£m báº£o ráº±ng widget con khÃ´ng giá»‘ng vá»›i cÃ¡c widget khÃ¡c, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng UniqueKey. ChÃºng ta Ä‘Ã£ sá»­ dá»¥ng nÃ³ trong vÃ­ dá»¥ trÃªn. UniqueKey. Má»™t Ä‘iá»u cáº§n chÃº Ã½ ráº±ng hÃ£y cÃ¢n nháº¯c viá»‡c sá»­ dá»¥ng UniqueKey khi cÃ³ nhá»¯ng action nhÆ° di chuyá»ƒn, sá»­a Ä‘á»•i item chá»©a nhiá»u logic hay animation náº·ng bá»Ÿi má»—i khi cÃ³ thay Ä‘á»•i, state sáº½ bá»‹ reset Ä‘á»“ng nghÄ©a vá»›i viá»‡c widget sáº½ bá»‹ rebuild láº¡i. GlobalKey ChÃºng cho phÃ©p cÃ¡c Widget thay Ä‘á»•i parent cá»§a chÃºng á»Ÿ báº¥t ká»³ vá»‹ trÃ­ nÃ o trong á»©ng dá»¥ng mÃ  khÃ´ng bá»‹ máº¥t state hoáº·c chÃºng cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ truy cáº­p dá»¯ liá»‡u Ä‘á»ƒ láº¥y thÃ´ng tin cá»§a má»™t Widget báº¥t ká»³. Trong trÆ°á»ng há»£p thá»© hai, báº¡n cÃ³ thá»ƒ cáº§n kiá»ƒm tra máº­t kháº©u, tuy nhiÃªn báº¡n khÃ´ng muá»‘n chia sáº» status data vá»›i cÃ¡c widget khÃ¡c nhau trong cÃ¢y vÃ  báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng GlobalKey, nÃ³ náº¯m giá»¯ State cá»§a Form. Vá» cÆ¡ báº£n, GlobalKey giá»‘ng nhÆ° má»™t biáº¿n toÃ n cá»¥c váº­y. CÃ³ nhá»¯ng cÃ¡ch khÃ¡c tá»‘t hÆ¡n Ä‘á»ƒ hoÃ n thÃ nh cÃ´ng viá»‡c cá»§a GlobalKey, cháº³ng háº¡n nhÆ° inherited widget, Redux, or block pattern. Khi nÃ o nÃªn dÃ¹ng Key ? LÃ½ thuyáº¿t xuÃ´ng thÃ¬ khÃ³ hiá»ƒu, giá» mÃ¬nh cÃ¹ng Ä‘i vÃ o 1 vÃ i vÃ­ dá»¥ nhÃ©. Trong vÃ­ dá»¥ dÆ°á»›i Ä‘Ã¢y, mÃ¬nh sáº½ cÃ¹ng hoÃ¡n Ä‘á»•i vá»‹ trÃ­ 2 Widget cÃ³ 2 mÃ u sáº¯c khÃ¡c nhau. MÃ u sáº¯c cá»§a má»—i widget lÃ  Random nha. Swap 2 StatelessWidget ??? class Tile extends StatelessWidget { final Color color = generateRandomColor(); // má»—i object sáº½ cÃ³ 1 random Color khÃ´ng thá»ƒ thay Ä‘á»•i @override Widget build(BuildContext context) { // táº¡m hiá»ƒu Container nhÆ° cÃ¡i thÃ¹ng cÃ³ mÃ u sáº¯c, kÃ­ch thÆ°á»›c =&gt; khÃ¡ giá»‘ng viÃªn gáº¡ch =)) return Container( color: color, width: 100, height: 100, ); } } // hÃ m táº¡o ra má»™t Color báº¥t ká»³ Color generateRandomColor() { // biáº¿n random sáº½ giÃºp ta táº¡o ra 1 sá»‘ ngáº«u nhiÃªn final Random random = Random(); // MÃ u sáº¯c Ä‘Æ°á»£c táº¡o nÃªn tá»« RGB, lÃ  má»™t sá»‘ ngáº«u nhiÃªn tá»« 0 -&gt; 255 vÃ  opacity = 1 return Color.fromRGBO(random.nextInt(255), random.nextInt(255), random.nextInt(255), 1); } class _MyHomePageState extends State&lt;MyHomePage&gt; { var listTile = &lt;Widget&gt;[Tile(), Tile()]; // táº¡o 1 list lÆ°u trá»¯ 2 Widget @override Widget build(BuildContext context) { return Scaffold( body: Center( child: Row( children: listTile, // Row nháº­n má»™t list Widget nÃªn mÃ¬nh truyá»n listTile vÃ o ), ), floatingActionButton: FloatingActionButton( onPressed: swapTwoTileWidget, // thá»±c hiá»‡n hoÃ¡n Ä‘á»•i vá»‹ trÃ­ 2 Widget trong listTile child: Icon(Icons.swap_horiz), ), ); } // hÃ m thá»±c hiá»‡n hoÃ¡n Ä‘á»•i 2 Widget trong listTile void swapTwoTileWidget() { setState(() { listTile.insert(1, listTile.removeAt(0)); }); } } Ok, sau khi click swap, thÃ¬ vá»‹ trÃ­ cá»§a 2 Widget Ä‘Æ°á»£c thay Ä‘á»•i Ä‘Ãºng nhÆ° nhá»¯ng gÃ¬ ta mong muá»‘n. 1 lÆ°u Ã½ Ä‘Æ°á»£c cÃ¡c nhÃ  phÃ¡t triá»ƒn Flutter cÃ³ Ä‘á» cáº­p Ä‘áº¿n Key: Remember, if the entire widget subtree in your collection is stateless, keys aren't needed. CÃ³ thá»ƒ hiá»ƒu ráº±ng Key sáº½ khÃ´ng cáº§n thiáº¿t náº¿u nhÆ° cÃ¡c widget subtree lÃ  cÃ¡c StatelessWidget Swap 2 StatefulWidget ??? Ok, hÃ£y quay láº¡i class Tile vÃ  convert nÃ³ thÃ nh StatefulWidget thay vÃ¬ StatelessWidget. class Tile extends StatefulWidget { @override State&lt;Tile&gt; createState() =&gt; _TileState(); } class _TileState extends State&lt;Tile&gt; { final Color color = generateRandomColor(); @override Widget build(BuildContext context) { // táº¡m hiá»ƒu Container nhÆ° cÃ¡i thÃ¹ng cÃ³ mÃ u sáº¯c, kÃ­ch thÆ°á»›c =&gt; khÃ¡ giá»‘ng viÃªn gáº¡ch =)) return Container( color: color, width: 100, height: 100, ); } } // hÃ m táº¡o ra má»™t Color báº¥t ká»³ Color generateRandomColor() { // biáº¿n random sáº½ giÃºp ta táº¡o ra 1 sá»‘ ngáº«u nhiÃªn final Random random = Random(); // MÃ u sáº¯c Ä‘Æ°á»£c táº¡o nÃªn tá»« RGB, lÃ  má»™t sá»‘ ngáº«u nhiÃªn tá»« 0 -&gt; 255 vÃ  opacity = 1 return Color.fromRGBO(random.nextInt(255), random.nextInt(255), random.nextInt(255), 1); } Giá» hÃ£y click button swap xemâ€¦click mÃ£i mÃ  khÃ´ng tháº¥y cÃ³ gÃ¬ xáº£y ra pháº£i khÃ´ng :D nÃ o thÃ¬ giá» fixbug thÃ´i. Trong constructor cá»§a Tile, hÃ£y truyá»n thÃªm tham sá»‘ Key vÃ o nhÆ° sau: Tile({Key key}) : super(key: key); Giá» hÃ£y táº¡o ra 1 UniqueKey rá»“i gáº¯n vÃ o nhÃ©. var listTile = &lt;Widget&gt;[Tile(key: UniqueKey()), Tile(key: UniqueKey())]; // UniqueKey() táº¡o ra 1 key Ok, giá» thÃ¬ swap láº¡i hoáº¡t Ä‘á»™ng trá»Ÿ láº¡i rá»“i Ä‘Ã³ :D Náº¿u Widget Ä‘Æ°á»£c khai bÃ¡o Key thÃ¬ Element khÃ´ng chá»‰ so sÃ¡nh Widget Type mÃ  cÃ²n so sÃ¡nh cáº£ Key cá»§a widget cÅ© mÃ  nÃ³ Ä‘ang giá»¯ tham chiáº¿u vÃ  widget má»›i HÃ£y cÃ¹ng lÃ m má»™t vÃ­ dá»¥ tiáº¿p ná»‘i vÃ­ dá»¥ trÃªn nhÃ©. Váº«n sá»­ dá»¥ng Tile lÃ  statefulWidget, giá» hÃ£y wrap Tile vÃ o 1 tháº±ng Padding xem sao var listTile = &lt;Widget&gt;[ Padding( padding: const EdgeInsets.all(8.0), child: Tile(key: UniqueKey()), ), Padding( padding: const EdgeInsets.all(8.0), child: Tile(key: UniqueKey()), ) ]; =&gt; Giá» rebuild láº¡i app vÃ  thá»­ click button Swap, má»™t Ä‘iá»u kÃ¬ diá»‡u xáº£y ra lÃ  má»—i láº§n click thÃ¬ mÃ u cá»§a 2 Ã´ vuÃ´ng láº¡i thay Ä‘á»•i, áº£o ma canada =)) MÃ u cá»§a widget thay Ä‘á»•i liÃªn tá»¥c Ä‘á»“ng nghÄ©a vá»›i viá»‡c State cá»§a Widget Ä‘Ã³ bá»‹ khá»Ÿi táº¡o láº¡i, createState() Ä‘Æ°á»£c gá»i vÃ  1 mÃ u má»›i Ä‘Æ°á»£c sinh ra. LÃ½ do bá»Ÿi khi Local Key, thÃ¬ quÃ¡ trÃ¬nh matching up widget to elements chá»‰ diá»…n ra trong cÃ¹ng má»™t level cá»¥ thá»ƒ trÃªn há»‡ thá»‘ng tree, á»Ÿ Ä‘Ã¢y lÃ  2 Padding view. Element bá»‹ deactive mÃ  khÃ´ng tÃ¬m Ä‘Æ°á»£c widget Ä‘á»ƒ connect thÃ¬ nÃ³ sáº½ bá»‹ dispose. =&gt; LocalKey chá»‰ nÃªn Ä‘Æ°á»£c Ä‘áº·t á»Ÿ cÃ¡c Widget lÃ  top level, level cao nháº¥t trong list children cá»§a má»™t Row hoáº·c má»™t Column. Trong 1 row, cÃ¡c widget con Ä‘á»u cÃ³ cÃ¹ng má»™t level, Flutter sáº½ tÃ¬m Ä‘Æ°á»£c. Giá» cÃ¡ch fix Ä‘Æ¡n giáº£n hÆ¡n rá»“i pháº£i khÃ´ng, move key á»Ÿ tháº±ng Tile chuyá»ƒn lÃªn tháº±ng Padding: var listTile = &lt;Widget&gt;[ Padding( key: UniqueKey(), // Ä‘Æ°a key tá»« Tile lÃªn Padding padding: const EdgeInsets.all(8.0), child: Tile(), ), Padding( key: UniqueKey(), // Ä‘Æ°a key tá»« Tile lÃªn Padding padding: const EdgeInsets.all(8.0), child: Tile(), ) ]; Tá»•ng káº¿t Hi vá»ng qua bÃ i viáº¿t nÃ y báº¡n cÃ³ thá»ƒ hiá»ƒu Ä‘Æ°á»£c cÆ¡ báº£n vÃ  cÃ¡ch dÃ¹ng cá»§a Key. Happy coding :D https://medium.com/flutter/keys-what-are-they-good-for-13cb51742e7d https://app.slack.com/client/TBFDUP13L/C01CUJW4H18" }, { "title": "[Flutter] Dartâ€™s null safety Ä‘Ã£ tá»‘i Æ°u á»©ng dá»¥ng cá»§a tÃ´i nhÆ° nÃ o ?", "url": "/posts/how-nulll-safety-help-me/", "categories": "Flutter", "tags": "dart, flutter, null-safety", "date": "2021-06-06 14:15:03 +0000", "content": "Giá»›i thiá»‡u ChÃ o má»i ngÆ°á»i ! HÃ´m nay mÃ¬nh cÃ³ Ä‘á»c Ä‘Æ°á»£c 1 bÃ i viáº¿t cá»§a má»™t anh hiá»‡n Ä‘ang lÃ  Google Developer Expert máº£ng Flutter. BÃ i viáº¿t chia sáº» vá» cÃ¡ch mÃ  null safety Ä‘Ã£ tá»‘i Æ°u nhá»¯ng dá»± Ã¡n nhÆ° tháº¿ nÃ o. HÃ£y cÃ¹ng tÃ¬m hiá»ƒu nhÃ©. Náº¿u báº¡n chÆ°a biáº¿t Ä‘áº¿n tÃ­nh nÄƒng null-safety nÃ y cá»§a Flutter, hÃ£y tÃ¬m hiá»ƒu trÆ°á»›c á»Ÿ Ä‘Ã¢y nhÃ©. BÃ i viáº¿t nÃ y bao gá»“m 2 chá»§ Ä‘á» chÃ­nh Migrate á»©ng dá»¥ng vÃ  cÃ¡c package lÃªn null-safety Thay Ä‘á»•i cÃ¡ch code theo null-safety nhÆ° nÃ o Migrating á»©ng dá»¥ng vÃ  cÃ¡c package Láº§n Ä‘áº§u nÃ¢ng cáº¥p Flutter lÃªn phiÃªn báº£n 2.0 (phiÃªn báº£n há»— trá»£ Null Safety) vÃ  cáº­p nháº­t phiÃªn báº£n dart SDK lÃªn 2.12 trong tá»‡p pubspec.yaml cá»§a á»©ng dá»¥ng Flutter, IDE Ä‘Ã£ cáº£nh bÃ¡o tÃ´i cÃ³ ráº¥t nhiá»u lá»—i trong project. Ban Ä‘áº§u, tÃ´i muá»‘n thá»­ lÃ m thá»§ cÃ´ng báº±ng cÃ¡ch thÃªm ? vÃ  ! cho nhá»¯ng pháº§n code cá»§a mÃ¬nh mÃ  khÃ´ng cáº§n cÃ´ng cá»¥ gÃ¬ Ä‘á»ƒ migrate cáº£. TÃ´i cá»‘ Ã½ thá»±c hiá»‡n cÃ´ng viá»‡c nÃ y Ä‘á»ƒ Ä‘á»ƒ hiá»ƒu Ä‘Æ°á»£c nhá»¯ng khÃ³ khÄƒn mÃ  Flutter team Ä‘Ã£ lÃ m Ä‘á»ƒ táº¡o ra cÃ¡i migration tool nÃ y. NÃ³ giÃºp báº¡n chuyá»ƒn Ä‘á»•i dá»± Ã¡n cá»§a mÃ¬nh qua null-safety. Cuá»‘i cÃ¹ng, tÃ´i quyáº¿t Ä‘á»‹nh sá»­ dá»¥ng cÃ´ng cá»¥ tuyá»‡t vá»i nÃ y Ä‘á»ƒ hoÃ n thÃ nh quÃ¡ trÃ¬nh migrate cho á»©ng dá»¥ng cá»§a mÃ¬nh. á»¨ng dá»¥ng nÃ y lÃ  á»©ng dá»¥ng thá»‘ng kÃª cÃ¡c thÃ´ng sá»‘ cÃ³ liÃªn quan Ä‘áº¿n COVID-19 vÃ  nÃ³ hoÃ n toÃ n open source. Báº¡n cÃ³ thá»ƒ tÃ¬m tháº¥y nÃ³ trÃªn GitHub, mÃ¬nh Ä‘á»ƒ link á»Ÿ cuá»‘i bÃ i viáº¿t. Thá»±c sá»± thÃº vá»‹ khi tháº¥y táº¥t cáº£ cÃ¡c code thay Ä‘á»•i mÃ  cÃ´ng cá»¥ chuyá»ƒn Ä‘á»•i (migration tool) thá»±c hiá»‡n trong dá»± Ã¡n cá»§a tÃ´i - nhá»¯ng code thay Ä‘á»•i nhÆ° thÃªm ? trong giÃ¡ trá»‹ Null (Nullable) vÃ  thÃªm ! khi cÃ´ng cá»¥ phÃ¡t hiá»‡n ra ráº±ng giÃ¡ trá»‹ sáº½ khÃ´ng bao giá» lÃ  giÃ¡ trá»‹ rá»—ng. Sau Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ vá» cÃ´ng cá»¥ di chuyá»ƒn tá»± Ä‘á»™ng thÃªm ? vÃ  !. _homeCountry lÃ  thuá»™c tÃ­nh Nullable cá»§a má»™t lá»›p cÃ³ tÃªn HomeCountry (cÅ©ng cÃ³ thá»ƒ nullable). Do Ä‘Ã³, Ä‘á»ƒ báº£o vá»‡ quyá»n truy cáº­p vÃ o má»™t trong cÃ¡c thuá»™c tÃ­nh cá»§a _homeCountry (náº¿u class HomeCountry null thÃ¬ bÃ¬nh thÆ°á»ng náº¿u ta truy cáº­p Ä‘áº¿n biáº¿n _homeCountry cÃ³ thá»ƒ gÃ¢y crash á»©ng dá»¥ng), cÃ´ng cá»¥ Ä‘Ã£ thÃªm toÃ¡n tá»­ ?.â€Œâ€Œ Sau khi thá»±c hiá»‡n viá»‡c migrate, má»™t sá»‘ váº¥n Ä‘á» trong code Ä‘Ã£ báº¯t Ä‘áº§u xuáº¥t hiá»‡n vÃ  rÃµ rÃ ng hÆ¡n, Ä‘Ã¢y lÃ  pháº§n tuyá»‡t nháº¥t nÃ y. Má»™t trong nhá»¯ng váº¥n Ä‘á» xuáº¥t hiá»‡n Ä‘Ã³ lÃ  má»™t sá»‘ chuá»—i string nullable Ä‘ang Ä‘Æ°á»£c truyá»n dÆ°á»›i dáº¡ng danh sÃ¡ch trong plugin shared_preferences. Bá»Ÿi vÃ¬ cÃ¡c giÃ¡ trá»‹ nÃ y cÃ³ thá»ƒ lÃ  Nullable, cÃ´ng cá»¥ Ä‘Ã£ táº¡o toÃ n bá»™ danh sÃ¡ch kiá»ƒu &lt;String?&gt;[], lá»—i xuáº¥t hiá»‡n vÃ¬ nÃ³ chá»‰ cháº¥p nháº­n kiá»ƒu []. Giáº£i phÃ¡p Ä‘Æ¡n giáº£n lÃ  loáº¡i bá» ? Ä‘á»ƒ kiá»ƒu dá»¯ liá»‡u truyá»n vÃ o trÃ¹ng vá»›i dá»¯ liá»‡u mong muá»‘n. Sau khi tÃ´i thá»±c hiá»‡n Ä‘iá»u nÃ y, bá»™ phÃ¢n tÃ­ch láº¡i show ra má»™t lá»—i khÃ¡c lÃ  nullable type (String?) canâ€™t be assigned to a non-nullable type (String) Äá»ƒ giáº£i quyáº¿t váº¥n Ä‘á», tÃ´i Ä‘á»ƒ cÃ¡c thuá»™c tÃ­nh cá»§a class HomeCountry thÃ nh non-nullable vÃ  thÃªm keyword required vÃ o. Äiá»u nÃ y Ä‘á»“ng nghÄ©a ráº±ng cÃ¡c giÃ¡ trá»‹ Ä‘Ã³ luÃ´n Ä‘Æ°á»£c khá»Ÿi táº¡o Äiá»u nÃ y giÃºp tÃ´i khÃ´ng bá»‹ máº¯c sai láº§m khi truyá»n cÃ¡c giÃ¡ trá»‹ null tá»›i shared preferences, Ä‘iá»u nÃ y tháº­t tuyá»‡t. Má»™t issue khÃ¡c mÃ  null-safety giÃºp báº¡n trÃ¡nh bá»‹ crash khi Ä‘ang sá»­ dá»¥ng á»©ng dá»¥ng. HÃ£y xem vÃ­ dá»¥ bÃªn dÆ°á»›i: Bá»Ÿi vÃ¬ list cÃ³ thá»ƒ bá»‹ null vÃ¬ váº­y viá»‡c Ä‘á»c giÃ¡ trá»‹ cá»§a cÃ¡c pháº§n tá»­ dá»±a trÃªn chá»‰ sá»‘ cá»§a nÃ³ cÃ³ thá»ƒ dáº«n tá»›i crash. Sau khi migrate á»©ng dá»¥ng sang null-safety, báº¡n sáº½ khÃ´ng biÃªn dá»‹ch Ä‘Æ°á»£c á»©ng dá»¥ng ná»¯a bá»Ÿi chÆ°a check null cho cÃ¡c giÃ¡ trá»‹ nÃ y. Ok, sau khi check null cho list thÃ¬ Ä‘Ã£ compile Ä‘Æ°á»£c rá»“i. Tháº­t ngáº¡c nhiÃªn khi viá»‡c migrate Ä‘Ã£ giÃºp tÃ´i tÃ¬m ra má»™t lá»—i thá»±c sá»±! TÃ´i cÅ©ng Ä‘Ã£ thá»±c hiá»‡n viá»‡c migrate cho má»™t package ráº¥t nhá», báº¡n cÃ³ thá»ƒ tÃ¬m tháº¥y package nÃ y trÃªn pub.dev, Ä‘Æ°á»£c gá»i lÃ  progress_indicators. TÃ´i Ä‘Ã£ ráº¥t ngáº¡c nhiÃªn khi tháº¥y cÃ¡ch cÃ´ng cá»¥ migrate thÃªm cÃ¡c keyword late thay vÃ¬ ? khi nÃ³ káº¿t luáº­n ráº±ng cÃ¡c biáº¿n Ä‘Ã³ Ä‘Ã£ Ä‘Æ°á»£c khá»Ÿi táº¡o trÆ°á»›c khi Ä‘Æ°á»£c sá»­ dá»¥ng. Viáº¿t code nhÆ° nÃ o khi sá»­ dá»¥ng null-safety ? Giá» Ä‘Ã¢y, Flutter Ä‘Ã£ cÃ³ Null Safety, viá»‡c táº¡o á»©ng dá»¥ng má»›i lÃ  tráº£i nghiá»‡m tá»‘t hÆ¡n cho láº­p trÃ¬nh viÃªn. Viáº¿t code má»›i trong mÃ´i trÆ°á»ng null-safe cÅ©ng giÃºp hiá»ƒu rÃµ hÆ¡n vá» cÃ¡c flow code, cÃ¹ng vá»›i viá»‡c cÃ³ thá»ƒ viáº¿t mÃ£ crash-safe. Äoáº¡n code dÆ°á»›i Ä‘Ã¢y sáº½ khÃ´ng thá»ƒ biÃªn dá»‹ch Ä‘Æ°á»£c: class MyClass { String a; MyClass({this.a}); } Äoáº¡n code nÃ y gÃ¢y ra lá»—i compile ngay bá»Ÿi biáº¿n a Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u lÃ  má»™t biáº¿n nullable, Ä‘áº·t thÃªm tá»« khÃ³a required trong hÃ m khá»Ÿi táº¡o hoáº·c set giÃ¡ trá»‹ default trong lÃºc khá»Ÿi táº¡o. LÃºc nÃ y, Ä‘oáº¡n code mÃ  báº¡n viáº¿t ra Ä‘áº£m báº£o ráº±ng biáº¿n a khÃ´ng bao giá» null. VÃ¬ váº­y, tÃ¹y thuá»™c vÃ o trÆ°á»ng há»£p sá»­ dá»¥ng cá»§a báº¡n, báº¡n cÃ³ thá»ƒ thá»±c hiá»‡n Ä‘iá»u nÃ y: class MyClass { String? a; MyClass({this.a}); } hoáº·c nhÆ° nÃ y class MyClass { String a; MyClass({required this.a}); } hoáº·c nhÆ° nÃ y class MyClass { String a; MyClass({this.a = ''}); } ChÃº Ã½ ráº±ng Ä‘á»«ng thÃªm @ vÃ o trÆ°á»›c keyword required, vÃ¬ nÃ³ khÃ´ng cÃ³ tÃ¡c dá»¥ng tá»« Flutter2 (vÃ  Dart 2.12) Báº¡n cÃ³ thá»ƒ táº¡o cÃ¡c class nullable tuá»³ theo má»¥c Ä‘Ã­ch sá»­ dá»¥ng class MyClass { String? a; MyClass({this.a}); } // somewhere in main code MyClass? myClass; Bá»Ÿi vÃ¬ myClass cÃ³ kiá»ƒu nullable, vÃ¬ váº­y compiler sáº½ bÃ¡o lá»—i náº¿u báº¡n viáº¿t nhÆ° sau: print(myClass.a); The property â€˜aâ€™ canâ€™t be unconditionally accessed because the receiver can be â€˜nullâ€™ Äá»ƒ sá»­a lá»—i nÃ y, chá»‰ cáº§n thÃªm ? trÆ°á»›c khi truy cáº­p Ä‘áº£m báº£o nÃ³ an toÃ n. print(myClass?.a); TÃ³m láº¡i, Sound null safety cá»§a Dart lÃ  bÆ°á»›c khá»Ÿi Ä‘áº§u Ä‘Ã¡ng tin cáº­y Ä‘á»ƒ xÃ¢y dá»±ng cÃ¡c á»©ng dá»¥ng an toÃ n hÆ¡n, nhanh hÆ¡n vÃ  Ä‘Ã¡ng tin cáº­y hÆ¡n! TÃ´i khuyÃªn báº¡n nÃªn migrate cÃ¡c á»©ng dá»¥ng Dart cÅ© cá»§a mÃ¬nh sang null safety Ä‘á»ƒ hiá»ƒu cÃ¡ch hoáº¡t Ä‘á»™ng cá»§a nÃ³. CÃ³ thá»ƒ báº¡n sáº½ Ä‘á»§ may máº¯n Ä‘á»ƒ tÃ¬m vÃ  sá»­a má»™t sá»‘ lá»—i trong mÃ£ cá»§a mÃ¬nh! ChÃºc cÃ¡c báº¡n coding vui váº» :D Tham kháº£o https://github.com/wal33d006/novel_covid_19 How Dartâ€™s null safety helped me augment my projects" }, { "title": "[Flutter] Effective Dart (Part II)", "url": "/posts/flutter-effective-dart-p2/", "categories": "Flutter", "tags": "flutter, dart", "date": "2020-12-26 14:15:03 +0000", "content": "Tiáº¿p tá»¥c pháº§n trÆ°á»›c, hÃ´m nay mÃ¬nh sáº½ chia sáº» 2 chá»§ Ä‘á» cÃ²n láº¡i lÃ  Usage Guide vÃ  Design Guide. Usage Guide â€“ LÃ m cÃ¡ch nÃ o Ä‘á»ƒ implement 1 Ä‘oáº¡n mÃ£ sá»­ dá»¥ng cÃ¡c statement hay expression há»£p lÃ½â€¦ Design Guide â€“ ÄÃ¢y lÃ  pháº§n nhá» nhÆ°ng scope rá»™ng nháº¥t. CÃ¡ch khai bÃ¡o, thiáº¿t káº¿ consistent, usable APIs 3. USAGE GUIDE LÃ m cÃ¡ch nÃ o Ä‘á»ƒ implement 1 Ä‘oáº¡n mÃ£ sá»­ dá»¥ng cÃ¡c statement hay expression há»£p lÃ½â€¦ 3.1.1 DO use collection literals when possible. Dart cÃ³ 3 kiá»ƒu collection chÃ­nh : List, Map, Set. NÃªn khá»Ÿi táº¡o nhÆ° sau: GOOD var points = &lt;Point&gt;[]; var addresses = &lt;String, Address&gt;{}; var counts = &lt;int&gt;{}; BAD var points = List&lt;Point&gt;(); var addresses = Map&lt;String, Address&gt;(); var counts = Set&lt;int&gt;(); 3.1.2 DONâ€™T use List.from() unless you intend to change the type of the result. KhÃ´ng nÃªn sá»­ dá»¥ng List.from() trá»« khi báº¡n muá»‘n thay Ä‘á»•i kiá»ƒu cá»§a káº¿t quáº£ tráº£ vá». VÃ­ dá»¥, cÃ³ 1 iterable, cÃ³ 2 cÃ¡ch Ä‘á»ƒ táº¡o ra 1 list má»›i chá»©a cÃ¡c pháº§n tá»­ tÆ°Æ¡ng tá»± var copy1 = iterable.toList(); var copy2 = List.from(iterable); ~~ Dá»… tháº¥y, cÃ¡ch copy1 ngáº¯n hÆ¡n. vÃ  quan trá»ng hÆ¡n lÃ  cÃ¡ch 1 giá»¯ láº¡i Ä‘Æ°á»£c kiá»ƒu (type) cá»§a Ä‘á»‘i tÆ°á»£ng gá»‘c ~~~dart // Creates a List&lt;int&gt;: var iterable = [1, 2, 3]; // Prints \"List&lt;int&gt;\": print(iterable.toList().runtimeType); /// WITH // Creates a List&lt;int&gt;: var iterable = [1, 2, 3]; // Prints \"List&lt;dynamic&gt;\": print(List.from(iterable).runtimeType); CÃ²n náº¿u muá»‘n thay Ä‘á»•i kiá»ƒu, sá»­ dá»¥ng List.from() sáº½ há»£p lÃ½ vá»›i trÆ°á»ng há»£p sau: var numbers = [1, 2.3, 4]; // List&lt;num&gt;. numbers.removeAt(1); // Now it only contains integers. var ints = List&lt;int&gt;.from(numbers); 3.1.3 DO use whereType() to filter a collection by type. Sá»­ dá»¥ng whereType Ä‘á»ƒ lá»c collection theo kiá»ƒu xÃ¡c Ä‘á»‹nh GOOD var objects = [1, 'a', 2, 'b', 3]; var ints = objects.whereType&lt;int&gt;(); BAD var objects = [1, 'a', 2, 'b', 3]; var ints = objects.where((e) =&gt; e is int); 3.2.1 Prefer function declarations over variables Trong Dart, tháº­m chÃ­ cÃ¡c functions cÅ©ng lÃ  object. BÃªn dÆ°á»›i lÃ  1 sá»‘ cÃ¡ch sá»­ dá»¥ng liÃªn quan Ä‘áº¿n function Dart cho phÃ©p khai bÃ¡o local functions. GOOD void main() { localFunction() { ... } } BAD void main() { var localFunction = () { ... }; } 3.2.2 DO remove unnecessary lambdas Náº¿u function invoke method vá»›i cÃ¹ng argument truyá»n vÃ o thÃ¬ khÃ´ng cáº§n wrap nÃ³ láº¡i vá»›i lambdas GOOD names.forEach(print); BAD names.forEach((name) { print(name); }); 3.2.3 DO use = to separate a named parameter from its default value. Dart há»— trá»£ gÃ¡n default value báº±ng cáº£ 2 cÃ¡ch â€œ=â€ vÃ  â€œ:â€. = Äá»ƒ nháº¥t quÃ¡n, sá»­ dá»¥ng â€œ=â€ Ä‘á»ƒ set default value cho named params thay vÃ¬ â€œ:â€ void insert(Object item, {int at = 0}) { ... } 3.3.1 DO follow a consistent rule for var and final on local variables. TuÃ¢n theo cÃ¡c quy táº¯c sau khi sá»­ dá»¥ng var vÃ  final Sá»­ dá»¥ng final cho biáº¿n khÃ´ng Ä‘Æ°á»£c assign láº¡i giÃ¡ trá»‹ vÃ  var cho biáº¿n Ä‘Æ°á»£c assign láº¡i giÃ¡ trá»‹ 3.3.2 AVOID storing what you can calculate. KhÃ´ng lÆ°u láº¡i cÃ¡c giÃ¡ trá»‹ cÃ³ thá»ƒ tÃ­nh toÃ¡n. BÃªn dÆ°á»›i lÃ  1 vÃ­ dá»¥ vá» sai láº§m nÃ yâ€¦ BAD class Circle { double radius; double area; double circumference; Circle(double radius) : radius = radius, area = pi * radius * radius, circumference = pi * 2.0 * radius; } Thá»© nháº¥t, tá»‘n tÃ i nguyÃªn, memory. Thá»© hai, area vÃ  circumference lÃ  2 giÃ¡ trá»‹ cÃ³ thá»ƒ tá»± tÃ­nh toÃ¡n Ä‘Æ°á»£c mÃ  khÃ´ng cáº§n pháº£i lÆ°u láº¡i. Thá»© ba, radius trong trÆ°á»ng há»£p nÃ y lÃ  mutable, náº¿u thay Ä‘á»•i giÃ¡ trá»‹ thÃ¬ area vÃ  cir váº«n giá»¯ giÃ¡ trá»‹ cÅ© =&gt; sai VÃ¬ váº­y, hÃ£y xÃ¢y dá»±ng láº¡i theo format sau : class Circle { double radius; Circle(this.radius); double get area =&gt; pi * radius * radius; double get circumference =&gt; pi * 2.0 * radius; } Ngáº¯n hÆ¡n, sá»­ dá»¥ng Ã­t bá»™ nhá»› hÆ¡n vÃ  Ã­t xáº£y ra lá»—i hÆ¡n, khÃ´ng sá»£ viá»‡c máº¥t Ä‘á»“ng bá»™ dá»¯ liá»‡u vÃ¬ chá»‰ cÃ³ 1 source duy nháº¥t. Trong 1 sá»‘ trÆ°á»ng há»£p, báº¡n cÃ³ thá»ƒ pháº£i cache láº¡i káº¿t quáº£ náº¿u viá»‡c get tÃ­nh toÃ¡n máº¥t nhiá»u thá»i gian, nhÆ°ng chá»‰ nÃªn lÃ m náº¿u performance Ä‘ang gáº·p váº¥n Ä‘á». 3.4.1 PREFER using a final field to make a read-only property. Äá»ƒ Ä‘áº£m báº£o dá»¯ liá»‡u Ä‘Æ°á»£c wrap láº¡i vÃ  Ä‘Æ°á»£c trÃ­ch xuáº¥t Ä‘Ãºng nÆ¡i, nÃªn set final Táº¥t nhiÃªn, náº¿u cáº§n assign láº¡i pháº¡m vi internal, thÃ¬ nÃªn set private field vÃ  chá»‰ public getter. class Box { final contents = []; double _data; double get data =&gt; _data; set data(double value) { _data = value; } } 3.5.1 DO use initializing formals when possible. NÃªn init giÃ¡ trá»‹ náº¿u cÃ³ thá»ƒ GOOD class Point { double x, y; Point(this.x, this.y); } BAD class Point { double x, y; Point(double x, double y) : x = x, y = y; } =&gt; this.syntax trong constructor Ä‘Æ°á»£c gá»i lÃ  â€œinitializing formalâ€ (khá»Ÿi táº¡o chÃ­nh thá»©c) 3.5.2 DO use ; instead of {} for empty constructor bodies. DÃ¹ng ; thay vÃ¬ {} vá»›i constructor rá»—ng. GOOD class Point { double x, y; Point(this.x, this.y); } BAD class Point { double x, y; Point(this.x, this.y) {} } 3.5.3 DONâ€™T use new. Tá»« Dart 2 trá»Ÿ Ä‘i, khÃ´ng cáº§n sá»­ dá»¥ng tá»« khoÃ¡ â€œnewâ€ 3.6.1 AVOID catches without on clauses. Try/catch nÃªn xÃ¡c Ä‘á»‹nh loáº¡i error báº±ng â€œonâ€ clauses. 4. DESIGN GUIDE Duá»›i Ä‘Ã¢y lÃ  1 sá»‘ hÆ°á»›ng dáº«n Ä‘á»ƒ viáº¿t code tá»‘t hÆ¡n Sá»­ dá»¥ng cÃ¹ng má»™t pattern cho nhá»¯ng má»¥c Ä‘Ã­ch giá»‘ng nhau trong suá»‘t cÃ¡c pháº§n code cá»§a dá»± Ã¡n. Viá»‡c quy Æ°á»›c nÃ y giÃºp viá»‡c Ä‘á»c hiá»ƒu nhanh hÆ¡n, dá»… tÃ¬m hÆ¡n 4.1.1 DO use terms consistently. GOOD pageCount // A field. updatePageCount() // Consistent with pageCount. toSomething() // Consistent with Iterable's toList(). asSomething() // Consistent with List's asMap(). Point // A familiar concept. BAD renumberPages() // Confusingly different from pageCount. convertToSomething() // Inconsistent with toX() precedent. wrappedAsSomething() // Inconsistent with asX() precedent. Cartesian 4.1.2 AVOID abbreviations. TrÃ¡nh viáº¿t táº¯t. Trá»« khi nhá»¯ng tá»« viáº¿t táº¯t phá»• biáº¿n hÆ¡n full. GOOD pageCount buildRectangles IOStream HttpRequest BAD numPages // \"Num\" is an abbreviation of \"number (of)\". buildRects InputOutputStream HypertextTransferProtocolRequest 4.1.3 PREFER a non-imperative verb phrase for a boolean property or variable. Sá»­ dá»¥ng cÃ¡c cá»¥m Ä‘á»™ng tá»« cho thuá»™c tÃ­nh hoáº·c biáº¿n kiá»ƒu boolean GOOD isEmpty hasElements hasShownPopup canClose canShowPopup shouldConsume wasShown willFire BAD empty // Adjective or verb? withElements // Sounds like it might hold elements. closeable // Sounds like an interface. // \"canClose\" reads better as a sentence. closingWindow // Returns a bool or a window? showPopup // Sounds like it shows the popup. 4.1.4 CONSIDER omitting the verb for a named boolean parameter. CÃ¢n nháº¯c viá»‡c bá» qua Ä‘á»™ng tá»« cho 1 sá»‘ named param kiá»ƒu boolean GOOD Isolate.spawn(entryPoint, message, paused: false); var copy = List.from(elements, growable: true); var regExp = RegExp(pattern, caseSensitive: false); 4.1.5 PREFER the â€œpositiveâ€ name for a boolean property or variable. Æ¯u tiÃªn Ä‘áº·t tÃªn kiá»ƒu tÃ­ch cá»±c vá»›i boolean GOOD if (socket.isConnected &amp;&amp; database.hasData) { socket.write(database.read()); } BAD if (!socket.isDisconnected &amp;&amp; !database.isEmpty) { socket.write(database.read()); } 4.1.6 DO follow existing mnemonic conventions when naming type parameters. NÃªn tuÃ¢n theo cÃ¡c quy Æ°á»›c sau khi Ä‘áº·t tÃªn cho cÃ¡c tham sá»‘ kiá»ƒu Sá»­ dá»¥ng E cho cÃ¡c pháº§n tá»­ trong collection ~~~dart GOOD class IterableBase {} class List {} class HashSet {} class RedBlackTree {} * Sá»­ dá»¥ng K vÃ  V ( key &amp; values) cho kiá»ƒu táº­p há»£p ~~~dart class Map&lt;K, V&gt; {} class Multimap&lt;K, V&gt; {} class MapEntry&lt;K, V&gt; {} Sá»­ dá»¥ng R cho kiá»ƒu Ä‘Æ°á»£c sá»­ dá»¥ng lÃ  giÃ¡ trá»‹ tráº£ vá» cá»§a phÆ°Æ¡ng thá»©c abstract class ExpressionVisitor&lt;R&gt; { R visitBinary(BinaryExpression node); R visitLiteral(LiteralExpression node); R visitUnary(UnaryExpression node); } 4.2.1 AVOID defining a one-member abstract class when a simple function will do. Dart lÃ  má»™t ngÃ´n ngá»¯ hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng thuáº§n tuÃ½ trong Ä‘Ã³ cÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘á»u lÃ  instance cá»§a má»™t lá»›p nÃ o Ä‘Ã³. NhÆ°ng dart khÃ´ng yÃªu cáº§u táº¥t cáº£ code pháº£i Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a bÃªn trong class. Báº¡n cÃ³ thá»ƒ Ä‘á»‹nh nghÄ©a top-level variables, constants, functionsâ€¦ TrÃ¡nh define abstract class vá»›i 1 member bÃªn trong GOOD typedef Predicate&lt;E&gt; = bool Function(E element); BAD abstract class Predicate&lt;E&gt; { bool test(E element); } 4.3.1 CONSIDER making your constructor const if the class supports it. CÃ¢n nháº¯c viá»‡c Ä‘Æ°a constructor const náº¿u cÃ³ thá»ƒ Náº¿u báº¡n xÃ¢y dá»±ng 1 class mÃ  táº¥t cáº£ cÃ¡c field lÃ  â€œfinalâ€, vÃ  constructor khÃ´ng lÃ m gÃ¬ ngoÃ i viá»‡c khá»Ÿi táº¡o giÃ¡ trá»‹, báº¡n nÃªn Ä‘á»ƒ constructor const, Ä‘iá»u nÃ y cho phÃ©p táº¡o cÃ¡c instance cá»§a class á»Ÿ nhá»¯ng nÆ¡i báº¯t buá»™c pháº£i cÃ³ yÃªu cáº§u const nhÆ° : bÃªn trong const lá»›n hÆ¡n, switch case, default params valuesâ€¦ 4.4.1 DONâ€™T specify a return type for a setter. Setter luÃ´n tráº£ vá» kiá»ƒu void trong dart, vÃ¬ váº­y thÃªm vÃ o ráº¥t vÃ´ nghÄ©a GOOD set foo(Foo value) { ... } BAD void set foo(Foo value) { ... }" }, { "title": "[Flutter] Effective Dart (Part I)", "url": "/posts/flutter-effective-dart/", "categories": "Flutter", "tags": "flutter, dart", "date": "2020-12-24 14:15:03 +0000", "content": "BÃ i viáº¿t giÃºp báº¡n lÃ m tháº¿ nÃ o Ä‘á»ƒ xÃ¢y dá»±ng mÃ£ code clean clear hÆ¡n. Chi tiáº¿t á»Ÿ Ä‘Ã¢y Äá»ƒ Ã¡p dá»¥ng vÃ o dá»± Ã¡n nhanh vÃ  dá»… dÃ ng hÆ¡n, dart analyzer cung cáº¥p lint - má»™t bá»™ quy táº¯c cáº§n tuÃ¢n theo khi viáº¿t code. HÃ£y tham kháº£o nÃ³ á»Ÿ Ä‘Ã¢y Linting lÃ  má»™t cÃ´ng cá»¥ cá»±c kÃ¬ há»¯u Ã­ch. NÃ³ giÃºp báº¡n thay Ä‘á»•i hÃ nh vi vá» cÃ¡ch viáº¿t code vÃ  giÃºp báº¡n code má»™t cÃ¡ch clean. Introduction BÃ i viáº¿t bao gá»“m 4 pháº§n : Style Guide â€“ Má»™t sá»‘ quy táº¯c bá»‘ trÃ­ vÃ  sáº¯p xáº¿p code, hoáº·c Ã­t nháº¥t lÃ  nhá»¯ng gÃ¬ mÃ  dart format chÆ°a handle cho báº¡n. Guide nÃ y cÅ©ng chá»‰ Ä‘á»‹nh cÃ¡ch format nhÆ° nÃ o cho há»£p lÃ½ : camelCase, using_underscores, etcâ€¦ Documentation Guide â€“ HÆ°á»›ng dáº«n cÃ¡ch comment, viáº¿t docsâ€¦ Usage Guide â€“ LÃ m cÃ¡ch nÃ o Ä‘á»ƒ implement 1 Ä‘oáº¡n mÃ£ sá»­ dá»¥ng cÃ¡c statement hay expression há»£p lÃ½â€¦ Design Guide â€“ ÄÃ¢y lÃ  pháº§n nhá» nhÆ°ng scope rá»™ng nháº¥t. CÃ¡ch khai bÃ¡o, thiáº¿t káº¿ consistent, usable APIs Äá»ƒ xem 1 cÃ¡ch tá»•ng quan, báº¡n cÃ³ thá»ƒ tham kháº£o Ä‘Ã¢y. Trong bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ chia sáº» vá» 2 chá»§ Ä‘á» Ä‘áº§u tiÃªn nhÃ©. 1. STYLE GUIDE Má»™t sá»‘ quy táº¯c bá»‘ trÃ­ vÃ  sáº¯p xáº¿p code, hoáº·c Ã­t nháº¥t lÃ  nhá»¯ng gÃ¬ mÃ  dart format chÆ°a handle cho báº¡n. Guide nÃ y cÅ©ng chá»‰ Ä‘á»‹nh cÃ¡ch format nhÆ° nÃ o cho há»£p lÃ½ : camelCase, using_underscores, etcâ€¦ 1.1.1 UpperCamelCase Viáº¿t hoa chá»¯ cÃ¡i Ä‘áº§u tiÃªn cá»§a má»—i tá»« Sá»­ dá»¥ng vá»›i : Classes, enum types, typedefs, type parametersâ€¦ class SliderMenu { ... } class HttpRequest { ... } typedef Predicate&lt;T&gt; = bool Function(T value); 1.1.2 lowercase_with_underscores Chá»¯ thÆ°á»ng + gáº¡ch dÆ°á»›i. Sá»­ dá»¥ng vá»›i : libraries, package, directories, source file, import as library peg_parser.source_scanner; import 'file_system.dart'; import 'slider_menu.dart'; // Extra import 'dart:math' as math; import 'package:angular_components/angular_components' as angular_components; import 'package:js/js.dart' as js; 1.1.3 lowerCamelCase TÃªn viáº¿t hoa chá»¯ cÃ¡i Ä‘áº§u tiÃªn cá»§a má»—i tá»«, ngoáº¡i trá»« tá»« Ä‘áº§u tiÃªn Ãp dá»¥ng vá»›i: class members, top-level definitions, variables, parameters, and named parameters const variables var count = 3; HttpRequest httpRequest; void align(bool clearItems) { // ... } 1.1.4 PREFER using _, __, etc. for unused callback parameters. Khi callback params khÃ´ng dÃ¹ng Ä‘áº¿n, nÃªn dÃ¹ng gáº¡ch chÃ¢n _ . GiÃºp viá»‡c Ä‘á»c hiá»ƒu nhanh hÆ¡n. 1.2.1 DO place â€œdart:â€ imports before other imports. Import nhá»¯ng thÆ° viá»‡n liÃªn quan Ä‘áº¿n dart trÆ°á»›c tiÃªn import 'dart:async'; import 'dart:html'; import 'package:bar/bar.dart'; import 'package:foo/foo.dart'; 1.2.2 DO place â€œpackage:â€ imports before relative imports. Sá»­ dá»¥ng Ä‘Æ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i khi import import 'package:bar/bar.dart'; import 'package:foo/foo.dart'; import 'util.dart'; 1.2.3 DO specify exports in a separate section after all imports. Export vÃ  import nÃªn phÃ¢n cÃ¡ch nhau import 'src/error.dart'; import 'src/foo_bar.dart'; export 'src/error.dart'; 1.2.4 DO sort sections alphabetically. Sort thá»© tá»± import/exportâ€¦ theo alphab 1.3.1 DO use curly braces for all flow control statements. Sá»­ dá»¥ng {} há»£p lÃ½ cho tá»«ng trÆ°á»ng há»£p if else nhiá»u : {} if chá»‰ cÃ³ 1 má»‡nh Ä‘á» =&gt; khÃ´ng dÃ¹ng if (isWeekDay) { print('Bike to work!'); } else { print('Go dancing or read a book!'); } // 1 clause if (arg == null) return defaultValue; // 2+ clauses if (overflowChars != other.overflowChars) { return overflowChars &lt; other.overflowChars; } 2. DOCUMENT GUIDE HÆ°á»›ng dáº«n cÃ¡ch comment, viáº¿t docsâ€¦ 2.1.1 DO format comments like sentences. // Not if there is nothing before it. if (_chunks.isEmpty) return false; 2.1.2 DONâ€™T use block comments for documentation. GOOD void greet(String name) { // Assume we have a valid name. print('Hi, $name!'); } BAD void greet(String name) { /* Assume we have a valid name. */ print('Hi, $name!'); } =&gt; KhÃ´ng sá»­ dá»¥ng comments theo bloc vá»›i documents 2.2.1 DO use /// doc comments to document members and types. Sá»­ dá»¥ng /// vá»›i cÃ¡c comment má»¥c Ä‘Ã­ch Ä‘á»‹nh nghÄ©a, hÆ°á»›ng dáº«n GOOD /// The number of characters in this chunk when unsplit. int get length =&gt; ... BAD // The number of characters in this chunk when unsplit. int get length =&gt; ... 2.2.2 DO start doc comments with a single-sentence summary. Báº¯t Ä‘áº§u viáº¿t doc báº±ng 1 dÃ²ng vÃ  ngÄƒn cÃ¡ch vá»›i graph dÆ°á»›i náº¿u cÃ³ chÃº thÃ­ch thÃªm /// Deletes the file at [path]. /// /// Throws an [IOError] if the file could not be found. Throws a /// [PermissionError] if the file is present but could not be deleted. void delete(String path) { ... } 2.2.3 DO use square brackets in doc comments to refer to in-scope identifiers. Sá»­ dá»¥ng ngoáº·c vuÃ´ng Ä‘á»ƒ refer Ä‘áº¿n thuá»™c tÃ­nh, ná»™i dung Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»‹nh danh /// Throws a [StateError] if ... /// similar to [anotherMethod()], but ... 2.2.4 Markdown CÃ³ thá»ƒ sá»­ dá»¥ng markdown khi comment. Dart cÃ³ thÆ° viá»‡n markdown support viá»‡c nÃ y. /// This is a paragraph of regular text. /// /// This sentence has *two* _emphasized_ words (italics) and **two** /// __strong__ ones (bold). /// /// A blank line creates a separate paragraph. It has some `inline code` /// delimited using backticks. /// /// * Unordered lists. /// * Look like ASCII bullet lists. /// * You can also use `-` or `+`. /// /// 1. Numbered lists. /// 2. Are, well, numbered. /// 1. But the values don't matter. /// /// * You can nest lists too. /// * They must be indented at least 4 spaces. /// * (Well, 5 including the space after `///`.) /// /// Code blocks are fenced in triple backticks: /// /// ```dart /// this.code /// .will /// .retain(its, formatting); /// ``` /// /// The code language (for syntax highlighting) defaults to Dart. You can /// specify it by putting the name of the language after the opening backticks: /// /// ```html /// &lt;h1&gt;HTML is magical!&lt;/h1&gt; /// ``` /// /// Links can be: /// /// * https://www.just-a-bare-url.com /// * [with the URL inline](https://google.com) /// * [or separated out][ref link] /// /// [ref link]: https://google.com /// /// # A Header /// /// ## A subheader /// /// ### A subsubheader /// /// #### If you need this many levels of headers, you're doing it wrong" }, { "title": "[Flutter] StatefulWidget Lifecycle", "url": "/posts/stateful-lifecycle/", "categories": "Flutter", "tags": "flutter, dart, statefulwidget", "date": "2020-10-01 14:15:03 +0000", "content": "Hi má»i ngÆ°á»i ! Trong bÃ i viáº¿t nÃ y mÃ¬nh sáº½ cÃ¹ng tÃ¬m hiá»ƒu vá» vÃ²ng Ä‘á»i cá»§a 1 StatefulWidget nhÃ©. Introduction Khi Flutter build má»™t StatefulWidget, nÃ³ sáº½ táº¡o ra má»™t State object. Object nÃ y lÃ  nÆ¡i chá»©a táº¥t cáº£ cÃ¡c tráº¡ng thÃ¡i cÃ³ thá»ƒ thay Ä‘á»•i cho widget Ä‘Ã³. Vá» concept, state lÃ  nÆ¡i mÃ  thÃ´ng tin: CÃ³ thá»ƒ Ä‘á»c 1 cÃ¡ch Ä‘á»“ng bá»™ khi widget Ä‘Ã£ Ä‘Æ°á»£c build. CÃ³ thá»ƒ thay Ä‘á»•i trong suá»‘t thá»i gian tá»“n táº¡i (lifetime) cá»§a widget. Image by Jelena Jovanoski. VÃ²ng Ä‘á»i cá»§a 1 StatefulWidget bao gá»“m nhá»¯ng bÆ°á»›c sau createState() mounted == true initState() didChangeDependencies() build() didUpdateWidget() setState() deactive() dispose() mounted == false BÃªn dÆ°á»›i lÃ  1 vÃ­ dá»¥ cá»§a StatefulWidget class BasicWidget extends StatefulWidget { const BasicWidget({Key? key}) : super(key: key); @override _BasicWidgetState createState() =&gt; _BasicWidgetState(); } class _BasicWidgetState extends State&lt;BasicWidget&gt; { @override Widget build(BuildContext context) { return Container(); } } Táº¡i sao StatefulWidget vaf State láº¡i pháº£i tÃ¡ch ra lÃ m 2 class ? =&gt; Hiá»‡u nÄƒng Náº¿u Ä‘á»c chi tiáº¿t vá» State, báº¡n sáº½ tháº¥y State object tá»“n táº¡i lÃ¢u dÃ i nhÆ°ng StatefulWiget (hay rá»™ng hÆ¡n cÃ¡c lá»›p con cá»§a Widget) Ä‘á»u bá»‹ rebuild báº¥t cá»© khi nÃ o cÃ³ config thay Ä‘á»•i. Äiá»u nÃ y giÃºp nÃ³ tá»‘n ráº¥t Ã­t chi phÃ­ Ä‘á»ƒ rebuild láº¡i widget. Bá»Ÿi state khÃ´ng bá»‹ remove má»—i láº§n rebuild, nÃªn nÃ³ trÃ¡nh Ä‘Æ°á»£c cÃ¡c viá»‡c tÃ­nh toÃ¡n tá»‘n kÃ©m vÃ  nháº­n Ä‘Æ°á»£c cÃ¡c thuá»™c tÃ­nh state, get/setâ€¦ ngay khi cÃ³ data má»›i Ä‘Æ°á»£c update. 1. createState() ÄÃ¢y lÃ  phÆ°Æ¡ng thá»©c Ä‘áº§u tiÃªn khi má»™t StatefulWidget Ä‘Æ°á»£c sinh ra. 2. mounted == true Sau khi createState() táº¡o state class, má»™t BuildContext Ä‘Æ°á»£c gáº¯n vá»›i state Ä‘Ã³. Báº¡n cÃ³ thá»ƒ hiá»ƒu Ä‘Æ¡n giáº£n ráº±ng, buildContext lÃ  má»™t thÃ nh pháº§n dÃ¹ng Ä‘á»ƒ Ä‘Ã¡nh dáº¥u vá»‹ trÃ­ cá»§a Widget trong Widget tree. Táº¥t cáº£ cÃ¡c Widget Ä‘á»u cÃ³ 1 thuá»™c tÃ­nh kiá»ƒu bool lÃ  mounted. GiÃ¡ trá»‹ nÃ y sáº½ tráº£ vá» true khi buildContext Ä‘Æ°á»£c gáº¯n vÃ o widget. Thuá»™c tÃ­nh nÃ y há»¯u Ã­ch trong 1 sá»‘ trÆ°á»ng há»£p báº¡n gá»i setState() mÃ  buildContext chÆ°a Ä‘Æ°á»£c gáº¯n vÃ o widget. 3. initState() ÄÃ¢y lÃ  phÆ°Æ¡ng thÆ°á»›c Ä‘Æ°á»£c gá»i Ä‘áº§u sau khi widget Ä‘Æ°á»£c khá»Ÿi táº¡o. Má»™t Ä‘iá»u chÃº Ã½ ráº±ng initState() chá»‰ Ä‘Æ°á»£c gá»i duy nháº¥t 1 láº§n. ThÃ´ng thÆ°á»ng, ta hay override láº¡i method nÃ y Ä‘á»ƒ: Khá»Ÿi táº¡o data dá»±a trÃªn BuildContext Ä‘Ã£ Ä‘Æ°á»£c gáº¯n vÃ o. Khá»Ÿi táº¡o cÃ¡c thuá»™c tÃ­nh dá»±a trÃªn widget cha. Subscribe cÃ¡c stream, change notifier hoáº·c báº¥t cá»© object nÃ o cÃ³ kháº£ nÄƒng thay Ä‘á»•i dá»¯ liá»‡u trÃªn widget nÃ y. @override initState() { super.initState(); // Add listeners to this class cartItemStream.listen((data) { _updateWidget(data); }); } 4. didChangeDependencies() PhÆ°Æ¡ng thá»©c nÃ y Ä‘Æ°á»£c gá»i ngay sau khi initState() Ä‘Æ°á»£c gá»i. KhÃ¡c vá»›i initState, didChangeDependencies() Ä‘Æ°á»£c gá»i báº¥t cá»© khi nÃ o Ä‘á»‘i tÆ°á»£ng mÃ  widget nÃ y phá»¥ thuá»™c vÃ o dá»¯ liá»‡u Ä‘Æ°á»£c gá»i. VÃ­ dá»¥, náº¿u nÃ³ dá»±a trÃªn má»™t InheritedWidget, nÃ³ sáº½ updates. build() method luÃ´n luÃ´n Ä‘Æ°á»£c gá»i ngay sau khi didChangeDependencies(), bá»Ÿi váº­y phÆ°Æ¡ng thá»©c nÃ y Ã­t khi Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘áº¿n. Trong docs flutter cÃ³ suggest ráº±ng phÆ°Æ¡ng thá»©c nÃ y há»¯u dá»¥ng náº¿u báº¡n cáº§n network call hay má»™t vÃ i action tiÃªu tá»‘n tÃ i khÃ¡c khi InheritedWidget Ä‘Æ°á»£c update. MÃ¬nh cÃ³ tÃ¬m Ä‘á»c Ä‘Æ°á»£c 1 bÃ i vÃ­ dá»¥ khÃ¡ chi tiáº¿t vá» usecase sá»­ dá»¥ng tháº±ng nÃ y á»Ÿ Ä‘Ã¢y. Má»i ngÆ°á»i cÃ³ thá»ƒ Ä‘á»c qua nhÃ©. 5. build() PhÆ°Æ¡ng thá»©c nÃ y Ä‘Æ°á»£c gá»i thÆ°á»ng xuyÃªn má»—i khi widget cáº§n update láº¡i. 6. didUpdateWidget(Widget oldWidget) PhÆ°Æ¡ng thá»©c nÃ y Ä‘Æ°á»£c gá»i khi widget cha cá»§a widget hiá»‡n táº¡i thay Ä‘á»•i vÃ  cáº§n rebuild láº¡i widget hiá»‡n táº¡i. Má»™t Ä‘iá»u cáº§n chÃº Ã½ ráº±ng phÆ°Æ¡ng thá»©c build() luÃ´n Ä‘Æ°á»£c gá»i sau phÆ°Æ¡ng thá»©c nÃ y, vÃ¬ váº­y viá»‡c setState á»Ÿ Ä‘Ã¢y lÃ  khÃ´ng cáº§n thiáº¿t. didUpdateWidget() thÆ°á»ng Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ kiá»ƒm tra input Ä‘áº§u vÃ o cá»§a widget cÃ³ cáº­p nháº­t gÃ¬ má»›i khÃ´ng Ä‘á»ƒ xá»­ lÃ½ 1 tÃ¡c vá»¥ nÃ o Ä‘Ã³. @override void didUpdateWidget(Widget oldWidget) { if (oldWidget.importantProperty != widget.importantProperty) { _init(); } } 7. setState() PhÆ°Æ¡ng thá»©c setState thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng ngay trong flutter framework láº«n tá»« cÃ¡c developer. NÃ³ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ thÃ´ng bÃ¡o ráº±ng â€œÄ‘Ã£ cÃ³ dá»¯ liá»‡u thay Ä‘á»•iâ€. Khi Ä‘Ã³, cáº£ widget hiá»‡n táº¡i sáº½ Ä‘Æ°á»£c build láº¡i. 8. deactive() PhÆ°Æ¡ng thá»©c nÃ y hiáº¿m khi Ä‘Æ°á»£c sá»­ dá»¥ng. PhÆ°Æ¡ng thá»©c Ä‘Æ°á»£c gá»i khi State bá»‹ remove khá»i tree, nhÆ°ng nÃ³ cÃ³ thá»ƒ Ä‘Æ°á»£c insert láº¡i trÆ°á»›c khi káº¿t thÃºc quÃ¡ trÃ¬nh thay Ä‘á»•i khung hiá»‡n táº¡i. 9. dispose() PhÆ°Æ¡ng thá»©c Ä‘Æ°á»£c gá»i khi Ä‘á»‘i tÆ°á»£ng State bá»‹ remove khá»i tree. ÄÃ¢y cÅ©ng lÃ  nÆ¡i Ä‘á»ƒ unsubscribe hay cancel animation, streams, etc. 10. mounted = false Khi Ä‘á»‘i tÆ°á»£ng state khÃ´ng cÃ²n tá»“n táº¡i ná»¯a, thuá»™c tÃ­nh mounted sáº½ tráº£ vá» false. ÄÃ¢y cÅ©ng lÃ  lÃ½ do lá»—i xáº£y ra khi ta gá»i setState() khi widget chÆ°a Ä‘Æ°á»£c mount. Conclution ChÃºc cÃ¡c báº¡n coding vui váº» :D" }, { "title": "[Flutter] Hive Database", "url": "/posts/Flutter-Hive-Database/", "categories": "Flutter", "tags": "dart, flutter, database", "date": "2020-08-15 14:15:03 +0000", "content": "Hive lÃ  má»™t lightweight database xÃ¢y dá»±ng theo dáº¡ng key-value Ä‘Æ°á»£c viáº¿t báº±ng Dart thuáº§n tÃºy. Láº¥y cáº£m há»©ng tá»« Bitcask Introduction https://docs.hivedb.dev/ Hive lÃ  má»™t cÆ¡ sá»Ÿ dá»¯ liá»‡u NoSQL Ä‘áº£m báº£o Ä‘Ãºng tiÃªu chÃ­ nhanh, gá»n, nháº¹. Hive thá»±c sá»± há»¯u Ã­ch náº¿u báº¡n báº¡n cáº§n 1 CSDL dÆ°á»›i dáº¡ng key-value, ko cÃ³ nhiá»u relationship vÃ  dá»… dÃ¹ng. Hive láº¥y Ã½ tÆ°á»Ÿng tá»« cÃ¡c há»™p ( box - nÆ¡i chÆ°a dá»¯ liá»‡u ) - má»Ÿ ra trÆ°á»›c khi sá»­ dá»¥ng . Hive Ä‘Ã£ há»— trá»£ lazy-loading vÃ  encrypt. Trong pháº§n I nÃ y, mÃ¬nh sáº½ giá»›i thiá»‡u cÆ¡ báº£n vá» Hive vÃ  cÃ¡ch sá»­ dá»¥ng nÃ³. Docs dá»±a trÃªn Hive phiÃªn báº£n sau: dependencies: hive: ^1.4.4+1 hive_flutter: ^0.3.1 dev_dependencies: hive_generator: ^0.8.2 build_runner: ^1.11.1 What are boxes ? Táº¥t cáº£ data Ä‘Æ°á»£c lÆ°u trong Hive Ä‘Æ°á»£c tá»• chá»©c theo cÃ¡c há»™p (box). Má»™t box cÃ³ thá»ƒ Ä‘Æ°á»£c coi nhÆ° 1 table trong SQL nhÆ°ng khÃ´ng cÃ³ cáº¥u trÃºc vÃ  cÃ³ thá»ƒ chá»©a má»i thá»©. Open box ? Äá»ƒ sá»­ dá»¥ng Ä‘Æ°á»£c box, báº¡n cáº§n má»Ÿ nÃ³ trÆ°á»›c. var box = await Hive.openBox&lt;E&gt;('testBox'); Náº¿u box Ä‘Ã£ Ä‘Æ°á»£c má»Ÿ, nÃ³ sáº½ return ngay vÃ  cÃ¡c params truyá»n vÃ o sáº½ bá»‹ ignore. Khi cÃ³ Ä‘Æ°á»£c instance cá»§a box, báº¡n cÃ³ thá»ƒ Ä‘á»c, ghi, xoÃ¡, sá»­aâ€¦ Get open box ? Hive lÆ°u trá»¯ 1 tham chiáº¿u Ä‘áº¿n cÃ¡c box Ä‘Ã£ Ä‘Æ°á»£c má»Ÿ. Náº¿u muá»‘n má»Ÿ má»™t box Ä‘Ã£ Ä‘Æ°á»£c má»Ÿ rá»“i : var box = Hive.box('myBox'); PhÆ°Æ¡ng thá»©c nÃ y ráº¥t há»¯u Ã­ch bá»Ÿi báº¡n sáº½ ko cáº§n pháº£i truyá»n qua láº¡i box giá»¯a cÃ¡c widgets. Close box ? Náº¿u báº¡n ko cáº§n sá»­ dá»¥ng Ä‘áº¿n box ná»¯a, hÃ£y close nÃ³. Táº¥t cáº£ key &amp; value Ä‘Æ°á»£c lÆ°u trong cache sáº½ Ä‘Æ°á»£c xoÃ¡ khá»i bá»™ nhá»›. var box = await Hive.openBox('myBox'); await box.put('hello', 'world'); await box.close(); Note: TrÆ°á»›c khi Ä‘Ã³ng á»©ng dá»¥ng, báº¡n nÃªn gá»i Hive.close() Ä‘á»ƒ Ä‘Ã³ng toÃ n bá»™ cÃ¡c box láº¡i. Type parameter: Box Khi gá»i openBox, báº¡n cÃ³ thá»ƒ chá»‰ Ä‘á»‹nh ráº±ng nÃ³ chá»‰ cÃ³ thá»ƒ chá»©a giÃ¡ trá»‹ cá»§a 1 loáº¡i cá»¥ thá»ƒ. var box = await Hive.openBox&lt;User&gt;('users'); box.add(User()); box.add(5); // Compile time error Note: Box nÃ y cÃ³ thá»ƒ chá»©a subtype cá»§a User. Báº¡n cáº§n cung cáº¥p cÃ¹ng kiá»ƒu params trong Hive.box(). Báº¡n ko thá»ƒ má»Ÿ cÃ¹ng má»™t box vá»›i cÃ¡c tham sá»‘ kiá»ƒu khÃ¡c nhau. await Hive.openBox&lt;User&gt;('users'); Hive.box&lt;User&gt;('users'); // OK Hive.box('users'); // ERROR Hive.box&lt;Dog&gt;('users'); // ERROR Reading &amp; Writing ? Reading Viá»‡c Ä‘á»c tá»« box ráº¥t Ä‘Æ¡n giáº£n : var box = Hive.box('myBox'); String name = box.get('name'); DateTime birthday = box.get('birthday'); Náº¿u nhÆ° key khÃ´ng tá»“n táº¡i, sáº½ return null. Tuy nhiÃªn, báº¡n cÅ©ng cÃ³ thá»ƒ set defaultValue trong trÆ°á»ng há»£p key khÃ´ng tá»“n táº¡i. double height = box.get('randomKey', defaultValue: 17.5); CÃ¡c list tráº£ vá» bá»Ÿi get() máº·c Ä‘á»‹nh cÃ³ dáº¡ng List. Sá»­ dá»¥ng list.cast() Ä‘á»ƒ cast vá» kiá»ƒu cáº§n dÃ¹ng. Every object only exists once Báº¡n sáº½ luÃ´n nháº­n Ä‘Æ°á»£c cÃ¹ng 1 instance cá»§a má»™t Ä‘á»‘i tÆ°á»£ng vá»›i 1 key cá»¥ thá»ƒ. Writing Viá»‡c ghi vÃ o box gáº§n giá»‘ng nhÆ° map. Táº¥t cáº£ cÃ¡c key pháº£i lÃ  chuá»—i string ASCII tá»‘i Ä‘a 255 kÃ­ tá»± hoáº·c sá»‘ nguyÃªn 32bit unsigned. var box = Hive.box('myBox'); box.put('name', 'Paul'); box.put('friends', ['Dave', 'Simon', 'Lisa']); box.put(123, 'test'); box.putAll({'key1': 'value1', 42: 'life'}); Báº¡n cÃ³ tháº¯c máº¯c táº¡i sao viá»‡c write láº¡i ko async ? ÄÃ¢y lÃ  1 trong nhá»¯ng Ä‘iá»ƒm máº¡nh chÃ­nh cá»§a Hive. CÃ¡c thay Ä‘á»•i Ä‘Æ°á»£c ghi vÃ o disk dÆ°á»›i background nhÆ°ng táº¥t cáº£ listener sáº½ Ä‘Æ°á»£c thÃ´ng bÃ¡o ngay láº­p tá»©c. Náº¿u báº¡n muá»‘n Ä‘áº£m báº£o quÃ¡ trÃ¬nh write thÃ nh cÃ´ng, chá»‰ cáº§n await nÃ³ bá»Ÿi Future. =&gt; Äiá»u nÃ y khÃ¡c vá»›i lazyboxes á»Ÿ chá»— : náº¿u Future Ä‘Æ°á»£c tráº£ vá» bá»Ÿi function put() chÆ°a hoÃ n thÃ nh thÃ¬ khi gá»i get() sáº½ tráº£ vá» giÃ¡ trá»‹ cÅ© ( or null náº¿u chÆ°a tá»“n táº¡i). var box = await Hive.openBox('box'); box.put('key', 'value'); print(box.get('key')); // value var lazyBox = await Hive.openLazyBox('lazyBox'); var future = lazyBox.put('key', 'value'); print(lazyBox.get('key')); // null await future; print(lazyBox.get('key')); // value Delete Náº¿u báº¡n muá»‘n xoÃ¡, xá»­ dá»¥ng delete() Note: write null khÃ¡c vÆ¡i delete(); var box = await Hive.openBox('writeNullBox'); box.put('key', 'value'); box.put('key', null); print(box.containsKey('key')); // TRUE box.delete('key'); print(box.containsKey('key')); // FALSE Auto increment &amp; indices Hive há»— trá»£ tá»± Ä‘á»™ng tÄƒng key =&gt; Äiá»u nÃ y ráº¥t há»¯u Ã­ch Ä‘á»ƒ truy cáº­p nhiá»u Ä‘á»‘i tÆ°á»£ng, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng box nhÆ° má»™t list. var friends = await Hive.openBox('friends'); friends.clear(); friends.add('Lisa'); // index 0, key 0 friends.add('Dave'); // index 1, key 1 friends.put(123, 'Marco'); // index 2, key 123 friends.add('Paul'); // index 3, key 124 print(friends.getAt(0)); print(friends.get(0)); print(friends.getAt(1)); print(friends.get(1)); print(friends.getAt(2)); print(friends.get(123)); print(friends.getAt(3)); print(friends.get(124)); Conclusion ChÃºc cÃ¡c báº¡n coding vui váº» :D References Hive Docs" }, { "title": "[Flutter] Dart Extension Methods", "url": "/posts/dart-extension-method/", "categories": "Flutter, Dart", "tags": "flutter, dart, extension-method", "date": "2020-08-15 14:15:03 +0000", "content": "Introduction TrÆ°á»›c Ä‘Ã¢y, cÃ³ khÃ¡ nhiá»u ngÆ°á»i chÃª Dart bá»Ÿi nÃ³ thiáº¿u cÃ¡c tiá»‡n Ã­ch má»Ÿ rá»™ng nhÆ° Extensions - thá»© mÃ  cÃ¡c ae dev Ä‘Ã£ biáº¿t vÃ  sá»­ dá»¥ng ráº¥t nhiá»u tá»« cÃ¡c ngÃ´n ngá»¯ nhÆ° C#, Swift hay Kotlinâ€¦ Äá»ƒ chiá»u lÃ²ng cÃ¡c fan, táº¡i Google I/O 2019, Ä‘á»™i ngÅ© Dart Ä‘Ã£ cÃ´ng cá»‘ 3 tÃ­nh nÄƒng má»›i. Má»™t trong sá»‘ Ä‘Ã³ chÃ­nh lÃ  Extension Methods. TÃ­nh nÄƒng nÃ y Ä‘Ã£ Ä‘Æ°á»£c release tá»« phiÃªn báº£n Dart 2.7. Trong bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ cÃ¹ng tÃ¬m hiá»ƒu xem cÃ³ gÃ¬ má»›i nhÃ©. Enable Dart Extension Methods Äá»ƒ báº­t tÃ­nh nÄƒng nÃ y, chá»‰ cáº§n phiÃªn báº£n dart tá»« 2.7 trá»Ÿ lÃªn: environment: sdk: '&gt;=2.7.0 &lt;3.0.0' How to create extension methods Extension method Ä‘Æ°á»£c xÃ¢y dá»±ng theo cÃº phÃ¡p extension &lt;'TÃªn Extension'&gt; on &lt;'Class cáº§n extends'&gt; {} Note: TÃªn extension cÃ³ thá»ƒ cÃ³ hoáº·c khÃ´ng Ä‘á»u Ä‘Æ°á»£c. Tá»‘t nháº¥t nÃªn Ä‘áº·t Ä‘á»ƒ trÃ¡nh conflicts khi khai bÃ¡o. VÃ­ dá»¥ : // Import a library that contains an extension on String. import '\u001dint_x.dart'; extension on int { Duration seconds() =&gt; Duration(seconds: this); } final duration = 20.seconds(); Extension method members Extensions khÃ´ng chá»‰ xÃ¡c Ä‘á»‹nh cÃ¡c method mÃ  cÃ²n cÃ³ thá»ƒ xÃ¡c Ä‘á»‹nh getter, setter hay cÃ¡c operators khÃ¡c. VÃ­ dá»¥ extension NumberParsing on String { int parseInt() { return int.parse(this); } // Â·Â·Â· } print('42'.parseInt()); // Use an extension method. Generic Extensions Extension cÅ©ng cÃ³ thá»ƒ sá»­ dá»¥ng generic type. BÃªn dÆ°á»›i lÃ  1 vÃ­ dá»¥ sá»­ dá»¥ng generic dá»±a trÃªn List extension MyFancyList&lt;T&gt; on List&lt;T&gt; { int get doubleLength =&gt; length * 2; List&lt;T&gt; operator -() =&gt; reversed.toList(); List&lt;List&lt;T&gt;&gt; split(int at) =&gt; &lt;List&lt;T&gt;&gt;[sublist(0, at), sublist(at)]; } Conclusion ChÃºc cÃ¡c báº¡n coding vui váº» :D References Extension methods" }, { "title": "[Flutter] Package Dependencies", "url": "/posts/flutter-package-dependencies/", "categories": "Flutter, Dart", "tags": "flutter, dart, package dependencies, vs, pub-dev", "date": "2020-08-08 14:15:03 +0000", "content": "Introduction Há»‡ sinh thÃ¡i Dart sá»­ dá»¥ng cÃ¡c package Ä‘á»ƒ quáº£n lÃ½ cÃ¡c pháº§n má»m dÃ¹ng chung nhÆ° cÃ¡c libs hay tool. Trong bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ giá»›i thiá»‡u cÃ¡ch lÃ m viá»‡c vá»›i cÃ¡c dependencies trong pubspec.yaml. Overview CÃ¡c dependency Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh trong tá»‡p pubspec.yaml. Äá»ƒ chá»‰ Ä‘á»‹nh 1 dependency: dependencies: transmogrify: ^1.0.0 \u001dDependency vá»›i package transmogrify Ä‘Æ°á»£c thiáº¿t láº­p cho phÃ©p version náº±m trong khoáº£ng [1.0.0 vÃ  &lt; 2.0.0) MÃ¬nh sáº½ nÃ³i chi tiáº¿t hÆ¡n á»Ÿ má»¥c version constraints bÃªn dÆ°á»›i. Náº¿u muá»‘n chá»‰ Ä‘á»‹nh 1 source nháº¥t Ä‘á»‹nh, syntax sáº½ khÃ¡c 1 chÃºt : dependencies: transmogrify: hosted: name: transmogrify url: http://some-package-server.com version: ^1.0.0 \u001dDependency theo package transmogrify sá»­ dá»¥ng source Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a bÃªn trong hosted. Trong Ä‘a sá»‘ trÆ°á»ng há»£p, báº¡n chá»‰ sá»­ dá»¥ng cáº¥u trÃºc packagename: version mÃ  thÃ´i. Dependency sources Pub sá»­ dá»¥ng cÃ¡c source sau Ä‘á»ƒ xÃ¡c Ä‘á»‹nh package: SDK Hosted packages Git packages Path packages 1. SDK SDK source Ä‘Æ°á»£c sá»­ dá»¥ng cho báº¥t kÃ¬ SDK nÃ o Ä‘Ã£ bao gá»“m cÃ¡c package, báº£n thÃ¢n chÃºng cÅ©ng cÃ³ thá»ƒ lÃ  cÃ¡c dependencies. Hiá»‡n táº¡i, Flutter lÃ  SDK duy nháº¥t Ä‘Æ°á»£c há»— trá»£. dependencies: flutter_driver: sdk: flutter version: ^0.0.1 2. Hosted packages Hosted package lÃ  nÆ¡i cÃ³ thá»ƒ download tá»« side pub.dev ( hoáº·c má»™t mÃ¡y chá»§ HTTP khÃ¡c sá»­ dá»¥ng cÃ¹ng 1 API). dependencies: transmogrify: ^1.4.0 Náº¿u báº¡n muá»‘n sá»­ dá»¥ng mÃ¡y chá»§ riÃªng mÃ¬nh, báº¡n cÃ³ thá»ƒ tá»± chá»‰ Ä‘á»‹nh URL: dependencies: transmogrify: hosted: name: transmogrify url: http://your-package-server.com version: ^1.4.0 3. Git packages ÄÃ´i khi, báº¡n cáº§n sá»­ dá»¥ng 1 package nÃ o Ä‘Ã³ mÃ  nÃ³ chÆ°a Ä‘Æ°á»£c release vÃ  váº«n Ä‘ang trong quÃ¡ trÃ¬nh phÃ¡t triá»ƒn cháº£ háº¡n, báº¡n cÃ³ thá»ƒ depend trá»±c tiáº¿p vÃ o Git repo luÃ´n. dependencies: kittens: git: https://github.com/munificent/kittens.git Náº¿u báº¡n muá»‘n depend vÃ o má»™t commit nháº¥t Ä‘á»‹nh, hay branch, hay tag. HÃ£y sá»­ dá»¥ng ref argument. dependencies: kittens: git: url: git@github.com:munificent/kittens.git ref: some-branch ref cÃ³ thá»ƒ lÃ  báº¥t cá»© thá»© gÃ¬ Git cho phÃ©p dÃ¹ng Ä‘á»ƒ Ä‘á»‹nh danh 1 commit. Xem chi tiáº¿t á»Ÿ Ä‘Ã¢y Máº·c Ä‘á»‹nh, Pub sáº½ coi package náº±m á»Ÿ thÆ° má»¥c gá»‘c cá»§a Git repo. Náº¿u muá»‘n chá»‰ Ä‘á»‹nh 1 vá»‹ trÃ­ khÃ¡c trong repo. Sá»­ dá»¥ng path argument: dependencies: kittens: git: url: git@github.com:munificent/cats.git path: path/to/kittens 4. Path package ÄÃ´i khi, báº¡n cáº§n lÃ m viá»‡c trÃªn nhiá»u package liÃªn quan cÃ¹ng lÃºc vÃ  muá»‘n thay Ä‘á»•i phá»¥ thuá»™c trá»±c tiáº¿p vÃ o local Ä‘á»ƒ debug cháº³ng háº¡n: dependencies: transmogrify: path: /Users/me/transmogrify Version constraints \u001dDart sá»­ dá»¥ng semantic versioning, giÃºp báº¡n biáº¿t version nÃ o sáº½ hoáº¡t Ä‘á»™ng. 1. Caret syntax Caret syntax hay gá»i lÃ  cÃº phÃ¡p dáº¥u mÅ© lÃ  cÃ¡ch ngáº¯n gá»n Ä‘á»ƒ thá»ƒ hiá»‡n rÃ ng buá»™c version phá»• biáº¿n. ^version cÃ³ nghÄ©a lÃ  pháº¡m vi cá»§a táº¥t cáº£ cÃ¡c phiÃªn báº£n Ä‘Æ°á»£c Ä‘áº£m báº£o tÆ°Æ¡ng thÃ­ch ngÆ°á»£c vá»›i phiÃªn báº£n Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh. VÃ­ dá»¥ : ^1.2.3 tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i â€&gt;= 1.2.3 &amp; &lt; 2.0.0â€ Note: cÃº phÃ¡p mÅ© Ä‘Æ°á»£c giá»›i thiá»‡u tá»« Dart 1.8.3, hÃ£y Ä‘áº£m báº£o ráº±ng sdk version cá»§a báº¡n &gt;= nhÃ©. environment: sdk: '&gt;=1.8.3 &lt;3.0.0' 2. Traditional syntax Sá»­ dá»¥ng cÃº phÃ¡p truyá»n thá»‘ng : any : Chuá»—i string any cho phÃ©p báº¥t kÃ¬ version nÃ o. NÃ³ tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i viá»‡c bá» trá»‘ng version, nhÆ°ng rÃµ rÃ ng hÆ¡n. Máº·c dÃ¹ any Ä‘Æ°á»£c cho phÃ©p, nhÆ°ng ta ko nÃªn dÃ¹ng nÃ³. 1.2.3 : chá»‰ hoáº¡t Ä‘á»™ng vá»›i Ä‘Ãºng version 1.2.3. &gt;=1.2.3 : hoáº¡t Ä‘á»™ng vá»›i cÃ¡c phiÃªn báº£n lá»›n hÆ¡n hoáº·c báº±ng 1.2.3. &gt;1.2.3 : hoáº¡t Ä‘á»™ng vá»›i cÃ¡c phiÃªn báº£n lá»›n hÆ¡n 1.2.3 &lt;=1.2.3 hoáº¡t Ä‘á»™ng vá»›i cÃ¡c phiÃªn báº£n nhá» hÆ¡n hoáº·c báº±ng 1.2.3 &lt;1.2.3 hoáº¡t Ä‘á»™ng vá»›i cÃ¡c phiÃªn báº£n nhá» hÆ¡n 1.2.3 &gt;=1.2.3 &lt;1.8.0 : hoáº¡t Ä‘á»™ng vá»›i cÃ¡c phiÃªn báº£n tá»« 1.2.3 Ä‘áº¿n dÆ°á»›i 1.8.0. Regular &amp; Dev dependencies Pub há»— trá»£ 2 kiá»ƒu dependencies : Regular dependencies ( phá»¥ thuá»™c thÃ´ng thÆ°á»ng ) Dev dependencies ( phá»¥ thuá»™c phÃ¡t triá»ƒn ). Dev dependencies khÃ¡c vá»›i regular á»Ÿ Ä‘iá»ƒm cÃ¡c phá»¥ thuá»™c nÃ y sáº½ Ä‘Æ°á»£c ignore. VÃ­ dá»¥: dev_dependencies: test: '&gt;=0.5.0 &lt;0.12.0' Dependency overrides Sá»­ dá»¥ng dependency_overrides Ä‘á»ƒ táº¡m thá»i override táº¥t cáº£ cÃ¡c tham chiáº¿u Ä‘áº¿n dependency nÃ y. name: my_app dependencies: transmogrify: ^1.2.0 dependency_overrides: transmogrify: '3.2.1' Conclusion ChÃºc cÃ¡c báº¡n coding vui váº» :D References https://dart.dev/tools/pub/dependencies#version-constraints" }, { "title": "[Android] TÃ¬m hiá»ƒu vá» Custom View vÃ  xÃ¢y dá»±ng thÆ° viá»‡n Circular Seekbar", "url": "/posts/android-custom-view/", "categories": "Android", "tags": "android, custom view", "date": "2020-07-14 14:15:03 +0000", "content": "CustomView trong Android khÃ¡ phá»©c táº¡p vá»›i nhá»¯ng báº¡n má»›i báº¯t Ä‘áº§u. Trong bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ tÃ¬m hiá»ƒu cÃ¡c khÃ¡i niá»‡m cÆ¡ báº£n vá» custom view trong android vÃ  lÃ m tháº¿ nÃ o Ä‘á»ƒ xuáº¥t báº£n thÆ° viá»‡n lÃªn JCenter Ä‘á»ƒ sá»­ dá»¥ng. TrÆ°á»›c khi báº¯t Ä‘áº§uâ€¦ HÃ£y xem cÃ¡ch widget nÃ y hoáº¡t Ä‘á»™ng, ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ cháº¡m vÃ o biá»ƒu tÆ°á»£ng chá»‰ thá»‹ quanh vÃ²ng cung Ä‘á»ƒ thiáº¿t láº­p giÃ¡ trá»‹. Biá»ƒu tÆ°á»£ng sáº½ ngá»«ng kÃ©o khi vÆ°á»£t quÃ¡ giÃ¡ trá»‹ min/max. NÃ³ hoáº¡t Ä‘á»™ng nhÆ° má»™t pháº§n má»Ÿ rá»™ng cá»§a Seekbar vá»›i kháº£ nÄƒng tÃ¹y biáº¿n vÃ  sá»± kiá»‡n chuyá»ƒn Ä‘á»™ng. VÃ²ng Ä‘á»i cá»§a 1 View NhÆ° má»i ngÆ°á»i biáº¿t thÃ¬ táº¥t cáº£ cÃ¡c view widget Ä‘á»u dá»±a trÃªn View, Ä‘á»ƒ implement má»™t custom view báº¡n cáº§n hiá»ƒu vÃ²ng Ä‘á»i cá»§a view trÆ°á»›c Ä‘Ã£. Äá»ƒ báº¯t Ä‘áº§u, Ä‘áº§u tiÃªn ta pháº£i táº¡o má»™t class extends View vÃ  táº¡o 2 hÃ m táº¡o máº·c Ä‘á»‹nh cho phÃ©p táº¡o view trong chÆ°Æ¡ng trÃ¬nh hoáº·c trong XML. public class SwagPoints extends View { // used in view creation programmatically public SwagPoints(Context context) { super(context); } // used in XML layout file public SwagPoints(Context context, @Nullable AttributeSet attrs) { super(context, attrs); } } Tiáº¿p Ä‘Ã³, má»™t sá»‘ khÃ¡i niá»‡m ta pháº£i quan tÃ¢m khi custom view : Â Â Â Â Â Â 1. Attributes : XÃ¡c Ä‘á»‹nh cÃ¡c thuá»™c tÃ­nh cho phÃ©p cÃ¡c developer thay Ä‘á»•i diá»‡n máº¡o vÃ  hÃ nh vi trong tá»‡p XML theo thiáº¿t káº¿ cá»§a há». Â Â Â Â Â Â 2. Size : XÃ¡c Ä‘á»‹nh kÃ­ch thÆ°á»›c cá»§a View vÃ  cÃ¡c thÃ nh pháº§n cá»§a nÃ³. Â Â Â Â Â Â 3. Drawing : XÃ¡c Ä‘á»‹nh cÃ¡ch mÃ  view vÃ  cÃ¡c thÃ nh pháº§n cá»§a nÃ³ Ä‘Æ°á»£c render trÃªn mÃ n hÃ¬nh. Â Â Â Â Â Â 4. Touch : XÃ¡c Ä‘á»‹nh cÃ¡ch mÃ  ngÆ°á»i dÃ¹ng tÆ°Æ¡ng tÃ¡c vá»›i view báº±ng cÃ¡ch cháº¡m. 1. Attributes á» Ä‘Ã¢y ta sáº½ cung cáº¥p má»™t sá»‘ thuá»™c tÃ­nh tÃ¹y chá»‰nh cho nhÃ  phÃ¡t triá»ƒn. Ta táº¡o tá»‡p attrs.xml theo Ä‘Æ°á»ng dáº«n res/values/attrs.xml vÃ  Ä‘á»‹nh nghÄ©a cÃ¡c thuá»™c tÃ­nh cho view trong tháº» &lt;declare-styleable&gt; nhÆ° sau : &lt;resources&gt; &lt;declare-styleable name=\"SwagPoints\"&gt; &lt;attr name=\"points\" format=\"integer\" /&gt; &lt;attr name=\"max\" format=\"integer\" /&gt; &lt;attr name=\"min\" format=\"integer\"/&gt; &lt;attr name=\"step\" format=\"integer\"/&gt; &lt;attr name=\"indicatorIcon\" format=\"reference\" /&gt; &lt;attr name=\"progressWidth\" format=\"dimension\" /&gt; &lt;attr name=\"progressColor\" format=\"color\" /&gt; &lt;attr name=\"arcWidth\" format=\"dimension\" /&gt; &lt;attr name=\"arcColor\" format=\"color\" /&gt; &lt;attr name=\"textSize\" format=\"dimension\"/&gt; &lt;attr name=\"textColor\" format=\"color\"/&gt; &lt;attr name=\"clockwise\" format=\"boolean\" /&gt; &lt;attr name=\"enabled\" format=\"boolean\" /&gt; &lt;/declare-styleable&gt; &lt;/resources&gt; Tiáº¿p theo, sá»­ dá»¥ng TypedArray Ä‘á»ƒ láº¥y cÃ¡c giÃ¡ trá»‹ thuá»™c tÃ­nh trong class vÃ  xÃ¡c Ä‘á»‹nh cÃ¡c biáº¿n máº«u. Äáº©y chÃºng vÃ o hÃ m init() sau super() : private void init(Context context, AttributeSet attrs) { \tfloat density = getResources().getDisplayMetrics().density; \t// Defaults, may need to link this into theme settings \tint arcColor = ContextCompat.getColor(context, R.color.color_arc); \tint progressColor = ContextCompat.getColor(context, R.color.color_progress); \tint textColor = ContextCompat.getColor(context, R.color.color_text); \tmProgressWidth = (int) (mProgressWidth * density); \tmArcWidth = (int) (mArcWidth * density); \tmTextSize = (int) (mTextSize * density); \tmIndicatorIcon = ContextCompat.getDrawable(context, R.drawable.indicator); \tif (attrs != null) { \t\t// Attribute initialization \t\tfinal TypedArray a = context.obtainStyledAttributes(attrs, \t\t\t\tR.styleable.SwagPoints, 0, 0); \t\tDrawable indicatorIcon = a.getDrawable(R.styleable.SwagPoints_indicatorIcon); \t\tif (indicatorIcon != null) \t\t\tmIndicatorIcon = indicatorIcon; \t\tint indicatorIconHalfWidth = mIndicatorIcon.getIntrinsicWidth() / 2; \t\tint indicatorIconHalfHeight = mIndicatorIcon.getIntrinsicHeight() / 2; \t\tmIndicatorIcon.setBounds(-indicatorIconHalfWidth, -indicatorIconHalfHeight, indicatorIconHalfWidth, \t\t\t\tindicatorIconHalfHeight); \t\tmPoints = a.getInteger(R.styleable.SwagPoints_points, mPoints); \t\tmMin = a.getInteger(R.styleable.SwagPoints_min, mMin); \t\tmMax = a.getInteger(R.styleable.SwagPoints_max, mMax); \t\tmStep = a.getInteger(R.styleable.SwagPoints_step, mStep); \t\tmProgressWidth = (int) a.getDimension(R.styleable.SwagPoints_progressWidth, mProgressWidth); \t\tprogressColor = a.getColor(R.styleable.SwagPoints_progressColor, progressColor); \t\tmArcWidth = (int) a.getDimension(R.styleable.SwagPoints_arcWidth, mArcWidth); \t\tarcColor = a.getColor(R.styleable.SwagPoints_arcColor, arcColor); \t\tmTextSize = (int) a.getDimension(R.styleable.SwagPoints_textSize, mTextSize); \t\tmTextColor = a.getColor(R.styleable.SwagPoints_textColor, mTextColor); \t\tmClockwise = a.getBoolean(R.styleable.SwagPoints_clockwise, \t\t\t\tmClockwise); \t\tmEnabled = a.getBoolean(R.styleable.SwagPoints_enabled, mEnabled); \t\ta.recycle(); \t} } 2. Size Äá»ƒ kiá»ƒm soÃ¡t Ä‘Æ°á»£c kÃ­ch thÆ°á»›c cá»§a view, ta pháº£i @override láº¡i phÆ°Æ¡ng thá»©c onMeasure() vÃ  tÃ­nh toÃ¡n kÃ­ch thÆ°á»›c cá»§a tá»«ng thÃ nh pháº§n. á» Ä‘Ã¢y ta sáº½ pháº£i xÃ¡c Ä‘á»‹nh bÃ¡n kÃ­nh cung theo chiá»u rá»™ng, chiá»u cao cá»§a view. @Override protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) { \tfinal int width = getDefaultSize(getSuggestedMinimumWidth(), widthMeasureSpec); \tfinal int height = getDefaultSize(getSuggestedMinimumHeight(), heightMeasureSpec); \tfinal int min = Math.min(width, height); \tmTranslateX = (int) (width * 0.5f); \tmTranslateY = (int) (height * 0.5f); \tint arcDiameter = min - getPaddingLeft(); \tmArcRadius = arcDiameter / 2; \tfloat top = height / 2 - (arcDiameter / 2); \tfloat left = width / 2 - (arcDiameter / 2); \tmArcRect.set(left, top, left + arcDiameter, top + arcDiameter); \tupdateIndicatorIconPosition(); \tsuper.onMeasure(widthMeasureSpec, heightMeasureSpec); } 3. Drawing ÄÃ¢y chÃ­nh lÃ  nÆ¡i báº¡n thá»ƒ hiá»‡n kháº£ nÄƒng váº½ cá»§a mÃ¬nh :smile: Äá»ƒ váº½ view, báº¡n pháº£i @override láº¡i phÆ°Æ¡ng thá»©conDraw(Canvas canvas). TrÆ°á»›c Ä‘Ã³, báº¡n cáº§n pháº£i biáº¿t dÃ¹ng gÃ¬ Ä‘á»ƒ váº½ vÃ  váº½ nhÆ° tháº¿ nÃ o chá»© ? Android cung cáº¥p 2 lá»›p Ä‘á»ƒ lÃ m viá»‡c nÃ y Ä‘Ã³ lÃ  Canvas vÃ  Paint. TrÆ°á»›c khi sá»­ dá»¥ng canvas Ä‘á»ƒ váº½, báº¡n cáº§n pháº£i táº¡o má»™t Ä‘á»‘i tÆ°á»£ng Paint. Äá»ƒ tá»‘i Æ°u hiá»‡u nÄƒng, viá»‡c táº¡o ra Ä‘á»‘i tÆ°á»£ng Paint trÆ°á»›c lÃ  khÃ¡ quan trá»ng, bá»Ÿi vÃ¬ phÆ°Æ¡ng thá»©c onDraw() Ä‘Æ°á»£c gá»i báº¥t cá»© khi nÃ o cáº§n váº½ láº¡i. VÃ¬ váº­y ta khÃ´ng táº¡o Ä‘á»‘i tÆ°á»£ng Paint bÃªn trong hÃ m onDraw(). KhÃ´ng nÃªn khá»Ÿi táº¡o cÃ¡c Ä‘á»‘i tÆ°á»£ng bÃªn trong onDraw() á» Ä‘Ã¢y chÃºng ta Ä‘á»‹nh nghÄ©a cÃ¡c Ä‘á»‘i tÆ°á»£ng ( má»™t cho arc, má»™t cho progress vÃ  cÃ²n láº¡i cho text) nhÆ° cÃ¡c biáº¿n instance vÃ  Ä‘Æ°á»£c khá»Ÿi táº¡o trong hÃ m init() : private void init(Context context, AttributeSet attrs) { \t// ... \t \tmArcPaint = new Paint(); \tmArcPaint.setColor(arcColor); \tmArcPaint.setAntiAlias(true); \tmArcPaint.setStyle(Paint.Style.STROKE); \tmArcPaint.setStrokeWidth(mArcWidth); \tmProgressPaint = new Paint(); \tmProgressPaint.setColor(progressColor); \tmProgressPaint.setAntiAlias(true); \tmProgressPaint.setStyle(Paint.Style.STROKE); \tmProgressPaint.setStrokeWidth(mProgressWidth); \tmTextPaint = new Paint(); \tmTextPaint.setColor(textColor); \tmTextPaint.setAntiAlias(true); \tmTextPaint.setStyle(Paint.Style.FILL); \tmTextPaint.setTextSize(mTextSize); } Khi Ä‘Ã£ xÃ¡c Ä‘á»‹nh Ä‘Æ°á»£c Ä‘á»‘i tÆ°á»£ng Paint, chÃºng ta cÃ³ thá»ƒ implement hÃ m onDraw(Canvas canvas) , á»Ÿ Ä‘Ã¢y ta sáº½ váº½ ra text vÃ  vÃ²ng cung hiá»ƒn thá»‹ giÃ¡ trá»‹ hiá»‡n táº¡i cá»§a seekbar : @Override protected void onDraw(Canvas canvas) { \tif (!mClockwise) { \t\tcanvas.scale(-1, 1, mArcRect.centerX(), mArcRect.centerY()); \t} \t// draw the text \tString textPoint = String.valueOf(mPoints); \tmTextPaint.getTextBounds(textPoint, 0, textPoint.length(), mTextRect); \t// center the text \tint xPos = canvas.getWidth() / 2 - mTextRect.width() / 2; \tint yPos = (int)((mArcRect.centerY()) - ((mTextPaint.descent() + mTextPaint.ascent()) / 2)); \tcanvas.drawText(String.valueOf(mPoints), xPos, yPos, mTextPaint); \t// draw the arc and progress \tcanvas.drawArc(mArcRect, ANGLE_OFFSET, 360, false, mArcPaint); \tcanvas.drawArc(mArcRect, ANGLE_OFFSET, mProgressSweep, false, mProgressPaint); \tif (mEnabled) { \t\t// draw the indicator icon \t\tcanvas.translate(mTranslateX - mIndicatorIconX, mTranslateY - mIndicatorIconY); \t\tmIndicatorIcon.draw(canvas); \t} } KhÃ¡ lÃ  á»•n rá»“i nhá»‰, sau khi @override onDraw(), cÃ³ má»™t phÆ°Æ¡ng thá»©c quan trá»ng khÃ¡c vá» váº½ Ä‘Ã³ lÃ  invalidate(). PhÆ°Æ¡ng thá»©c nÃ y Ä‘Æ°á»£c sá»­ dá»¥ng khi viá»‡c váº½ láº¡i lÃ  cáº§n thiáº¿t, ta khÃ´ng gá»i lÃ m onDraw() má»™t cÃ¡ch trá»±c tiáº¿p mÃ  chá»‰ gá»i phÆ°Æ¡ng thá»©c nÃ y thÃ´i. Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c nÃ y báº¥t cá»© Ä‘Ã¢u bÃªn trong custom view, tuy nhiÃªn Ä‘á»ƒ hiá»‡u nÄƒng tá»‘t nháº¥t, hÃ£y nhá»› ráº±ng chá»‰ gá»i nÃ³ khi cáº§n. 4. Touching Khi ngÆ°á»i dÃ¹ng cháº¡m vÃ o mÃ n hÃ¬nh, phÆ°Æ¡ng thá»©c onTouchEvent() sáº½ Ä‘Æ°á»£c gá»i, vÃ¬ váº­y ta cáº§n pháº£i @override View.onTouchEvent() Ä‘á»ƒ xá»­ lÃ½ cÃ¡c cá»­ chá»‰ cá»§a ngÆ°á»i dÃ¹ng : @Override public boolean onTouchEvent(MotionEvent event) { \tif (mEnabled) { \t\tthis.getParent().requestDisallowInterceptTouchEvent(true); \t\tswitch (event.getAction()) { \t\t\tcase MotionEvent.ACTION_DOWN: \t\t\t\tif (mOnSwagPointsChangeListener != null) \t\t\t\t\tmOnSwagPointsChangeListener.onStartTrackingTouch(this); \t\t\t\tupdateOnTouch(event); \t\t\t\tbreak; \t\t\tcase MotionEvent.ACTION_MOVE: \t\t\t\tupdateOnTouch(event); \t\t\t\tbreak; \t\t\tcase MotionEvent.ACTION_UP: \t\t\t\tif (mOnSwagPointsChangeListener != null) \t\t\t\t\tmOnSwagPointsChangeListener.onStopTrackingTouch(this); \t\t\t\tsetPressed(false); \t\t\t\tthis.getParent().requestDisallowInterceptTouchEvent(false); \t\t\t\tbreak; \t\t\tcase MotionEvent.ACTION_CANCEL: \t\t\t\tif (mOnSwagPointsChangeListener != null) \t\t\t\t\tmOnSwagPointsChangeListener.onStopTrackingTouch(this); \t\t\t\tsetPressed(false); \t\t\t\tthis.getParent().requestDisallowInterceptTouchEvent(false); \t\t\t\tbreak; \t\t} \t\treturn true; \t} \treturn false; } CÃ³ má»™t sá»‘ váº¥n Ä‘á» cáº§n pháº£i kiá»ƒm soÃ¡t khi ngÆ°á»i dÃ¹ng cháº¡m vÃ o biá»ƒu tÆ°á»£ng chá»‰ thá»‹ (indicator) hay cÃ¡c vÃ¹ng khÃ¡c cá»§a view : Cáº­p nháº­t láº¡i vá»‹ trÃ­ indicator vÃ  progress text Váº½ progress hiá»‡n táº¡i trÃªn cung Dá»«ng láº¡i khi Ä‘áº¡t max/min. Äá»ƒ biáº¿t vá»‹ trÃ­ cá»§a indicator icon vÃ  progress hiá»‡n táº¡i Ä‘á»ƒ váº½, ta cáº§n pháº£i chuyá»ƒn Ä‘á»•i tá»a Ä‘á»™ cháº¡m trÃªn mÃ n hÃ¬nh thÃ nh gÃ³c cung. Trong custom view nÃ y, ta sáº½ chá»n trung tÃ¢m cá»§a vÃ²ng cung lÃ m gá»‘c (0,0) vÃ  sá»­ dá»¥ng cÃ¡c hÃ m lÆ°á»£ng giÃ¡c Ä‘á»ƒ biáº¿n tá»a Ä‘á»™ cháº¡m thÃ nh gÃ³c cá»§a cung trÃ²n trong khoáº£ng (0,360), vÃ  map nÃ³ vá»›i giÃ¡ trá»‹ hiá»‡n táº¡i. Vá» cÆ¡ báº£n lÃ  nhÆ° sau : private double convertTouchEventPointToAngle(float xPos, float yPos) { \t// transform touch coordinate into component coordinate \tfloat x = xPos - mTranslateX; \tfloat y = yPos - mTranslateY; \tx = (mClockwise) ? x : -x; \tdouble angle = Math.toDegrees(Math.atan2(y, x) + (Math.PI / 2)); \tangle = (angle &lt; 0) ? (angle + 360) : angle; \treturn angle; } Káº¿t quáº£ Äáº©y mÃ£ nguá»“n lÃªn Github Sau khi hoÃ n thÃ nh dá»± Ã¡n. HÃ£y Ä‘áº©y nÃ³ lÃªn Github Ä‘á»ƒ cÃ³ nhiá»u developer hÆ¡n sá»­ dá»¥ng thÆ° viá»‡n cá»§a báº¡n. Tuy nhiÃªn, trÆ°á»›c khi share link Github tá»›i ngÆ°á»i khÃ¡c, hÃ£y cháº¯c cháº¯n ráº±ng báº¡n cÃ³ tÃ i liá»‡u Ä‘á»c tá»‘t trÆ°á»›c. Khi cÃ¡c developer nhÃ¬n vÃ o dá»± Ã¡n cá»§a báº¡n, cÃ³ má»™t sá»‘ Ä‘iá»ƒm mÃ  há» quan tÃ¢m : Dá»± Ã¡n nÃ y cÃ³ phÃ¹ há»£p yÃªu cáº§u cá»§a tÃ´i hay cÃ³ giáº£i quyáº¿t váº¥n Ä‘á» cá»§a tÃ´i Ä‘Æ°á»£c khÃ´ng ? Náº¿u cÃ¢u tráº£ lá»i lÃ  CÃ“, tÃ´i cÃ³ thá»ƒ báº¯t Ä‘áº§u nhÆ° tháº¿ nÃ o ? README Ä‘Ã³ng vai trÃ² quan trá»ng Ä‘á»ƒ táº¡o áº¥n tÆ°á»£ng vá»›i vá»›i cÃ¡c developer, vÃ¬ váº­y cáº§n cung cáº¥p nÃ³ lÃ  cáº§n thiáº¿t vÃ  táº¡o cÆ¡ há»™i tá»‘t Ä‘á»ƒ quáº£ng bÃ¡ dá»± Ã¡n cá»§a báº¡n. DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ tips : Cung cáº¥p Screenshot vÃ  Ä‘oáº¡n mÃ´ táº£ ngáº¯n. Cung cáº¥p hÆ°á»›ng dáº«n cÃ i Ä‘áº·t, sá»­ dá»¥ng dá»… dÃ ng. Xuáº¥t báº£n thÆ° viá»‡n cá»§a báº¡n Sau khi hoÃ n thÃ nh xong project cá»§a mÃ¬nh, báº¡n cÃ³ thá»ƒ xuáº¥t báº£n nÃ³ Ä‘á»ƒ cÃ¡c developer chá»‰ cáº§n thÃªm dependency Ä‘áº» sá»­ dá»¥ng, nÃ³ tÆ°Æ¡ng tá»± nhÆ° nÃ y : dependencies { ... compile 'com.dualcores.swagpoints:swagpoints:1.0.2' } 1. ÄÄƒng kÃ­ tÃ i khoáº£n hoáº·c Ä‘Äƒng nháº­p JFrog Bintray 2. Chuyá»ƒn sang trang cÃ¡ nhÃ¢n, táº¡o má»™t repository, package vÃ  version Repository lÃ  nÆ¡i lÆ°u trá»¯ má»™t sá»‘ dá»± Ã¡n cá»§a báº¡n. Báº¡n cÃ³ thá»ƒ chá»n báº¥t cá»© tÃªn repos nÃ o báº¡n muá»‘n, nÃ³ khÃ´ng áº£nh hÆ°á»›ng Ä‘áº¿n cÃ¡c nhÃ  phÃ¡t triá»ƒn khÃ¡c. BÃªn trong repository má»›i, táº¡o ra má»™t package, Ä‘Ã³ lÃ  nÆ¡i lÆ°u trá»¯ dá»± Ã¡n cá»§a báº¡n. Báº¡n cÃ³ thá»ƒ import tá»« Github. Äá»‘i vá»›i má»—i package, báº¡n cÃ³ thá»ƒ táº¡o má»™t vÃ i phiÃªn báº£n : 3. Táº¡o vÃ  táº£i lÃªn cÃ¡c tá»‡p aar Ta sáº½ sá»­ dá»¥ng gradle Ä‘á»ƒ lÃ m viá»‡c nÃ y, á»Ÿ Ä‘Ã¢y ta sá»­ dá»¥ng thÆ° viÃªn sau Ä‘á»ƒ há»— trá»£ : https://github.com/blundell/release-android-library Má»Ÿ tá»‡p gradle (module library), thÃªm Ä‘oáº¡n mÃ£ sau vÃ o pháº§n Ä‘uÃ´i cá»§a tá»‡p module build.gradle : // or use the remote copy to keep update with latest changes apply from: 'https://raw.githubusercontent.com/blundell/release-android-library/master/android-release-aar.gradle' VÃ  cáº¥u hÃ¬nh JCenter : ext { PUBLISH_GROUP_ID = 'com.dualcores.swagpoints' PUBLISH_ARTIFACT_ID = 'swagpoints' PUBLISH_VERSION = '1.0.0' } Tiáº¿p Ä‘Ã³, sync project vÃ  má»Ÿ terminal lÃªn, vÃ o Ä‘Æ°á»ng dáº«n gá»‘c cá»§a project vÃ  thá»±c hiá»‡n lá»‡nh : ./gradlew clean build generateRelease Náº¿u thÃ nh cÃ´ng, báº¡n sáº½ tháº¥y káº¿t quáº£ hiá»‡n lÃªn terminal vÃ  báº¡n cÃ³ thá»ƒ upload file .zip theo Ä‘Æ°á»ng dáº«n PROJECT_ROOT/library/build/release/1.0.0/ 4. ThÃªm vÃ o JCenter Quay trá»Ÿ láº¡i trang dá»± Ã¡n cá»§a báº¡n trong bintray, sáº½ cÃ³ má»™t nÃºt Add to JCenter á»Ÿ cá»™t bÃªn pháº£i, chá»‰ cáº§n click vÃ o Ä‘Ã³, Ä‘iá»n má»™t message vÃ  Ä‘á»£i Ä‘Æ°á»£c cháº¥p nháº­n. NÃ³ sáº½ máº¥t vÃ i giá» tháº­m chÃ­ lÃ  vÃ i ngÃ y Ä‘á»ƒ Ä‘Æ°á»£c cháº¥p nháº­n. BÆ°á»›c nÃ y lÃ  báº¯t buá»™c Ä‘á»ƒ Ä‘á»ƒ dá»± Ã¡n cá»§a báº¡n cÃ³ thá»ƒ cÃ³ thá»ƒ táº£i xuá»‘ng Ä‘Æ°á»£c Ä‘Æ°á»£c phÃ¡t hiá»‡n bá»Ÿi gradle dependencies. 5. Dá»± Ã¡n Ä‘Æ°á»£c cháº¥p nháº­n Báº¡n sáº½ nháº­n Ä‘Æ°á»£c email thÃ´ng bÃ¡o cho biáº¿t yÃªu cáº§u thÃªm thÆ° viá»‡n vÃ o Jcenter Ä‘Ã£ Ä‘Æ°á»£c cháº¥p nháº­n. Má»™t khi Ä‘Ã£ Ä‘Æ°á»£c cháº¥p nháº­n, hÃ£y kiá»ƒm tra gradle dependency hoáº¡t Ä‘á»™ng tá»‘t báº±ng cÃ¡ch thÃªm dependency vÃ o má»™t sample module vÃ  Ä‘á»“ng bá»™ nÃ³. Náº¿u build successfullly, thÃ¬ xin chÃºc má»«ng !!! Báº¡n lÃ m tá»‘t láº¯m :boom::boom::boom: compile 'com.dualcores.swagpoints:swagpoints:1.0.0' Káº¿t luáº­n Qua bÃ i viáº¿t nÃ y, hi vá»ng má»i ngÆ°á»i cÃ³ thá»ƒ hiá»ƒu Ä‘Æ°á»£c nhá»¯ng khÃ¡i niá»‡m cÆ¡ báº£n nháº¥t vá» custom view vÃ  cÃ¡ch xÃ¢y dá»±ng nÃ³. Cáº£m Æ¡n cÃ¡c báº¡n Ä‘Ã£ theo dÃµi bÃ i viáº¿t cá»§a mÃ¬nh :blush: TÃ i liá»‡u tham kháº£o : https://academy.realm.io/posts/360andev-huyen-tue-dao-measure-layout-draw-repeat-custom-views-and-viewgroups-android/ https://medium.com/dualcores-studio/make-an-android-custom-view-publish-and-open-source-99a3d86df228" }, { "title": "[Android] Clean architecture", "url": "/posts/android-clean-architecture/", "categories": "Android", "tags": "android, clean architecture, kotlin, mvvm", "date": "2020-02-01 14:15:03 +0000", "content": "Giá»›i thiá»‡u Viá»‡c xÃ¢y dá»±ng 1 kiáº¿n trÃºc ná»n tá»‘t tháº­t sá»± quan trá»ng cho á»©ng dá»¥ng Ä‘á»ƒ scale lÃªn má»™t cÃ¡ch Ä‘Æ¡n giáº£n. TrÆ°á»›c Ä‘Ã¢y thÃ¬ mÃ¬nh cá»±c kÃ¬ khÃ´ng thÃ­ch tháº±ng clean nÃ y Ä‘Æ¡n giáº£n vÃ¬ nÃ³ pháº£i code nhiá»u quÃ¡. NhÆ°ng khi lÃ m viá»‡c vá»›i cÃ¡c dá»± Ã¡n cá»¡ vá»«a vÃ  lÆ¡n thÃ¬ báº¡n sáº½ tháº¥y nÃ³ tháº­t sá»± há»¯u á»‹ch Trong bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ tÃ¬m hiá»ƒu vÃ  â€œthÃ­châ€ nÃ³ nhÃ©. Clean architecture ? Clean architecture hay cÃ²n gá»i lÃ  kiáº¿n trÃºc sáº¡ch Ä‘Æ°á»£c Ä‘á» xuáº¥t vÃ o nÄƒm 2012 bá»Ÿi Robert C. Martin. Clean Architecture dá»±a trÃªn cÃ¡c khÃ¡i niá»‡m, quy táº¯c, vÃ  mÃ´ hÃ¬nh ná»•i tiáº¿ng, giáº£i thÃ­ch lÃ m tháº¿ nÃ o Ä‘á»ƒ káº¿t há»£p chÃºng vá»›i nhau, Ä‘á»ƒ Ä‘á» xuáº¥t cÃ¡ch xÃ¢y dá»±ng cÃ¡c á»©ng dá»¥ng chuáº©n. HÃ£y Ä‘á»c bÃ i viáº¿t nÃ y Ä‘á»ƒ hiá»ƒu hÆ¡n vá», náº¿u khÃ´ng báº¡n cÃ³ thá»ƒ táº©u há»a nháº­p ma Ä‘áº¥y. Why ? Táº¡i sao láº¡i tiáº¿p cáº­n theo hÆ°á»›ng kiáº¿n trÃºc sáº¡ch ? TÃ¡ch biá»‡t hoÃ n toÃ n cÃ¡c táº§ng (layer) vá»›i nhau vá»›i nhiá»‡m vá»¥ riÃªng biá»‡t giÃºp cho viá»‡c chá»‰nh sá»­a dá»… dÃ ng hÆ¡n. TÄƒng tÃ­nh trá»«u tÆ°á»£ng TrÃ¡nh rÃ ng buá»™c Dá»… dÃ ng kiá»ƒm thá»­ Layers ? Domain Layer : chá»‹u trÃ¡ch nhiá»‡m thá»±c thi cÃ¡c logic Ä‘á»™c láº­p vá»›i cÃ¡c layer khÃ¡c. Layer nÃ y chá»‰ bao gá»“m cÃ¡c mÃ£ kotlin thuáº§n tÃºy, khÃ´ng bao gá»“m sá»± phá»¥ nÃ o cá»§a Android Framework á»Ÿ Ä‘Ã¢y. Data Layer : chá»‹u trÃ¡ch nhiá»‡m phÃ¢n chia data cáº§n thiáº¿t cho app báº±ng cÃ¡ch implement cÃ¡c interface Ä‘Æ°á»£c phÃ¡t ra tá»« táº§ng domain. Presenter Layer : chá»©a cáº£ Domain vÃ  Data layer, chá»‹u trÃ¡ch nhiá»‡m thá»±c thi cÃ¡c logic giao diá»‡n. What is Domain layer ? Domain lÃ  táº§ng chung nháº¥t trong 3 táº§ng. NÃ³ sáº½ káº¿t ná»‘i táº§ng presenter vá»›i táº§ng data. ÄÃ¢y lÃ  táº§ng nÆ¡i cÃ¡c business logic cá»§a á»©ng dá»¥ng Ä‘Æ°á»£c thá»±c thi. UseCases ÄÃ³ng gÃ³i vÃ  thá»±c hiá»‡n cÃ¡c case cá»§a há»‡ thá»‘ng theo Ä‘Ãºng cÃ¡i tÃªn cá»§a nÃ³. Má»—i usecase thÆ°á»ng sáº½ mÃ´ táº£ má»™t chá»©c nÄƒng riÃªng biá»‡t. class GetNewsUseCase(private val transformer: FlowableRxTransformer&lt;NewsSourcesEntity&gt;, private val repositories: NewsRepository): BaseFlowableUseCase&lt;NewsSourcesEntity&gt;(transformer){ override fun createFlowable(data: Map&lt;String, Any&gt;?): Flowable&lt;NewsSourcesEntity&gt; { return repositories.getNews() } fun getNews(): Flowable&lt;NewsSourcesEntity&gt;{ val data = HashMap&lt;String, String&gt;() return single(data) } } Repositories Repo lÃ  nÆ¡i lÆ°u trá»¯, chá»‰ Ä‘á»‹nh cÃ¡c chá»©c nÄƒng Ä‘Æ°á»£c yÃªu cáº§u tÆ°Æ¡ng á»©ng vá»›i cÃ¡c usecase chá»‰ Ä‘á»‹nh. interface NewsRepository { fun getNews(): Flowable&lt;NewsSourcesEntity&gt; fun getLocalNews(): Flowable&lt;NewsSourcesEntity&gt; fun getRemoteNews(): Flowable&lt;NewsSourcesEntity&gt; } What is Data Layer ? Táº§ng data cÃ³ trÃ¡ch nhiá»‡m cung cáº¥p dá»¯ liá»‡u Ä‘Æ°á»£c yÃªu cáº§u bá»Ÿi á»©ng dá»¥ng. Táº§ng data pháº£i Ä‘Æ°á»£c thiáº¿t káº¿ sao cho dá»¯ liá»‡u cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng láº¡i á»Ÿ báº¥t kÃ¬ á»©ng dá»¥ng nÃ o mÃ  khÃ´ng cáº§n sá»­a Ä‘á»•i logic cá»§a táº§ng Presentation. api cung cáº¥p cÃ¡c network interface. db cung cáº¥p cÃ¡c local database interface. repository nhiá»‡m vá»¥ implement dá»¯ liá»‡u tá»« local, remote. class NewsRepositoryImpl(private val remote: NewsRemoteImpl, private val cache: NewsCacheImpl) : NewsRepository { override fun getLocalNews(): Flowable&lt;NewsSourcesEntity&gt; { return cache.getNews() } override fun getRemoteNews(): Flowable&lt;NewsSourcesEntity&gt; { return remote.getNews() } override fun getNews(): Flowable&lt;NewsSourcesEntity&gt; { val updateNewsFlowable = remote.getNews() return cache.getNews() .mergeWith(updateNewsFlowable.doOnNext{ remoteNews -&gt; cache.saveArticles(remoteNews) }) } } Repositories hoáº¡t Ä‘á»™ng nhÆ° 1 Ä‘iá»ƒm truy cáº­p duy nháº¥t tá»›i data layer. What is the Presentation layer? Presentation layer cung cáº¥p giao diá»‡n ngÆ°á»i dÃ¹ng cá»§a á»©ng dá»¥ng. ÄÃ¢y lÃ  layer cÃ¢m chá»‰ thá»±c hiá»‡n lá»‡nh mÃ  khÃ´ng bao gá»“m logic trong Ä‘Ã³, káº¿t ná»‘i má»i thá»© vá»›i nhau. Presentation cÃ³ thá»ƒ triá»ƒn khai theo cÃ¡c pattern khÃ¡c nhau nhÆ° MVC, MVP, MVVM, MVIâ€¦ Folder di cung cáº¥p táº¥t cáº£ cÃ¡c phá»¥ thuá»™c tá»« khi báº¯t Ä‘Ã u khá»Ÿi Ä‘á»™ng á»©ng dá»¥ng cho Ä‘áº¿n khi káº¿t thÃºc. Trong android, DI cÃ³ thá»ƒ implement báº±ng dagger, kodein, koin hay tá»± xÃ¢y dá»±ng theo service locator pattern. Táº¡i sao nÃªn dÃ¹ng ViewModels ? Trong tÃ i liá»‡u mÃ´ táº£ android cÃ³ Ä‘á» cáº­p Ä‘áº¿n ViewModel nhÆ° sau: Store and manage UI-related data in a lifecycle conscious way. It allows data to survive configuration changes such as screen rotations. class NewsViewModel(private val getNewsUseCase: GetNewsUseCase, private val mapper: Mapper&lt;NewsSourcesEntity, NewsSources&gt;) : BaseViewModel() { companion object { private val TAG = \"viewmodel\" } var mNews = MutableLiveData&lt;Data&lt;NewsSources&gt;&gt;() fun fetchNews() { val disposable = getNewsUseCase.getNews() .flatMap { mapper.Flowable(it) } .subscribe({ response -&gt; Log.d(TAG, \"On Next Called\") mNews.value = Data(responseType = Status.SUCCESSFUL, data = response) }, { error -&gt; Log.d(TAG, \"On Error Called\") mNews.value = Data(responseType = Status.ERROR, error = Error(error.message)) }, { Log.d(TAG, \"On Complete Called\") }) addDisposable(disposable) } fun getNewsLiveData() = mNews } Viá»‡c chuyá»ƒn Ä‘á»•i data tá»« usecase sang UI thÃ´ng qua ViewModel cÃ³ thá»ƒ giá»¯ láº¡i dá»¯ liá»‡u ngay cáº£ khi cÃ³ configuration change. ViewModel Ä‘Æ°á»£c tÃ­ch há»£p sáºµn life aware components How all the layers are connected? Sau khi Ä‘Ã£ hiá»ƒu nhiá»‡m vá»¥ cá»§a cÃ¡c layer, giá» thÃ¬ mÃ¬nh sáº½ ghÃ©p ná»‘i láº¡i xem cÃ¡c layer connect vá»›i nhau nhÆ° nÃ o nhÃ©. Má»—i layer cÃ³ cÃ¡c entities riÃªng Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh riÃªng. Mapper Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ chuyá»ƒn Ä‘á»•i cÃ¡c entities tá»« layer nÃ y qua layer khÃ¡c. Viá»‡c xÃ¢y dá»±ng cÃ¡c entities riÃªng biá»‡t cho cÃ¡c layer giÃºp nÃ³ trá»Ÿ nÃªn hoÃ n toÃ n Ä‘á»™c láº­p vÃ  chá»‰ cÃ³ dá»¯ liá»‡u cáº§n thiáº¿t má»›i chuyá»ƒn sang layer tiáº¿p theo. Conclusion Hi vá»ng qua bÃ i viáº¿t cÃ¡c báº¡n cÃ³ thá»ƒ hiá»ƒu Ä‘Æ°á»£c cÆ¡ báº£n vá» clean architecture cÅ©ng nhÆ° flow cá»§a nÃ³. Má»i ngÆ°á»i cÃ³ thá»ƒ xem qua sample táº¡i Ä‘Ã¢y. Happy coding !!! References Kotlin clean architecture Clean coder blog" }, { "title": "[Tips & Trick] Android Studio shortcuts", "url": "/posts/android-studio-shortcut/", "categories": "Android", "tags": "android, tips, as, android studio", "date": "2019-10-10 14:15:03 +0000", "content": "Introduction Hi ae, hÃ´m nay mÃ¬nh sáº½ chia sáº» má»™t vÃ i phÃ­m táº¯t há»¯u Ã­ch khi láº­p trÃ¬nh vá»›i Android Studio. Náº¿u muá»‘n tá»± Ä‘á»c vá» Ä‘á»‘ng shortcuts thÃ¬ báº¡n chá»‰ cáº§n check trong Preferences &gt; Keymap 1. Clipboard history Äá»ƒ má»Ÿ lá»‹ch sá»­ clipboard cá»§a báº¡n : CMD + SHIFT + V Popup sáº½ bao gá»“m danh sÃ¡ch lá»‹ch sá»­ mÃ  báº¡n clipboard láº¡i, Ä‘á»¡ máº¥t cÃ´ng pháº£i paste vÃ o Ä‘Ã¢u Ä‘Ã³ pháº£i khÃ´ng ? :D 2. Last used files Äá»ƒ má»Ÿ popup danh sÃ¡ch nhá»¯ng file báº¡n Ä‘Ã£ xem gáº§n nháº¥t : CMD + E 3. Last used files with preview =&gt; CMD + SHIFT + E \u001dThay vÃ¬ chá»‰ hiá»ƒn thá»‹ danh sÃ¡ch cÃ¡c file Ä‘Ã£ má»Ÿ gáº§n nháº¥t nhÆ° #2 thÃ¬ sáº½ hiá»ƒn thá»‹ cÃ¹ng vá»›i preview vÃ¹ng mÃ  báº¡n Ä‘Ã£ trá» vÃ o cuá»‘i cÃ¹ng á»Ÿ cÃ¡c file. Preview hiá»ƒn thá»‹ Ä‘Æ°á»£c tá»‘i Ä‘a 5 dÃ²ng cho má»—i file. 4. Search PhÃ­m táº¯t khÃ¡ phá»• biáº¿n pháº£i khÃ´ng :D Äá»ƒ má»Ÿ popup Search All chá»‰ cáº§n nhÃ¡y Ä‘Ãºp : SHIFT x2 Chá»n Tab sau Ä‘Ã³ Ä‘á»ƒ di chuyá»ƒn sang cÃ¡c tab khÃ¡c náº¿u báº¡n khÃ´ng muá»‘n nhá»› phÃ­m táº¯t cho Ä‘á»‘ng cÃ²n láº¡i. Náº¿u cáº§n thÃ¬ bÃªn dÆ°á»›i Ä‘Ã£ cÃ³ : Search class : CMD + O Search File : CMD + SHIFT + O Search symbol : CMD + ALT + O Search action : CMD + SHIFT + A 5. Find Everywhere =&gt; CMD + SHIFT + F CÅ©ng lÃ  tÃ¬m kiáº¿m nhÆ°ng theo dáº¡ng tÃ¬m kiáº¿m vÄƒn báº£n Ä‘Æ¡n thuáº§n. Báº¡n cÃ³ thá»ƒ thu háº¹p pháº¡m vi tÃ¬m theo bá»™ Filter. 6. Run Äá»ƒ cháº¡y project vá»›i config Ä‘Ã£ chá»n : CTRL + R 7. Jump to first / last \u001dfile Äá»ƒ nháº£y tá»›i vá»‹ trÃ­ Ä‘áº§u hoáº·c cuá»‘i file : CMD + âŒ¥ + &lt; / &gt; 8. Jump to last Edit Äá»ƒ di chuyá»ƒn Ä‘áº¿n vá»‹ trÃ­ chá»‰nh sá»­a cuá»‘i cÃ¹ng : CMD + SHIFT + BACKSPACE 9. Check cursor history =&gt; CMD + { Di chuyá»ƒn Ä‘áº¿n nhá»¯ng nÆ¡i con trá» Ä‘Ã£ trá» Ä‘áº¿n gáº§n nháº¥t. PhÃ­m táº¯t khÃ¡ há»¯u Ã­ch khi báº¡n Ä‘ang dÃ² debug mÃ  muá»‘n back láº¡i cháº³ng háº¡n :D 10. Fast selection =&gt; âŒ¥ + ARROW_UP PhÃ­m táº¯t mÃ¬nh ráº¥t hay dÃ¹ng Ä‘á»ƒ select má»™t vÃ¹ng code. NÃ³ sáº½ chá»n vÃ¹ng bao con trá» theo cÃ¡c block lá»›n dáº§n. 11. Move functions Äá»ƒ di chuyá»ƒn cÃ¡c function tá»›i trÆ°á»›c / sau cÃ¡c khá»‘i khÃ¡c : CMD + SHIFT + ARROW UP/DOWN 12. Move line by line Náº¿u chá»‰ cáº§n di chuyá»ƒn vá»‹ trÃ­ code theo dÃ²ng : âŒ¥ + SHIFT + ARROW UP/DOWN 13. Duplicate code Äá»ƒ táº¡o báº£n sao cá»§a line Ä‘ang trá» Ä‘áº¿n hoáº·c cáº£ khá»‘i code Ä‘ang chá»n : CMD + D 14. Multi Selection TÃ­nh nÄƒng Æ°a thÃ­ch cá»§a mÃ¬nh má»—i khi pháº£i sá»­a má»™t Ä‘á»‘ng line liá»n ká» nhau vá»›i cÃ¹ng má»™t ná»™i dung. CÃ³ 2 cÃ¡ch Ä‘á»ƒ lÃ m : Giá»¯ phÃ­m âŒ¥ + giá»¯ chuá»™t trÃ¡i Ä‘á»ƒ chá»n vÃ¹ng cáº§n sá»­a. Click duplicate âŒ¥ . Láº§n click thá»© 2 giá»¯ phÃ­m âŒ¥ + dÃ¹ng phÃ­m mÅ©i tÃªn Ä‘á»ƒ chá»n vÃ¹ng sá»­a. 15. Extract TÃ¡ch khá»‘i code Ä‘Ã£ chá»n thÃ nh cÃ¡c function, variable, paramsâ€¦ 2 tháº±ng hay Ä‘Æ°á»£c dÃ¹ng nháº¥t : Extract variable : âŒ¥ + \u001eCMD + V Extract function : âŒ¥ + CMD + M 16. Refactor Náº¿u báº¡n muá»‘n má»Ÿ menu refactor file hay code : Control âŒƒ + T 17. Surround =&gt; âŒ¥ + CMD + T PhÃ­m táº¯t giÃºp táº¡o bao ngoÃ i cho vÃ¹ng select. VÃ­ dá»¥ nhÆ° try/catch, if/else, regionâ€¦ 18. Parameters =&gt; CMD + P Khi sá»­ dá»¥ng 1 function mÃ  quÃªn máº¥t nÃ³ cáº§n params gÃ¬, thá»© tá»± ra saoâ€¦ Conclution Hi vá»ng Ä‘á»‘ng shortcut trÃªn sáº½ giÃºp ae dev nhanh hÆ¡n nhiá»u. Happy coding :D References Android studio shortcuts" }, { "title": "[RxJava] Error Handing", "url": "/posts/rxjava-error-handling/", "categories": "Android", "tags": "android, rxjava", "date": "2019-08-14 14:15:03 +0000", "content": "Introduction Hi ae, trong bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ cÃ¹ng cÃ¡c báº¡n tÃ¬m hiá»ƒu vá» cÃ¡ch xá»­ lÃ½ lá»—i trong RxJava. Äáº§u tiÃªn, hÃ£y nhá»› ráº±ng Observable thÆ°á»ng khÃ´ng nÃ©m ra ngoáº¡i lá»‡. Thay vÃ o Ä‘Ã³ nÃ³ thÃ´ng bÃ¡o cho cÃ¡c observers ráº±ng cÃ³ lá»—i Ä‘Ã£ xáº£y ra báº±ng cÃ¡ch báº¯n callback onError()sau Ä‘Ã³ sáº½ thoÃ¡t khá»i luá»“ng mÃ  khÃ´ng gá»i thÃªm báº¥t kÃ¬ phÆ°Æ¡ng thá»©c nÃ o cá»§a observer. Khi xáº£y ra lá»—i, ta thÆ°á»ng cáº§n xá»­ lÃ½ nÃ³ theo má»™t cÃ¡ch nÃ o Ä‘Ã³. VÃ­ dá»¥ thay Ä‘á»•i tráº¡ng thÃ¡i cá»§a cÃ¡c Ä‘á»‘i tÆ°á»£ng liÃªn quan, tiáº¿p tá»¥c chuá»—i vá»›i giÃ¡ trá»‹ máº·c Ä‘á»‹nh hoáº·c chá»‰ Ä‘Æ¡n giáº£n lÃ  ká»‡ cho lá»—i xáº£y raâ€¦ HÃ£y cÃ¹ng Ä‘i qua cÃ¡c operator sau nhÃ© : doOnError onErrorComplete onErrorResumeNext onErrorReturn onErrorReturnItem retry doOnError Observable.error&lt;Any&gt;(IOException(\"Something went wrong\")) .doOnError { error: Throwable -&gt; println(\"The error message is: \" + error.message) } .subscribe({ println(\"onNext should never be printed!\") }, { println(\"onError: \" + it.message) }, { println(\"onComplete should never be printed\") }) // The error message is: Something went wrong // onError Something went wrong Vá»›i doOnError() ta cÃ³ thá»ƒ gá»i báº¥t kÃ¬ hÃ nh Ä‘á»™ng nÃ o cáº§n thiáº¿t khi cÃ³ lá»—i. onError() váº«n Ä‘Æ°á»£c báº¯n ra. Hoáº¡t Ä‘á»™ng vá»›i : Flowable, Observable, Maybe, Single, Completable onErrorComplete Completable.fromAction { throw IOException() } .onErrorComplete() .subscribe( { println(\"IOException was ignored, onComplete still being called\") }, { error : Throwable? -&gt; println(\"onError should not be printed!\") } ) // IOException was ignored, onComplete still being called Vá»›i onErrorComplete(), khi xáº£y ra lá»—i nÃ³ sáº½ cháº·n thÃ´ng bÃ¡o tá»« onError() vÃ  thay tháº¿ báº±ng má»™t sá»± kiá»‡n hoÃ n thÃ nh. Hoáº¡t Ä‘á»™ng vá»›i : Completable onErrorResumeNext Observable.just(1, 2, 3, 4, 5) .doOnNext { if (it == 3) throw RuntimeException(\"Exception on 3\") } .onErrorResumeNext(Observable.just(-1, -2)) .subscribe({ println(\"Value : $it\") }, { error : Throwable -&gt; println(\"onError should not be called\") }) // Value : 1 // Value : 2 // Value : -1 // Value : -2 Vá»›i onErrorResumeNext(), nÃ³ sáº½ xá»­ lÃ½ item trÆ°á»›c khi Ä‘i tá»›i onError() bá»Ÿi váº­y onError sáº½ khÃ´ng Ä‘Æ°á»£c gá»i. onErrorResumeNext() sáº½ replace stream hiá»‡n táº¡i vá»›i stream má»›i táº¡i thá»i Ä‘iá»ƒm xáº£y ra lá»—i, vÃ¬ váº­y cÃ¡c item 4,5 khÃ´ng Ä‘Æ°á»£c phÃ¡t. Hoáº¡t Ä‘á»™ng vá»›i : Flowable, Observable, Maybe, Single, Completable onErrorReturn Observable.just(\"1\", \"2\", \"x\", \"xxx\") .map { v -&gt; Integer.parseInt(v) } .onErrorReturn { error: Throwable? -&gt; if (error is NumberFormatException) return@onErrorReturn -1 else throw IllegalArgumentException() } .subscribe({ println(\"Number : $it\") }, { println(\"onError should not be printed\") }) // Number : 1 // Number : 2 // Number : -1 onErrorReturn() báº¯n ra item Ä‘Æ°á»£c tráº£ vá» bá»Ÿi io.reactivex.functions.Function trong block khi gáº·p lá»—i. Hoáº¡t Ä‘á»™ng vá»›i : Flowable, Observable, Maybe, Single onErrorReturnItem Single.just(\"2A\") .map { v: String -&gt; v.toInt(10) } .onErrorReturnItem(0) .subscribe( { x: Int? -&gt; println(x) } ) { error: Throwable? -&gt; System.err.println(\"onError should not be printed!\") } TÆ°Æ¡ng tá»± onErrorReturn(), nhÆ°ng sáº½ báº¯n ra item cá»¥ thá»ƒ ngay khi gáº·p lá»—i. Hoáº¡t Ä‘á»™ng vá»›i : Flowable, Observable, Maybe, Single retry Observable.just(1, 2, 3, 4) .doOnNext { if (it == 3) throw RuntimeException(\"Exception on 3\") } .retry(2) .subscribe({ println(\"Value : $it\") }, { error : Throwable -&gt; println(\"Errors can occur due to retry failed\") }) // Value : 1 // Value : 2 // Value : 1 // Value : 2 // Value : 1 // Value : 2 // Errors can occur due to retry failed retry() lÃ  má»™t trong nhá»¯ng cÃ¡ch xá»­ lÃ½ lá»—i. NÃ³ chá»‰ Ä‘Æ¡n giáº£n lÃ  cá»‘ gáº¯ng Ä‘Äƒng kÃ­ láº¡i Observable trÆ°á»›c. HÃ£y cáº©n tháº­n khi sá»­ dá»¥ng toÃ¡n tá»­ nÃ y, náº¿u báº¡n khÃ´ng xÃ¡c Ä‘á»‹nh sá»‘ láº§n retry, cÃ³ thá»ƒ nÃ³ sáº½ rÆ¡i vÃ o vÃ²ng láº·p vÃ´ thá»i háº¡n. Hoáº¡t Ä‘á»™ng vá»›i : Flowable, Observable, Maybe, Single, Completable Conclusion ChÃºc cÃ¡c báº¡n coding vui váº» :wink:" }, { "title": "[RxJava] Combining Observables", "url": "/posts/combine-observables/", "categories": "Android", "tags": "android, rxjava", "date": "2019-08-11 14:15:03 +0000", "content": "Combining Observables Trong bÃ i viáº¿t nÃ y mÃ¬nh sáº½ cÃ¹ng Ä‘i qua cÃ¡c toÃ¡n tá»­ káº¿t há»£p trong Rx thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ xem cÃ¡ch chÃºng hoáº¡t Ä‘á»™ng nhÃ©. startWith merge mergeDelayError combineLastest zip startWith ToÃ¡n tá»­ startWith phÃ¡t ra item Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh trÆ°á»›c khi báº¯t Ä‘áº§u phÃ¡t cÃ¡c item tá»« Observable. Hoáº¡t Ä‘á»™ng vá»›i : Flowable, Observable Observable&lt;String&gt; names = Observable.just(\"Spock\", \"McCoy\"); names.startWith(\"Kirk\").subscribe(item -&gt; System.out.println(item)); // Output : Kirk, Spock, McCoy merge ToÃ¡n tá»­ merge Káº¿t há»£p cÃ¡c Observable láº¡i vá»›i nhau thÃ nh má»™t báº±ng cÃ¡ch há»£p cÃ¡c emit cá»§a chÃºng láº¡i. Hoáº¡t Ä‘á»™ng vá»›i : Flowable, Observable, Maybe, Single, Completable Náº¿u báº¥t kÃ¬ source nÃ o trong chuá»—i xáº£y ra lá»—i, onError() sáº½ Ä‘Æ°á»£c báº¯n ra ngay vÃ  observable sáº½ bá»‹ terminate. Observable.just(1, 2, 3) .mergeWith(Observable.just(4, 5, 6)) .subscribe(item -&gt; System.out.println(item)); // Output : 1, 2, 3, 4, 5, 6 mergeDelayError TÆ°Æ¡ng tá»± vá»›i merge, mergeDelayError cÅ©ng káº¿t há»£p cÃ¡c Observable láº¡i vá»›i nhau thÃ nh má»™t báº±ng cÃ¡ch há»£p cÃ¡c emit cá»§a chÃºng láº¡i. Náº¿u báº¥t kÃ¬ source nÃ o trong chuá»—i xáº£y ra lá»—i, onError() sáº½ Ä‘Æ°á»£c giá»¯ láº¡i cho Ä‘áº¿n khi quÃ¡ trÃ¬nh merge hoÃ n thÃ nh. ÄÃ¢y chÃ­nh lÃ  Ä‘iá»ƒm khÃ¡c biá»‡t so vá»›i toÃ¡n tá»­ merge. Hoáº¡t Ä‘á»™ng vá»›i : Flowable, Observable, Maybe, Single, Completable Observable&lt;String&gt; observable1 = Observable.error(new IllegalArgumentException(\"\")); Observable&lt;String&gt; observable2 = Observable.just(\"Four\", \"Five\", \"Six\"); Observable.mergeDelayError(observable1, observable2) .subscribe(item -&gt; System.out.println(item)); // emits 4, 5, 6 and then the IllegalArgumentException (in this specific // example, this throws an `OnErrorNotImplementedException`). zip ToÃ¡n tá»­ zip káº¿t há»£p táº­p cÃ¡c item Ä‘Æ°á»£c phÃ¡t ra bá»Ÿi 2 hay nhiá»u Observable láº¡i thÃ´ng qua má»™t function chá»‰ Ä‘á»‹nh vÃ  phÃ¡t ra cÃ¡c item dá»±a trÃªn káº¿t quáº£ cá»§a function nÃ y. zip phÃ¡t lÆ°á»£ng item báº±ng lÆ°á»£ng item Ä‘Æ°á»£c phÃ¡t ra bá»Ÿi source phÃ¡t Ã­t item nháº¥t. Hoáº¡t Ä‘á»™ng vá»›i : Flowable, Observable, Maybe, Single Observable&lt;String&gt; firstNames = Observable.just(\"A\", \"B\", \"C\"); Observable&lt;String&gt; lastNames = Observable.just(\"1\", \"2\", \"3\"); firstNames.zipWith(lastNames, (first, last) -&gt; first + \" \" + last) .subscribe(item -&gt; System.out.println(item)); // Output: A 1, B 2, C 3 combineLatest Khi má»™t item Ä‘Æ°á»£c phÃ¡t ra bá»Ÿi má»™t trong 2 source, nÃ³ sáº½ káº¿t há»£p vá»›i item cuá»‘i cÃ¹ng Ä‘Æ°á»£c phÃ¡t bá»Ÿi source cÃ²n láº¡i thÃ´ng qua function chá»‰ Ä‘á»‹nh vÃ  sáº½ phÃ¡t ra item dá»±a trÃªn káº¿t quáº£ cá»§a function nÃ y. Hoáº¡t Ä‘á»™ng vá»›i : Flowable, Observable Observable&lt;Long&gt; newsRefreshes = Observable.interval(100, TimeUnit.MILLISECONDS); Observable&lt;Long&gt; weatherRefreshes = Observable.interval(50, TimeUnit.MILLISECONDS); Observable.combineLatest(newsRefreshes, weatherRefreshes, (newsRefreshTimes, weatherRefreshTimes) -&gt; \"Refreshed news \" + newsRefreshTimes + \" times and weather \" + weatherRefreshTimes) .subscribe(item -&gt; System.out.println(item)); // prints: // Refreshed news 0 times and weather 0 // Refreshed news 0 times and weather 1 // Refreshed news 0 times and weather 2 // Refreshed news 1 times and weather 2 // Refreshed news 1 times and weather 3 // Refreshed news 1 times and weather 4 // Refreshed news 2 times and weather 4 // Refreshed news 2 times and weather 5 // ... Conclusion ChÃºc ae coding vui váº» :trollface: :trollface: :trollface:" }, { "title": "[RxJava] Code gá»n gÃ ng hÆ¡n vá»›i doOnSubscribe, doFinally vÃ  doOnTerminate", "url": "/posts/rxjava-shorten-code-with-do-on/", "categories": "Android", "tags": "android, rxjava", "date": "2019-08-10 14:15:03 +0000", "content": "Introduction LÃ  1 fan cá»§a RxJava, khi sá»­ dá»¥ng tÃ´i nháº­n tháº¥y ráº±ng ráº¥t nhiá»u trÆ°á»ng há»£p sá»­ dá»¥ng vá»›i RxJava tuÃ¢n theo cÃ¹ng má»™t flow tá»« viá»‡c setup Ä‘áº¿n khi káº¿t thÃºc logic. Má»™t usecase phá»• biáº¿n lÃ  táº£i dá»¯ liá»‡u lÃªn mÃ n hÃ¬nh nhÆ° sau: Hiá»ƒn thá»‹ tráº¡ng thÃ¡i Ä‘ang Loading. Táº£i dá»¯ liá»‡u Khi dá»¯ liá»‡u Ä‘Æ°á»£c táº£i thÃ nh cÃ´ng rá»“i thÃ¬ áº©n tráº¡ng thÃ¡i loading Ä‘i vÃ  cáº­p nháº­t UI. Hoáº·c khi cÃ³ lá»—i xáº£y ra, áº©n tráº¡ng thÃ¡i loading Ä‘i vÃ  hiá»ƒn thá»‹ lá»—i. OK, váº­y khi thá»ƒ hiá»‡n trong code nÃ³ sáº½ nhÆ° nÃ o ? fun getDataFromServer() { \t view.showLoadingIndicator(); loadFromServer() .compose(applySchedulers()) .subscribe(data -&gt; { view.hideLoadingIndicator(); view.showData(data); }, error -&gt; { view.hideLoadingIndicator(); view.showError(error); }); loadData() } CÃ³ láº½ báº¡n Ä‘Ã£ phÃ¡t hiá»‡n ra Ä‘iá»u gÃ¬ Ä‘Ã³ rá»“i chá»©, view.hideLoadingIndicator() bá»‹ gá»i 2 láº§n. CÃ³ thá»ƒ báº¡n tháº¥y Ä‘iá»u nÃ y khÃ´ng quÃ¡ lÃ  váº¥n Ä‘á» nhÆ°ng Ä‘Ã¢y má»›i chá»‰ lÃ  vÃ­ dá»¥ Ä‘Æ¡n giáº£n mÃ  viá»‡c hideLoading Ä‘Ã£ bá»‹ duplicate, vá»›i nhá»¯ng trÆ°á»ng há»£p phá»©c táº¡p hÆ¡n, viá»‡c hideLoading sáº½ pháº£i gá»i nhiá»u láº§n trong chuá»—i. CÃ³ 2 lÃ½ do khiáº¿n mÃ¬nh khÃ´ng thÃ­ch Ä‘iá»u nÃ y : view.showLoadingIndicator() bá»‹ out khá»i chuá»—i máº·c dÃ¹ nÃ³ Ä‘Æ°á»£c gáº¯n vá»›i logic. Pháº§n logic xá»­ lÃ½ lá»—i láº¡i chá»©a code khÃ´ng xá»­ lÃ½ lá»—i. How to resolve ? Trong pháº§n nÃ y, mÃ¬nh muá»‘n giá»›i thiá»‡u 3 toÃ¡n tá»­ tiá»‡n lá»£i giÃºp cho code trá»Ÿ lÃªn clean hÆ¡n : doOnSubscribe() : sá»­a Ä‘á»•i nguá»“n source Ä‘á»ƒ nÃ³ gá»i action Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh ngay khi Ä‘Æ°á»£c subscribe. doOnTerminate() : gá»i action Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh ngay trÆ°á»›c khi Observable thÃ´ng bÃ¡o onError() hoáº·c onCompleted() doAfterTerminate() : gá»i hÃ nh Ä‘á»™ng Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh ngay sau khi Observable rÆ¡i vÃ o onError() hoáº·c onCompleted() doFinally() : gá»i hÃ nh Ä‘á»™ng Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh sau khi Observable rÆ¡i vÃ o onError() hoáº·c onCompleted() hoáº·c bá»‹ disposed bá»Ÿi downstream. Ãp dá»¥ng nhá»¯ng Ä‘iá»u nÃ y cho vÃ­ dá»¥ trÃªn, káº¿t quáº£ sáº½ nhÆ° sau : fun getDataFromServer() { loadFromServer() .compose(applySchedulers()) .doOnSubscribe(__ -&gt; view.showLoadingIndicator()) .doOnTerminate(() -&gt; view.hideLoadingIndicator()) .subscribe(data -&gt; { view.showData(data); }, error -&gt; { view.showError(error); }); loadData(); } Thay Ä‘á»•i nhá», nhÆ°ng nhÃ¬n Ä‘Ã£ clean hÆ¡n kha khÃ¡ rá»“i pháº£i khÃ´ng :D CÃ³ báº¡n tháº¯c máº¯c táº¡i sao mÃ¬nh sá»­ dá»¥ng doOnTerminate() thay vÃ¬ doFinally() ? =&gt; Bá»Ÿi vÃ¬ trong trÆ°á»ng há»£p nÃ y, mÃ¬nh dispose observable sau khi screen bá»‹ destroy do Ä‘Ã³ mÃ¬nh khÃ´ng gá»i cÃ¡c thao tÃ¡c UI trong trÆ°á»ng há»£p nÃ y. Conclusion Hi vá»ng bÃ i viáº¿t nÃ y giÃºp báº¡n Ä‘Ã¡nh giÃ¡ cao lá»£i Ã­ch mÃ  nhá»¯ng thay Ä‘á»•i nho cÃ³ thá»ƒ mang láº¡i. Happy coding !!! Reference Making rxjava code tidier with doOnSucsribe &amp; doFinally" }, { "title": "[RxJava] Concat & Merge operator", "url": "/posts/rxjava-concat-merge/", "categories": "Android", "tags": "android, rxjava, concat, merge", "date": "2019-08-09 14:15:03 +0000", "content": "Introduction Hi má»i ngÆ°á»i, hÃ´m nay chÃºng ta sáº½ cÃ¹ng tÃ¬m hiá»ƒu má»™t sá»‘ operator Ä‘Æ¡n giáº£n vÃ  há»¯u Ã­ch trong Rx lÃ  Concat vÃ  Merge nhÃ©. Concat Concat ghÃ©p ná»‘i Ä‘áº§u ra cá»§a cÃ¡c Observables rá»“i tráº£ vá» má»™t Observable duy nháº¥t. NÃ³ sáº½ duy trÃ¬ thá»© tá»± cá»§a cÃ¡c Observable khi phÃ¡t ra item. Tá»©c lÃ  nÃ³ sáº½ phÃ¡t ra táº¥t cáº£ item cá»§a Observable thá»© nháº¥t, sau Ä‘Ã³ sáº½ Ä‘áº¿n cÃ¡c item cá»§a Observable thá»© hai vÃ  cá»© nhÆ° tháº¿ Ä‘áº¿n Observable cuá»‘i cÃ¹ng. Giá» mÃ¬nh sáº½ láº¥y vÃ­ dá»¥ nhÃ© : Observable.concat( Observable.just(1, 2, 3), Observable.just(4, 5, 6) ).subscribe(object : Observer&lt;Int&gt; { override fun onSubscribe(d: Disposable) { } override fun onNext(s: Int) { println(s) } override fun onError(e: Throwable) { } override fun onComplete() { } } ) Káº¿t quáº£ : Value 1 Value 2 Value 3 Value 4 Value 5 Value 6 Merge Merge ghÃ©p ná»‘i cÃ¡c item cá»§a cÃ¡c Observables rá»“i tráº£ vá» má»™t Observable duy nháº¥t. KhÃ¡c vá»›i concat, nÃ³ khÃ´ng duy trÃ¬ tráº­t tá»± trong khi phÃ¡t ra cÃ¡c item, xen káº½ cÃ¡c item phÃ¡t ra cá»§a cÃ¡c Observable khÃ¡c nhau. HÃ£y cÃ¹ng xem vÃ­ dá»¥ bÃªn dÆ°á»›i : Trong vÃ­ dá»¥ nÃ y, mÃ¬nh sáº½ táº¡o ra 2 observable cá»© 1 giÃ¢y láº¡i phÃ¡t ra 1 giÃ¡ trá»‹ A,B. Observable.merge( Observable.interval(1, TimeUnit.SECONDS).map { id -&gt; \"A $id\" }, Observable.interval(1, TimeUnit.SECONDS).map { id -&gt; \"B $id\" }) .subscribe(object : Observer&lt;String&gt; { override fun onComplete() { } override fun onSubscribe(d: Disposable) { } override fun onNext(t: String) { Log.e(\"TAG\", \"Value $t\") } override fun onError(e: Throwable) { } } ) Káº¿t quáº£ : Value A 0 Value B 0 Value A 1 Value B 1 Value A 2 Value B 2 Value A 3 Value B 3 ... CÃ¡c giÃ¡ trá»‹ A,B sáº½ láº§n lÆ°á»£t xen káº½ nhau chá»© khÃ´ng theo thá»© tá»± háº¿t A rá»“i má»›i Ä‘áº¿n B. Äá»ƒ tháº¥y Ä‘Æ°á»£c sá»± khÃ¡c nhau giá»¯a concat vÃ  merge. MÃ¬nh sáº½ láº¥y má»™t vÃ­ dá»¥ : Trong vÃ­ dá»¥ nÃ y, mÃ¬nh sáº½ táº¡o ra 2 Observable, má»—i observable cá»© 1 giÃ¢y láº¡i phÃ¡t ra 1 item sau Ä‘Ã³ ná»‘i láº¡i vá»›i nhau báº±ng toÃ¡n tá»­ concat. Observable.concat( Observable.interval(1, TimeUnit.SECONDS).map { id -&gt; \"A $id\" }, Observable.interval(1, TimeUnit.SECONDS).map { id -&gt; \"B $id\" }) .subscribe(object : Observer&lt;String&gt; { override fun onComplete() { } override fun onSubscribe(d: Disposable) { } override fun onNext(t: String) { Log.e(\"TAG\", \"Value $t\") } override fun onError(e: Throwable) { } } ) Káº¿t quáº£ : A0 A1 A2 A3 A4 ... An NhÆ° Ä‘Ã£ nÃ³i á»Ÿ trÃªn, chá»‰ khi phÃ¡t háº¿t item á»Ÿ Observable A thÃ¬ Observable B má»›i Ä‘Æ°á»£c phÃ¡t. á» Ä‘áº¥y cá»© 1s thÃ¬ Observable A láº¡i phÃ¡t, vÃ¬ váº­y Observable B sáº½ khÃ´ng bao giá» phÃ¡t ra Ä‘Æ°á»£c. Conclusion Hi vá»ng qua bÃ i viáº¿t nÃ y, cÃ¡c báº¡n cÃ³ thá»ƒ hiá»ƒu Ä‘Æ°á»£c sá»± khÃ¡c nhau giá»¯a 2 tháº±ng nÃ y :D Happy coding !!!" }, { "title": "[RxJava] HOT & COLD Observable", "url": "/posts/rxjava-hot-cold-observer/", "categories": "Android", "tags": "android, rxjava", "date": "2019-08-08 14:15:03 +0000", "content": "Introduction Äá»ƒ hiá»ƒu Ä‘Æ°á»£c concept vá» HOT &amp; COLD Observable, hÃ£y nhÃ¬n vÃ o nhá»¯ng gÃ¬ mÃ  tháº±ng Producer sáº£n xuáº¥t ra. Báº¡n cÃ³ thá»ƒ hiá»ƒu Ä‘Æ¡n giáº£n lÃ  nhÆ° tháº¿ nÃ y : Khi dá»¯ liá»‡u Ä‘Æ°á»£c táº¡o ra bÃªn ngoÃ i Observable, ta gá»i Ä‘Ã³ lÃ  HOT Observable. Khi dá»¯ liá»‡u Ä‘Æ°á»£c táº¡o ra bá»Ÿi chÃ­nh Observable, ta gá»i Ä‘Ã³ lÃ  COLD Observable. OK, giá» hÃ£y cÃ¹ng tÃ¬m hiá»ƒu táº¡i sao láº¡i nÃ³i nhÆ° váº­y nhÃ©. Just vs FromCallable ? MÃ¬nh sáº½ láº¥y ra 1 vÃ­ dá»¥ ráº¥t Ä‘Æ¡n giáº£n vá» viá»‡c sá»­ dá»¥ng just Ä‘á»ƒ cáº¥p value cho Single Producer. Single.just(1).subscribe{ it -&gt; print(it) } // Káº¿t quáº£ : 1 Tuy nhiÃªn, cÃ³ má»™t function khÃ¡c trÃ´ng khÃ¡ giá»‘ng, vÃ  cÅ©ng cho ra káº¿t quáº£ tÆ°Æ¡ng tá»± Ä‘Ã³ lÃ  : fromCallable Single.fromCallable{ 1 }.subscribe{ it -&gt; print(it) } // KÃªt quáº£ : 1 Máº·c dÃ¹ cÃ¹ng cho ra 1 káº¿t quáº£, nhÆ°ng just vÃ  fromCallable hoÃ n toÃ n khÃ¡c nhau. HÃ£y cÃ¹ng xem sá»± khÃ¡c biá»‡t. Given Externally vs Generated Internally just sá»­ dá»¥ng value mÃ  Single Ä‘Ã£ gá»­i trÆ°á»›c Ä‘áº¿n cho nÃ³. Trong khi fromCallable táº¡o ra value bÃªn trong Single. Trong vÃ­ dá»¥ nÃ y, ta sáº½ táº¡o ra 1 sá»‘ ngáº«u nhiÃªn má»—i khi nÃ³ Ä‘Æ°á»£c gá»i Ä‘á»ƒ tháº¥y sá»± khÃ¡c biá»‡t : println(\"From Just\") val justSingle = Single.just(Random.nextInt()) justSingle.subscribe{ it -&gt; println(it) } justSingle.subscribe{ it -&gt; println(it) } println(\"\\nFrom Callable\") val callableSingle = Single.fromCallable { Random.nextInt() } callableSingle.subscribe{ it -&gt; println(it) } callableSingle.subscribe{ it -&gt; println(it) } Ta giá»¯ láº¡i tháº±ng Single vÃ  dÃ¹ng báº±ng 2 tháº±ng Consumer ( Ä‘Æ°á»£c subscribe 2 láº§n ). Káº¿t quáº£ nhÆ° sau : From Just 801570614 801570614 From Callable 1251601849 2033593269 Báº¡n sáº½ nháº­n tháº¥y giÃ¡ trá»‹ Ä‘Æ°á»£c phÃ¡t ra bá»Ÿi just giá»¯ nguyÃªn cho dÃ¹ cÃ³ nhiÃªu subcriber Ä‘i chÄƒng ná»¯a. Bá»Ÿi giÃ¡ trá»‹ Ä‘Æ°á»£c táº¡o ra bÃªn ngoÃ i Observable, vÃ  Observable chá»‰ giá»¯ láº¡i giÃ¡ trá»‹ nÃ y cho cÃ¡c tháº±ng Consumer sau mÃ  thÃ´i. Tuy nhiÃªn, Ä‘á»‘i vá»›i fromCallable, nÃ³ Ä‘Æ°á»£c táº¡o ra bÃªn trong Observable. VÃ¬ váº­y má»—i khi cÃ³ ai Ä‘Ã³ subscribe, má»™t sá»‘ ngáº«u nhiÃªn má»›i láº¡i Ä‘Æ°á»£c táº¡o ra. Executed Immediate vs Executed Lazily just cÃ³ giÃ¡ trá»‹ ngay cáº£ khi chÆ°a cÃ³ ai subscribe nÃ³. fromCallable chá»‰ thá»±c hiá»‡n táº¡o giÃ¡ trá»‹ khi cÃ³ ai Ä‘Ã³ subscribe nÃ³. ÄÃ¢y Ä‘Æ°á»£c gá»i lÃ  lazy initialization. Äiá»u nÃ y ráº¥t há»¯u Ã­ch trong láº­p trÃ¬nh khi cÃ³ thá»ƒ tiáº¿t kiá»‡m má»™t sá»‘ tÃ i nguyÃªn khi chÆ°a dÃ¹ng tá»›i. HÃ£y cÃ¹ng nhÃ¬n vÃ­ dá»¥ bÃªn dÆ°á»›i. fun main() { println(\"From Just\") val justSingle = Single.just(getRandomMessage()) println(\"start subscribing\") justSingle.subscribe{ it -&gt; println(it) } println(\"\\nFrom Callable\") val callableSingle = Single.fromCallable { getRandomMessage() } println(\"start subscribing\") callableSingle.subscribe{ it -&gt; println(it) } } fun getRandomMessage(): Int { println(\"-Generating-\") return Random.nextInt() } Káº¿t quáº£ : From Just -Generating- start subscribing 1778320787 From Callable start subscribing -Generating- 1729786515 Vá»›i just thÃ¬ viá»‡c Generating xáº£y ra trÆ°á»›c khi start subscribing. Vá»›i fromCallable thÃ¬ pháº£i start subscribing sau Ä‘Ã³ má»›i Generating. An important comparison: Hot vs Cold Observable Tá»« vÃ­ dá»¥ vá» just vÃ  fromCallable. MÃ¬nh sáº½ cÃ³ just fromCallable GiÃ¡ trá»‹ Ä‘Æ°á»£c láº¥y tá»« bÃªn ngoÃ i Sinh ra tá»« bÃªn trong Táº¡o ra giÃ¡ trá»‹ TRÆ¯á»šC KHI Ä‘Äƒng kÃ­ Táº¡o ra giÃ¡ trá»‹ SAU KHI Ä‘Äƒng kÃ­ Äiá»u nÃ y tÆ°Æ¡ng tá»± vá»›i HOT &amp; COLD observable HOT Observable COLD Observable GiÃ¡ trá»‹ Ä‘Æ°á»£c láº¥y tá»« bÃªn ngoÃ i Sinh ra tá»« bÃªn trong Táº¡o ra giÃ¡ trá»‹ TRÆ¯á»šC KHI Ä‘Äƒng kÃ­ Táº¡o ra giÃ¡ trá»‹ SAU KHI Ä‘Äƒng kÃ­ Is one better than the other? Váº­y ta nÃªn sá»­ dá»¥ng cÃ¡i nÃ o ? Äiá»u Ä‘Ã³ phá»¥ thuá»™c vÃ o tá»«ng hoÃ n cáº£nh thÆ°á»ng thÃ¬ COLD Observable thÆ°á»ng sáº½ Ä‘Æ°á»£c sá»­ dá»¥ng hÆ¡n, trá»« khi : Báº¡n muá»‘n Ä‘áº£m báº£o nhiá»u ngÆ°á»i Ä‘Äƒng kÃ­ (subscribers) nháº­n Ä‘Æ°á»£c cÃ¹ng má»™t dá»¯ liá»‡u. Báº¡n táº¡o ra má»™t instance má»›i cá»§a má»™t thá»© gÃ¬ Ä‘Ã³ má»—i láº§n Observable thá»±c thi, vÃ­ dá»¥ nhÆ° websocket connection Ä‘i. Báº¡n khÃ´ng muá»‘n táº¡o má»™t connection má»›i cho má»—i subscriber nhÆ°ng thay vÃ o Ä‘Ã³ chá»‰ chia sáº» cho nhá»¯ng ngÆ°á»i Ä‘Äƒng kÃ­ thÃ´i. Di chuyá»ƒn viá»‡c khá»Ÿi táº¡o connection bÃªn ngoÃ i Observable sáº½ khiáº¿n nÃ³ trá»Ÿ thÃ nh HOT vÃ  xá»­ lÃ½ Ä‘Æ°á»£c váº¥n Ä‘á» nÃ y. Conclusion Hi vá»ng qua bÃ i viáº¿t nÃ y cÃ³ thá»ƒ giÃºp báº¡n hiá»ƒu hÆ¡n cÃ¡ch hoáº¡t Ä‘á»™ng cá»§a Observable vÃ  Ã½ nghÄ©a cá»§a COLD &amp; HOT Observable. Happy coding !!! Reference Understand Hot &amp; Cold Observable HOT &amp; COLD Observable with just &amp; fromCallable" }, { "title": "[RxJava] Xá»­ lÃ½ luá»“ng trong Android", "url": "/posts/rxjava-handle-thread-in-android/", "categories": "Android", "tags": "android, rxjava, thread", "date": "2019-07-08 14:15:03 +0000", "content": "Giá»›i thiá»‡u Xá»­ lÃ½ luá»“ng luÃ´n lÃ  má»™t chá»§ Ä‘á» khÃ³ trong láº­p trÃ¬nh. VÃ  nÃ³ cá»±c kÃ¬ quan trá»ng trong Android, nháº¥t lÃ  khi ta pháº£i Ä‘Æ°a táº¥t cáº£ luá»“ng xá»­ lÃ½ network, database, tÃ­nh toÃ¡nâ€¦ xuá»‘ng tÃ¡c vá»¥ ná»n Ä‘á»ƒ trÃ¡nh block UI. VÃ¬ váº­y, khÃ´ng cÃ³ cÃ¡ch nÃ o Ä‘á»ƒ Ä‘á»ƒ thoÃ¡t Ä‘Æ°á»£c viá»‡c pháº£i há»c nÃ³ cáº£. NhÆ°ng yÃªn tÃ¢m, má»i thá»© sáº½ trá»Ÿ nÃªn Ä‘Æ¡n giáº£n hÆ¡n vá»›i RxJava. Rx Diagram Trong bÃ i viáº¿t trÆ°á»›c, mÃ¬nh Ä‘Ã£ Ä‘á» cáº­p Ä‘áº¿n RxJava cÃ³ thá»ƒ Ä‘Æ°á»£c chia thÃ nh 3 pháº§n Ä‘Æ¡n giáº£n : Producer, Operators vÃ  Consumer. HÃ£y tÆ°á»Ÿng tÆ°á»£ng ráº±ng, má»™t sá»‘ tÃ¡c vá»¥ tiÃªu tá»‘n thá»i gian cáº§n thá»±c hiá»‡n tÆ°á»›i ná»n vÃ  chá»‰ Consumer cháº¡y trÃªn UI thread. observeOn(â€¦) Äá»ƒ xÃ¡c Ä‘á»‹nh xem chuá»—i operators Ä‘Æ°á»£c thá»±c hiá»‡n trÃªn luá»“ng nÃ o, ta chá»‰ cáº§n Ä‘Æ¡n giáº£n gáº¯n thÃªm chuá»—i observeOn á»©ng vá»›i thread mong muá»‘n. NÃ³ sáº½ tÆ°Æ¡ng Ä‘Æ°Æ¡ng nhÆ° sau: producer().observedOn(Schedulers.computational()) .operation1() .operation2() .observedOn(Schedulers.io()) .moreOperations() .observedOn(AndroidScheduler.mainThread()) .subscribe(...) NhÃ¬n khÃ¡ simple Ä‘Ãºng khÃ´ng ? :D CÃ³ thá»ƒ báº¡n sáº½ Ä‘áº·t ra 1 cÃ¢u há»iâ€¦ Tháº¿ cÃ²n xá»­ lÃ½ phÃ­a Producer thÃ¬ sao ? Giáº£ sá»­ hoáº¡t Ä‘á»™ng cá»§a producer ráº¥t cháº­m, vÃ  ta cÅ©ng muá»‘n Ä‘Æ°a nÃ³ vÃ o background thÃ¬ pháº£i lÃ m tháº¿ nÃ o ? Observable.fromCallable { superSlowProcess() }.subscribe{ ... } subscribeOn(â€¦) TÆ°Æ¡ng tá»± observeOn(â€¦), sá»­ dá»¥ng subscribeOn(â€¦) nhÆ°ng nÃ³ khÃ¡c á»Ÿ Ä‘iá»ƒm, báº¡n cÃ³ thá»ƒ subscribeOn(â€¦) á»Ÿ báº¥t cá»© Ä‘Ã¢u trong chuá»—i ( sau Producer vÃ  trÆ°á»›c Consumer). MÃ£ code sáº½ trÃ´ng nhÆ° tháº¿ nÃ y: Observable.fromCallable { superSlowProcess() } .operators // or operators... .subscribeOn(Schedulers.io()) .observeOn(AndroidScheduler.mainThread()) .subscribe{ ... } Hoáº·c báº¡n cÅ©ng cÃ³ thá»ƒ viáº¿t nhÆ° bÃªn dÆ°á»›i Ä‘Ã¢y, cÃ¹ng tráº£ vá» má»™t káº¿t quáº£, chá»‰ lÃ  ta cÃ³ thá»ƒ dá»… dÃ ng tháº¥y ná»›i Ä‘Äƒng kÃ­ vÃ  quan sÃ¡t gáº§n nhau hÆ¡n. ÄÃ¢y cÅ©ng lÃ  cÃ¡ch mÃ¬nh thÆ°á»ng xuyÃªn dÃ¹ng ::lol:: Observable.fromCallable { superSlowProcess() } .operators // or operators... .subscribeOn(Schedulers.io()) .observeOn(AndroidScheduler.mainThread()) .subscribe{ ... } Conclution OK. Hi vá»ng qua bÃ i viáº¿t nÃ y cÃ¡c báº¡n cÃ³ thá»ƒ hiá»ƒu qua vá» cÃ¡ch xá»­ lÃ½ luá»“ng trong Rx. BÃ i viáº¿t tá»›i mÃ¬nh sáº½ cÃ¹ng tÃ¬m hiá»ƒu vá» HOT Observable vÃ  COLD Observable xem nÃ³ lÃ  gÃ¬ vÃ  tÃ¡c dá»¥ng tá»«ng loáº¡i nhÃ©. Happy coding !!! Reference Making threading easy in Android with RxJava" }, { "title": "[RxJava] KhÃ¡i niá»‡m", "url": "/posts/rxjava-start/", "categories": "Android", "tags": "android, rxjava", "date": "2019-07-06 14:15:03 +0000", "content": "Giá»›i thiá»‡u Khi tÃ´i má»›i há»c Android, ai Ä‘Ã³ Ä‘Ã£ nÃ³i vá»›i tÃ´i ráº±ng â€œNáº¿u báº¡n muá»‘n há»c thá»© gÃ¬ khÃ³ khÃ³, hÃ£y há»c RxJavaâ€. Trong series nÃ y, tÃ´i sáº½ cÃ¹ng cÃ¡c báº¡n tÃ¬m hiá»ƒu nÃ³ tá»« nhá»¯ng Ä‘iá»u Ä‘Æ¡n giáº£n nháº¥t nhÃ©. 3 thÃ nh pháº§n trong Rx Trong RxJava, chá»‰ cÃ³ 3 pháº§n Ä‘á»ƒ táº¡o nÃªn má»™t chuá»—i Rx Ä‘iá»ƒn hÃ¬nh. ÄÃ³ lÃ : Producer Consumer Operator Producer Producer vá» cÆ¡ báº£n chá»‹u trÃ¡ch nhiá»‡m sáº£n xuáº¥t dá»¯ liá»‡u. VÃ  dá»¯ liá»‡u Ä‘Æ°á»£c sáº£n sinh ra nÃ y chá»‰ cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi ngÆ°á»i connect vá»›i nÃ³ (Consumer) Vá» cÆ¡ báº£n, Producer bao gá»“m 5 loáº¡i : Observable Single Maybe Flowable Completable VÃ­ dá»¥ : Single.just(1) á» Ä‘Ã¢y, Single Ä‘Æ¡n giáº£n lÃ  1 loáº¡i Producer chá»‰ cÃ³ thá»ƒ sinh ra 1 thá»©. Ta sáº½ cÃ¹ng tÃ¬m hiá»ƒu vÃ  Ä‘Æ°a ra vÃ­ dá»¥ chi tiáº¿t vá»›i cÃ¡c loáº¡i producer khÃ¡c sau nhÃ©. Consumer BÃ¢y giá», khi Producer cÃ³ data, vÃ  Consumer hay gá»i lÃ  ngÆ°á»i tiÃªu thá»¥ muá»‘n sá»­ dá»¥ng nÃ³, há» chá»‰ cáº§n káº¿t ná»‘i báº±ng cÃ¡ch sá»­ dá»¥ng function Subscribe Single.just(1).subscribe{ it -&gt; print(it) } Trong trÆ°á»ng há»£p nÃ y, Consumer chá»‰ muá»‘n in ra káº¿t quáº£ mÃ  Producer Ä‘Ã£ táº¡o. NhÆ° ban Ä‘áº§u giá»›i thiá»‡u, váº­y cÃ²n khÃºc operators thÃ¬ sao ? Operators Äá»ƒ dá»… mÃ¬nh há»a cÃ¡c toÃ¡n tá»­ (operators) trong Rx, hÃ£y cÃ¹ng xem diagram sau Ä‘á»ƒ rÃµ hÆ¡n nhÃ© : https://rxmarbles.com/ Láº¥y má»™t vÃ­ dá»¥ Ä‘Æ¡n giáº£n, ta muá»‘n sinh ra má»™t chuá»—i sá»‘ tá»« 0-&gt;9 vÃ  chá»‰ nháº­n cÃ¡c giÃ¡ trá»‹ cháºµn. Ráº¥t may máº¯n, trong Rx cung cáº¥p operator filter cho phÃ©p lá»c cÃ¡c pháº§n tá»­ thá»a mÃ£n Ä‘iá»u kiá»‡n cho trÆ°á»›c. VÃ  má»™t Ä‘iá»u tuyá»‡t vá»i hÆ¡n ná»¯a, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng nhiá»u hÆ¡n 1 operator miá»…n sao trÆ°á»›c khi nÃ³ Ä‘áº¿n Ä‘Æ°á»£c tay Consumer Conclusion Hi vá»ng qua bÃ i viáº¿t nÃ y cÃ¡c báº¡n cÃ³ thá»ƒ hiá»ƒu cÆ¡ báº£n qua vá» Rx vÃ  cÃ¡c thÃ nh pháº§n bÃªn trong nÃ³. Trong bÃ i viáº¿t tiáº¿p theo mÃ¬nh sáº½ cÃ¹ng tÃ¬m hiá»ƒu Rx máº¡nh máº½ tháº¿ nÃ o khi xá»­ lÃ½ luá»“ng nhÃ©. Happy coding !!! References Learning RxJava" }, { "title": "[CI/CD] TÃ­ch há»£p CI/CD vá»›i Gitlab", "url": "/posts/ci-cd-gitlab/", "categories": "CI/CD", "tags": "cicd, gitlab", "date": "2019-06-19 14:15:03 +0000", "content": "1.Introduction Cháº¯c háº³n cÃ¡c báº¡n Ä‘Ã£ tá»«ng nghe Ä‘áº¿n há»‡ thá»‘ng CI/CD. Má»¥c tiÃªu cá»§a nÃ³ lÃ  tá»± Ä‘á»™ng hÃ³a cÃ¡c khÃ¢u trong quy trÃ¬nh phÃ¡t triá»ƒn pháº§n má»m hiá»‡n nay. Náº¿u chÆ°a biáº¿t nÃ³ lÃ  gÃ¬, hÃ£y tham kháº£o bÃ i viáº¿t nÃ y cá»§a anh @nghiadd Ä‘á»ƒ hiá»ƒu cÆ¡ báº£n vá» CI/CD. Hiá»‡n nay cÃ³ ráº¥t nhiá»u há»‡ thá»‘ng nhÆ° Travis, Jenkin, Circle, Gitlab cÃ³ thá»ƒ giÃºp báº¡n lÃ m Ä‘Æ°á»£c Ä‘iá»u Ä‘Ã³. Trong bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ giá»›i thiá»‡u vá»›i cÃ¡c báº¡n tá»•ng quan Gitlab CI vÃ  cÃ¡ch Ä‘á»ƒ xÃ¢y dá»±ng má»™t há»‡ thá»‘ng cÆ¡ báº£n. 2. Git Flow Developer hoÃ n thÃ nh má»™t task nÃ o Ä‘Ã³ vÃ  push commit lÃªn Gitlab Ä‘á»ƒ má»i ngÆ°á»i review. Khi Ä‘Ã³ Gitlab CI cÅ©ng báº¯t Ä‘áº§u thá»±c hiá»‡n cÃ´ng viá»‡c mÃ  nÃ³ Ä‘Æ°á»£c giao. NÃ³ sá»­ dá»¥ng file .gitlab-ci.ym náº±m trong thÆ° má»¥c gá»‘c cá»§a repo Ä‘á»ƒ cáº¥u hÃ¬nh project sá»­ dá»¥ng cÃ¡c Runner. Má»™t Pipeline CI sinh ra vÃ  report sáº½ Ä‘Æ°á»£c hiá»ƒn thá»‹ trÃªn giao diá»‡n. Váº­y Pipelines lÃ  gÃ¬ ? 3. Pipelines LÃ  thÃ nh pháº§n cáº¥p cao nháº¥t cá»§a tÃ­ch há»£p, phÃ¢n phá»‘i vÃ  triá»ƒn khai liÃªn tá»¥c. Pipelines are the top-level component of continuous integration, delivery, and deployment. Pipeline bao gá»“m : Jobs : CÃ¡c cÃ´ng viá»‡c Ä‘Æ°á»£c giao thá»±c thi. ( VÃ­ dá»¥ : biÃªn dá»‹ch mÃ£ hoáº·c cháº¡y test ) Stage : XÃ¡c Ä‘á»‹nh cÃ¡c thá»i Ä‘iá»ƒm vÃ  cÃ¡ch thá»±c hiá»‡n. ( VÃ­ dá»¥ : test chá»‰ cháº¡y sau khi biÃªn dá»‹ch thÃ nh cÃ´ng ) Pipeline hoáº¡t Ä‘á»™ng theo nguyÃªn táº¯c sau : Táº¥t cáº£ cÃ¡c cÃ´ng viá»‡c trong cÃ¹ng má»™t stage Ä‘Æ°á»£c Runner thá»±c hiá»‡n song song, náº¿u cÃ³ Ä‘á»§ sá»‘ lÆ°á»£ng Runner Ä‘á»“ng thá»i. Náº¿u Success, pipeline chuyá»ƒn sang stage tiáº¿p theo. Náº¿u Failed, pipeline sáº½ dá»«ng láº¡i. CÃ³ má»™t ngoáº¡i lá»‡ lÃ  náº¿u job Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u lÃ m thá»§ cÃ´ng, thÃ¬ dÃ¹ bá»‹ fail thÃ¬ pipeline váº«n tiáº¿p tá»¥c. BÃªn dÆ°á»›i lÃ  vÃ­ dá»¥ vá» Ä‘á»“ thá»‹ Pipeline thÃ´ng thÆ°á»ng : TÃ³m láº¡i, cÃ¡c bÆ°á»›c Ä‘á»ƒ Gitlab CI hoáº¡t Ä‘á»™ng nhÆ° sau : ThÃªm .gitlab-ci.yml vÃ o thÆ° má»¥c gá»‘c cá»§a repo. Cáº¥u hÃ¬nh gitlab Runner 4. Config gitlab-ci.yml 4.1 Create .gilab-ci.yml .gitlab-ci.yml Ä‘Æ°á»£c viáº¿t theo Ä‘á»‹nh dáº¡ng YAML. Báº¡n cÃ³ thá»ƒ tÃ¬m hiá»ƒu thÃªm táº¡i Ä‘Ã¢y. NhÆ° Ä‘Ã£ Ä‘á» cáº­p á»Ÿ trÃªn, .gitlab-ci.yml cho Runner biáº¿t nhá»¯ng cÃ´ng viá»‡c cáº§n pháº£i lÃ m. Máº·c Ä‘á»‹nh, nÃ³ sáº½ cháº¡y má»™t pipeline vá»›i 3 stage : build test deploy Tuy nhiÃªn, báº¡n khÃ´ng cáº§n pháº£i sá»­ dá»¥ng cáº£ 3 stage, cÃ¡c stage khÃ´ng Ä‘Æ°á»£c giao viá»‡c sáº½ Ä‘Æ°á»£c bá» qua. DÆ°á»›i Ä‘Ã¢y lÃ  vÃ­ dá»¥ cáº¥u hÃ¬nh cho má»™t dá»± Ã¡n Ruby on Rails : image: \"ruby:2.5\" before_script: - apt-get update -qq &amp;&amp; apt-get install -y -qq sqlite3 libsqlite3-dev nodejs - ruby -v - which ruby - gem install bundler --no-document - bundle install --jobs $(nproc) \"${FLAGS[@]}\" rspec: script: - bundle exec rspec rubocop: script: - bundle exec rubocop ÄÃ¢y lÃ  cáº¥u hÃ¬nh Ä‘Æ¡n giáº£n nháº¥t cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng vá»›i háº§u háº¿t cÃ¡c á»©ng dá»¥ng Ruby XÃ¡c Ä‘á»‹nh 2 job rspec vÃ  rubocop vá»›i cÃ¡c lá»‡nh thá»±c thi khÃ¡c nhau. TrÆ°á»›c má»—i job, cÃ¡c lá»‡nh Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh bá»Ÿi before_script Ä‘Æ°á»£c thá»±c thi. Náº¿u báº¡n muá»‘n kiá»ƒm tra xem file .gitlab-ci.yml cÃ³ há»£p lá»‡ hay khÃ´ng, cÃ³ má»™t cÃ´ng cá»¥ lint trong page /-/ci/lint trong namespace project. Báº¡n cÅ©ng cÃ³ thá»ƒ tháº¥y nÃºt CI Lint Ä‘á»ƒ Ä‘áº¿n trang nÃ y trong má»¥c CI/CD -&gt; Pipelines vÃ  Pipelines -&gt; Jobs trong page Project. 4.2. Push .gitlab-ci.yml to GitLab Sau khi táº¡o file .gitlab-ci.yml, thÃªm nÃ³ vÃ o git repos vÃ  push nÃ³ lÃªn gitlab. git add .gitlab-ci.yml git commit -m \"Add .gitlab-ci.yml\" git push origin master Trá»Ÿ vá» Pipeline page, báº¡n sáº½ tháº¥y pipeline Ä‘ang á»Ÿ tráº¡ng thÃ¡i pending. Báº¡n cÅ©ng cÃ³ thá»ƒ tá»›i page Commits, Ä‘á»ƒ Ã½ icon táº¡m dá»«ng nhá» bÃªn cáº¡nh commit SHA. Click vÃ o nÃ³ sáº½ chuyá»ƒn hÆ°á»›ng Ä‘áº¿n page Jobs cá»§a commit tÆ°Æ¡ng á»©ng. ThÃ´ng bÃ¡o stuck chá»‰ ráº±ng chÆ°a cÃ³ Gitlab runner nÃ o Ä‘Æ°á»£c cáº¥u hÃ¬nh Ä‘á»ƒ thá»±c thi Job nÃ y. BÆ°á»›c tiáº¿p theo mÃ¬nh sáº½ cáº¥u hÃ¬nh Runner Ä‘á»ƒ nÃ³ thá»±c thi cÃ´ng viá»‡c nÃ y. 5. Gitlab Runner Trong gitlab, cÃ¡c Runner thá»±c thi cÃ¡c jobs Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong file .gitlab-ci.yml. Má»™t Runner cÃ³ thá»ƒ lÃ  má»™t mÃ¡y áº£o (VM), má»™t VPS, má»™t bare-metal, má»™t docker container hay tháº­m chÃ­ lÃ  má»™t cluster container. Gitlab vÃ  Runners giao tiáº¿p vá»›i nhau thÃ´ng qua API, vÃ¬ váº­y yÃªu cáº§u duy nháº¥t lÃ  mÃ¡y cháº¡y Runner cÃ³ quyá»n truy cáº­p Gitlab server. Má»™t Runner cÃ³ thá»ƒ xÃ¡c Ä‘á»‹nh cá»¥ thá»ƒ cho má»™t dá»± Ã¡n nháº¥t Ä‘á»‹nh hoáº·c phá»¥c vá»¥ cho nhiá»u dá»± Ã¡n trong Gitlab. Náº¿u nÃ³ phá»¥c vá»¥ cho táº¥t cáº£ project thÃ¬ Ä‘Æ°á»£c gá»i lÃ  Shared Runner. Äá»ƒ xÃ¡c Ä‘á»‹nh xem Runner nÃ o Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh cho project cá»§a báº¡n. VÃ o Settings -&gt; CI/CD. Äá»ƒ Runner hoáº¡t Ä‘á»™ng Ä‘Æ°á»£c, báº¡n cáº§n thá»±c hiá»‡n 2 bÆ°á»›c : CÃ i Ä‘áº·t Runner Cáº¥u hÃ¬nh Runner Trong bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ chá»‰ cÃ¡c báº¡n cÃ¡c bÆ°á»›c Ä‘á»ƒ thiáº¿t láº­p trÃªn mÃ´i trÆ°á»ng Windows : Äáº§u tiÃªn, truy cáº­p vÃ o project Gitlab. VÃ o Settings -&gt; CI/CD -&gt; Runners (expand). Táº¡o má»™t folder báº¥t kÃ¬ trÃªn há»‡ thá»‘ng ( vÃ­ dá»¥ : C:\\GitLab-Runner) TÃ¹y thuá»™c vÃ o phiÃªn báº£n há»‡ Ä‘iá»u hÃ nh mÃ  báº¡n download báº£n x86 hay amd64 . Sau Ä‘Ã³ di chuyá»ƒn vÃ o thÆ° má»¥c vá»«a táº¡o vÃ  Ä‘á»•i tÃªn thÃ nh gitlab-runner.exe. Báº­t CMD vá»›i quyá»n admin, cd tá»›i thÆ° má»¥c vá»«a táº¡o vÃ  cháº¡y lá»‡nh : gitlab-runner register Nháº­p gitlab url cá»§a báº¡n : Please enter the gitlab-ci coordinator URL (e.g. https://gitlab.com ) https://gitlab.com Nháº­p Token nháº­n Ä‘Æ°á»£c tá»« giao diá»‡n trÃªn. Please enter the gitlab-ci token for this runner xxx ThÃªm mÃ´ táº£ cho Runner, pháº§n nÃ y cÃ³ thá»ƒ thay Ä‘á»•i sau trong giao diá»‡n ngÆ°á»i dÃ¹ng Gitlab : Please enter the gitlab-ci description for this runner [hostname] my-runner ThÃªm cÃ¡c tháº» Tags Ä‘Æ°á»£c liÃªn káº¿t vá»›i Runners, pháº§n nÃ y cÃ³ thá»ƒ thay Ä‘á»•i sau : Please enter the gitlab-ci tags for this runner (comma separated): my-tag,another-tag Chá»n Executor cho Runner Please enter the executor: ssh, docker+machine, docker-ssh+machine, kubernetes, docker, parallels, virtualbox, docker-ssh, shell: docker Náº¿u chá»n Docker, báº¡n sáº½ Ä‘Æ°á»£c yÃªu cáº§u thÃªm image máº·c Ä‘á»‹nh náº¿u image khÃ´ng Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong .gitlab-ci.yml. Please enter the Docker image (eg. ruby:2.1): alpine:latest OK, Ä‘áº¿n Ä‘Ã¢y lÃ  Ä‘Ã£ thiáº¿t láº­p thÃ nh cÃ´ng Gitlab CI rá»“i Ä‘Ã³ :+1: 6. Seeing status of your pipeline &amp; jobs Sau khi cáº¥u hÃ¬nh thÃ nh cÃ´ng, báº¡n cÃ³ thá»ƒ tháº¥y tráº¡ng thÃ¡i cá»§a commit cuá»‘i cÃ¹ng Ä‘Ã£ chuyá»ƒn tá»« pending thÃ nh running or success or failedâ€¦ Báº¡n cÃ³ thá»ƒ theo dÃµi táº¥t cáº£ pipeline trong project : Hoáº·c cÃ³ thá»ƒ xem cÃ¡c jobs báº±ng cÃ¡ch truy cáº­p Pipelines -&gt; Jobs. Báº±ng cÃ¡ch click vÃ o tráº¡ng thÃ¡i job, báº¡n cÃ³ thá»ƒ xem log cá»§a nÃ³. Äiá»u nÃ y ráº¥t quan trá»ng Ä‘á»ƒ chuáº©n Ä‘oÃ¡n táº¡i sao job láº¡i tháº¥t báº¡i hay hÃ nh Ä‘á»™ng khÃ¡c vá»›i mong Ä‘á»£i. Summary Hi vá»ng bÃ i biáº¿t giÃºp cÃ¡c báº¡n hiá»ƒu Ä‘Æ°á»£c cÃ¡c khÃ¡i niá»‡m cÆ¡ báº£n vá» CI/CD cÅ©ng nhÆ° cÃ¡ch xÃ¢y dá»±ng há»‡ thá»‘ng cÆ¡ báº£n vá»›i Gilab CI. ChÃºc cÃ¡c báº¡n coding vui váº» :+1::+1: Tham kháº£o : https://docs.gitlab.com/" }, { "title": "[Android] Architecture Components : Paging Library", "url": "/posts/android-paging-library/", "categories": "Android", "tags": "android, paging", "date": "2019-05-20 14:15:03 +0000", "content": "Introduction Hiá»‡n nay viá»‡c táº£i vÃ  hiá»ƒn thá»‹ dá»¯ liá»‡u dÆ°á»›i dáº¡ng danh sÃ¡ch ráº¥t phá»• biáº¿n vÃ  háº§u nhÆ° á»©ng dá»¥ng nÃ o cÅ©ng cÃ³. Vá»›i nhá»¯ng táº­p dá»¯ liá»‡u Ä‘áº§u vÃ o vá»«a vÃ  nhá» ta thÆ°á»ng táº£i xong sau Ä‘Ã³ má»›i hiá»ƒn thá»‹ lÃªn. Tuy nhiÃªn náº¿u táº­p dá»¯ liá»‡u Ä‘áº§u vÃ o ráº¥t lá»›n thÃ¬ sao ? Náº¿u khÃ´ng xá»­ lÃ½ cáº©n tháº­n, viá»‡c request dá»¯ liá»‡u má»™t cÃ¡ch thá»«a thÃ£i chá»‰ tá»• lÃ£ng phÃ­ bá»™ nhá»›, tá»‘n pin vÃ  bÄƒng thÃ´ng tháº­m chÃ­ gÃ¢y ra Ä‘Æ¡ lag náº¿u pháº£i chá» quÃ¡ lÃ¢u cho viá»‡c truy váº¥n CSDL. Paging Library ra Ä‘á»i sáº½ giÃºp báº¡n xá»­ lÃ½ nhá»¯ng váº¥n Ä‘á» nÃ y. Trong pháº§n nÃ y mÃ¬nh sáº½ trÃ¬nh bÃ y qua concept cá»§a Paging cÅ©ng nhÆ° cÃ¡ch thá»©c hoáº¡t Ä‘á»™ng cá»§a nÃ³. Library architecture 1. PagedList ÄÃ¢y lÃ  thÃ nh pháº§n quan chÃ­nh Paging, nÃ³ cÃ³ nhiá»‡m vá»¥ táº£i cÃ¡c Ä‘oáº¡n dá»¯ liá»‡u hoáº·c trang cá»§a á»©ng dá»¥ng cá»§a báº¡n. Khi cáº§n thÃªm dá»¯ liá»‡u, nÃ³ sáº½ Ä‘Æ°á»£c phÃ¢n trang vÃ o Ä‘á»‘i tÆ°á»£ng PagedList hiá»‡n cÃ³. Náº¿u báº¥t cá»© dá»¯ liá»‡u dá»¯ liá»‡u Ä‘Æ°á»£c táº£i nÃ o thay Ä‘á»•i, má»™t instance má»›i cá»§a PagedList sáº½ Ä‘Æ°á»£c emit tá»›i observable data holder tá»« má»™t Ä‘á»‘i tÆ°á»£ng dá»±a trÃªn LiveData hay Rx. VÃ­ dá»¥ bÃªn dÆ°á»›i cho tháº¥y cÃ¡ch cáº¥u hÃ¬nh ViewModel Ä‘á»ƒ táº£i vÃ  hiá»ƒn thá»‹ dá»¯ liá»‡u sá»­ dá»¥ng LiveData vá»›i PagedList : public class ConcertViewModel extends ViewModel { private ConcertDao concertDao; public final LiveData&lt;PagedList&lt;Concert&gt;&gt; concertList; // Creates a PagedList object with 50 items per page. public ConcertViewModel(ConcertDao concertDao) { this.concertDao = concertDao; concertList = new LivePagedListBuilder&lt;&gt;( concertDao.concertsByDate(), 50).build(); } } class ConcertViewModel(concertDao: ConcertDao) : ViewModel() { val concertList: LiveData&lt;PagedList&lt;Concert&gt;&gt; = concertDao.concertsByDate().toLiveData(pageSize = 50) } 2. Data Má»—i instance cá»§a PagedList sáº½ táº£i má»™t snapshot cáº­p nháº­t dá»¯ liá»‡u tá»« Ä‘á»‘i tÆ°á»£ng DataSource tÆ°Æ¡ng á»©ng. Dá»¯ liá»‡u sáº½ Ä‘Æ°á»£c chuyá»ƒn tá»« phÃ­a backend or database vÃ o PagedList. VÃ­ dá»¥ bÃªn dÆ°á»›i sá»­ dá»¥ng Room Ä‘á»ƒ láº¥y dá»¯ liá»‡u, nhÆ°ng náº¿u báº¡n muá»‘n lÆ°u trá»¯ dá»¯ liá»‡u cá»§a mÃ¬nh báº±ng cÃ¡ch khÃ¡c, báº¡n cÅ©ng cÃ³ thá»ƒ cung cáº¥p má»™t data source factory riÃªng. @Dao public interface ConcertDao { // The Integer type parameter tells Room to use a PositionalDataSource object @Query(\"SELECT * FROM concerts ORDER BY date DESC\") DataSource.Factory&lt;Integer, Concert&gt; concertsByDate(); } @Dao interface ConcertDao { // The Int type parameter tells Room to use a PositionalDataSource object. @Query(\"SELECT * FROM concerts ORDER BY date DESC\") fun concertsByDate(): DataSource.Factory&lt;Int, Concert&gt; } Äá»ƒ tÃ¬m hiá»ƒu thÃªm vá» cÃ¡ch táº£i data vÃ o PagedList, hÃ£y xem guide sau : Load paged data 3. UI PagedList class hoáº¡t Ä‘á»™ng vá»›i PagedListAdapter Ä‘á»ƒ táº£i cÃ¡c items vÃ o RecyclerView. Nhá»¯ng lá»›p nÃ y hoáº¡t Ä‘á»“ng cÃ¹ng vá»›i nhau Ä‘á»ƒ náº¡p vÃ  hiá»ƒn thá»‹ ná»™i dung mÃ  nÃ³ Ä‘Ã£ táº£i, tÃ¬m vÃ  táº£i trÆ°á»›c ná»™i dung khÃ´ng tháº¥y Ä‘Æ°á»£c, xá»­ lÃ½ animation khi thay Ä‘á»•i. Äá»ƒ tÃ¬m hiá»ƒu thÃªm, hÃ£y Ä‘á»c guide bÃªn sau : Display paged lists Support diferent data architecture Paging Library há»— trá»£ nhá»¯ng kiá»ƒu kiáº¿n trÃºc dá»¯ liá»‡u sau: Chá»‰ láº¥y dá»¯ liá»‡u tá»« backend server. Chá»‰ Ä‘Æ°á»£c lÆ°u trá»¯ trong database thiáº¿t bá»‹. Káº¿t há»£p cá»§a cÃ¡c nguá»“n khÃ¡c nhau, sá»­ dá»¥ng database thiáº¿t bá»‹ lÃ m cache. Váº­y, vá»›i má»—i case trÃªn thÃ¬ nÃªn handle nhÆ° nÃ o cho há»£p lÃ½ ? 1. Network Only Vá»›i dá»¯ liá»‡u tá»« backend server, nÃªn sá»­ dá»¥ng Retrofit Ä‘á»ƒ load dá»¯ liá»‡u vÃ o DataSource. 2. Database Only Sá»­ dá»¥ng recyclerview vá»›i Room. Theo cÃ¡ch Ä‘Ã³, báº¥t cá»© khi nÃ o data Ä‘Æ°á»£c insert hay modified trong database, nhá»¯ng thay Ä‘á»•i Ä‘Ã³ sáº½ tá»± Ä‘á»™ng cáº­p nháº­t lÃªn RecyclerView. 3. Network &amp; Database Observable database, láº¯ng nghe khi nÃ o database háº¿t dá»¯ liá»‡u báº±ng cÃ¡ch dÃ¹ng PagedList.BoundaryCallback. Sau Ä‘Ã³ báº¡n cÃ³ thá»ƒ táº£i thÃªm dá»¯ liá»‡u tá»« network vÃ  insert vÃ o database. Handle network errors Khi sá»­ dá»¥ng máº¡ng Ä‘á»ƒ táº£i hay phÃ¢n trang dá»¯ liá»‡u sá»­ dá»¥ng Paging, má»™t Ä‘iá»u quan trá»ng lÃ  báº¡n khÃ´ng nÃªn xá»­ lÃ½ báº±ng cÃ¡ch kiá»ƒm tra xem máº¡ng cÃ³ kháº£ dá»¥ng hay khÃ´ng táº¡i má»i thá»i Ä‘iá»ƒm. Bá»Ÿi cÃ³ nhiá»u káº¿t ná»‘i khÃ´ng liÃªn tá»¥c hay khÃ´ng á»•n Ä‘á»‹nh. Thay vÃ o Ä‘Ã³, báº¡n nÃªn xá»­ lÃ½ chÃºng báº±ng cÃ¡ch kiá»ƒm tra má»—i request lá»—i vÃ  cÆ¡ cháº¿ cho phÃ©p retry khi máº¡ng khÃ´ng kháº£ dá»¥ng. Conclusion Cáº£m Æ¡n cÃ¡c báº¡n Ä‘Ã£ Ä‘á»c bÃ i viáº¿t. Happy coding ^^" }, { "title": "[Android] DataBinding Basic", "url": "/posts/databinding-basic/", "categories": "Android", "tags": "android, data binding", "date": "2019-03-21 14:15:03 +0000", "content": "1. Introduction Databinding lÃ  thÆ° viá»‡n cho phÃ©p báº¡n liÃªn káº¿t cÃ¡c thÃ nh pháº§n UI trong layout tá»›i cÃ¡c nguá»“n dá»¯ liá»‡u trong á»©ng dá»¥ng báº±ng cÃ¡ch khai bÃ¡o thay vÃ¬ pháº£i coding. Databinding cÃ³ chÃºt khÃ¡c biá»‡t so vá»›i cÃ¡c layout bÃ¬nh thÆ°á»ng. NÃ³ báº¯t Ä‘áº§u báº±ng root tag ****, theo sau Ä‘Ã³ lÃ  **** cuá»‘i cÃ¹ng lÃ  root **** DÆ°á»›i dÃ¢y lÃ  má»™t vÃ­ dá»¥ : &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt; &lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt; &lt;data&gt; &lt;variable name=\"user\" type=\"com.example.User\"/&gt; &lt;/data&gt; &lt;LinearLayout android:orientation=\"vertical\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\"&gt; &lt;TextView android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:text=\"@{user.firstName}\"/&gt; &lt;TextView android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:text=\"@{user.lastName}\"/&gt; &lt;/LinearLayout&gt; &lt;/layout&gt; ThÃ´ng thÆ°á»ng Ä‘á»ƒ khai bÃ¡o 1 view thÃ´ng thÆ°á»ng sau Ä‘Ã³ setText cho nÃ³ ta thÆ°á»ng lÃ m nhÆ° sau : findViewById&lt;TextView&gt;(R.id.sample_text).apply { text = viewModel.userName } Äoáº¡n mÃ£ bÃªn dÆ°á»›i Ä‘Ã¢y sáº½ cho báº¡n tháº¥y cÃ¡ch mÃ  DataBinding gáº¯n text vÃ o UI trá»±c tiáº¿p. Äiá»u nÃ y giÃºp loáº¡i bá» viá»‡c pháº£i gá»i báº¥t cá»© dÃ²ng code nÃ o nhÆ° á»Ÿ bÃªn trÃªn : &lt;TextView android:Text = \"@{viewmodel.userName}\" /&gt; Váº­y má»¥c Ä‘Ã­ch cá»§a nÃ³ lÃ  gÃ¬: GiÃºp giáº£m thiá»ƒu lá»i gá»i trong activities, fragments.. ÄÆ¡n giáº£n, dá»… maintain hÆ¡n TÄƒng hiá»‡u nÄƒng á»©ng dá»¥ng vÃ  trÃ¡nh memory leak hay NPE. 2. Data Object Giáº£ sá»­ báº¡n cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng User nhÆ° sau : data class User(val firstName: String, val lastName: String) Khi Ä‘Ã³ viá»‡c biá»ƒu diá»…n @{user.firstName} sá»­ dá»¥ng vá»›i thuá»™c tÃ­nh android:text sáº½ truy xuáº¥t vÃ o trÆ°á»ng firstName cá»§a Ä‘á»‘i tÆ°á»£ng. 3. Binding Data Má»™t lá»›p rÃ ng buá»™c Ä‘Æ°á»£c tá»± Ä‘á»™ng gen ra cho má»—i file layout. Máº·c Ä‘á»‹nh, tÃªn cá»§a class Ä‘Æ°á»£c dá»±a trÃªn tÃªn cá»§a layout Ä‘Ã³ báº±ng cÃ¡ch chuyá»ƒn Ä‘á»•i nÃ³ sang Pascal case vÃ  thÃªm vÃ o háº­u tá»‘ Binding. VÃ­ dá»¥ : activity_main.xml =&gt; ActivityMainBinding Lá»›p nÃ y giá»¯ táº¥t cáº£ cÃ¡c rÃ ng buá»™c tá»« cÃ¡c thuá»™c tÃ­nh layout (VD: biáº¿n user) vÃ  cÃ¡ch gáº¯n giÃ¡ trá»‹ cho cÃ¡c biá»ƒu thá»©c rÃ ng buá»™c. override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) val binding: ActivityMainBinding = DataBindingUtil.setContentView(this, R.layout.activity_main) binding.user = User(\"Test\", \"User\") } Táº¡i runtime, á»©ng dá»¥ng sáº½ hiá»ƒn thá»‹ user Test trÃªn mÃ n hÃ¬nh. NgoÃ i ra, báº¡n cÅ©ng cÃ³ thá»ƒ láº¥y view sá»­ dá»¥ng LayoutInflater, Ä‘Æ°á»£c biá»ƒu diá»…n nhÆ° sau: val binding: ActivityMainBinding = ActivityMainBinding.inflate(getLayoutInflater()) Náº¿u báº¡n sá»­ dá»¥ng data binding bÃªn trong Fragment,Listview hay RecyclerView adapter, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c inflate() cá»§a lá»›p binding hoáº·c lá»›p DataBindingUtil. val listItemBinding = ListItemBinding.inflate(layoutInflater, viewGroup, false) // or val listItemBinding = DataBindingUtil.inflate(layoutInflater, R.layout.list_item, viewGroup, false) 4. Expression language Äá»ƒ diá»…n Ä‘áº¡t trong databinding cÃ³ thá»ƒ sá»­ dá»¥ng 1 sá»‘ cÃ¡ch diá»…n Ä‘áº¡t sau. NÃ³ cÅ©ng tÆ°Æ¡ng tá»± cÃ¡ch biá»ƒu diá»…n trong mÃ£ code : Mathematical + - / * % String concatenation + Logical &amp;&amp; Â  Binary &amp; ^ Unary + - ! ~ ShiftÂ Â»Â Â»&gt; Â« Comparison == &gt; &lt; &gt;= &lt;= instanceof Grouping () Literals - character, String, numeric, null Cast Method calls Field access Array access [] Ternary operator ?: VÃ­ dá»¥ : android:text=\"@{String.valueOf(index+1)}\" android:visibility=\"@{age &lt; 13 ? View.GONE : View.VISIBLE\" android:transitionName='@{\"image_\" + id}' 4.1. Missing Operators Má»™t sá»‘ operation dÆ°á»›i bá»‹ thiáº¿u tá»« cÃº phÃ¡p biá»ƒu diá»…n mÃ  báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng trong cÃ¡c Ä‘oáº¡n mÃ£ Ä‘Æ°á»£c quáº£n lÃ½ : this super new Explicit generic invocation 4.2. Null coalescing operator (??) ToÃ¡n tá»­ káº¿t há»£p null (??) nÃ y sáº½ chá»n toÃ¡n háº¡ng bÃªn trÃ¡i náº¿u nÃ³ khÃ´ng null cÃ²n khÃ´ng thÃ¬ sáº½ chá»n bÃªn pháº£i android:text=\"@{user.displayName ?? user.lastName}\" CÃ¢u lá»‡nh trÃªn tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i : android:text=\"@{user.displayName != null ? user.displayName : user.lastName}\" 4.3. Avoid null pointer exceptions MÃ£ code Ä‘Æ°á»£c gen vá»›i Databinding sáº½ tá»± Ä‘á»™ng check cÃ¡c giÃ¡ trá»‹ null vÃ  trÃ¡nh cÃ¡c Null Pointer Exceptions. VÃ­ dá»¥: Báº¡n tham chiáº¿u Ä‘áº¿n @{user.name} mÃ  user Ä‘ang null thÃ¬ user.name sáº½ Ä‘Æ°á»£c gÃ¡n giÃ¡ trá»‹ máº·c Ä‘á»‹nh lÃ  null. 4.4. Collections Má»™t sá»‘ collection phá»• biáº¿n cÃ³ thá»ƒ truy cáº­p bá»Ÿi toÃ¡n tá»­ [ ] : arrays lists sparse lists map &lt;data&gt; &lt;import type=\"android.util.SparseArray\"/&gt; &lt;import type=\"java.util.Map\"/&gt; &lt;import type=\"java.util.List\"/&gt; &lt;variable name=\"list\" type=\"List&lt;String&gt;\"/&gt; &lt;variable name=\"sparse\" type=\"SparseArray&lt;String&gt;\"/&gt; &lt;variable name=\"map\" type=\"Map&lt;String, String&gt;\"/&gt; &lt;variable name=\"index\" type=\"int\"/&gt; &lt;variable name=\"key\" type=\"String\"/&gt; &lt;/data&gt; â€¦ android:text=\"@{list[index]}\" â€¦ android:text=\"@{sparse[index]}\" â€¦ android:text=\"@{map[key]}\" 4.5. String Literals CÃ³ thá»ƒ sá»­ dá»¥ng nhÃ¡y Ä‘Æ¡n hoáº·c nhÃ¡y kÃ©p Ä‘á»ƒ bao quanh giÃ¡ trá»‹ thuá»™c tÃ­nh : android:text='@{map[\"firstName\"]}' hoáº·c android:text=\"@{map[`firstName`]}\" 4.6. Resources CÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c giÃ¡ trá»‹ cá»§a resource báº±ng cÃ¡ch khai bÃ¡o nhÆ° sau: android:padding=\"@{large? @dimen/largePadding : @dimen/smallPadding}\" Äá»ƒ format strings vÃ  plurals cáº§n sá»­ dá»¥ng theo format : android:text=\"@{@string/nameFormat(firstName, lastName)}\" android:text=\"@{@plurals/banana(bananaCount)}\" Má»™t sá»‘ resource yÃªu cáº§u rÃµ rÃ ng loáº¡i : 5. Event Handling Databinding cho phÃ©p báº¡n diá»…n Ä‘áº¡t xá»­ lÃ½ sá»± kiá»‡n. TÃªn thuá»™c tÃ­nh sá»± kiá»‡n Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh báº±ng tÃªn cá»§a phÆ°Æ¡ng thá»©c listener vá»›i 1 vÃ i ngoáº¡i lá»‡. VÃ­ dá»¥ View.OnClickListener cÃ³ method onClick(), nÃªn thuá»™c tÃ­nh cho sá»± kiá»‡n nÃ y lÃ  android:onClick. Má»™t sá»‘ thuá»™c tÃ­nh khÃ¡c nhÆ° : android:onClick android:onSearchClick android:onZoomIn android:onZoomOut ... Trong Databinding cÃ³ 2 cÆ¡ cháº¿ xá»­ lÃ½ sá»± kiá»‡n : Method references : Listener bindings : Method References Sá»± khÃ¡c biá»‡t giá»¯a method references vÃ  listener binding lÃ  thá»±c táº¿ thÃ¬ listener implementation Ä‘Æ°á»£c táº¡o khi data Ä‘Æ°á»£c gáº¯n vÃ o, chá»© ko pháº£i khi sá»± kiá»‡n Ä‘Æ°á»£c kÃ­ch hoáº¡t. =&gt; Náº¿u báº¡n muá»‘n evaluate the expresstion khi sá»± kiá»‡n xáº£y ra. Báº¡n nÃªn sá»­ dá»¥ng listener binding. Gá»‰a sá»­, Ä‘á»ƒ gÃ¡n má»™t sá»± kiá»‡n cho handler cá»§a nÃ³, sá»­ dá»¥ng cÃ¡ch binding bÃ¬nh thÆ°á»Ÿng. vÃ­ dá»¥ : public class MyHandlers { public void onClickFriend(View view) { //TODO } } Binding expression cÃ³ thá»ƒ gÃ¡n click listener cho view thÃ´ng qua method onClickFriend() nhÆ° sau : &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt; &lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt; &lt;data&gt; &lt;variable name=\"handlers\" type=\"com.example.MyHandlers\"/&gt; &lt;variable name=\"user\" type=\"com.example.User\"/&gt; &lt;/data&gt; &lt;LinearLayout android:orientation=\"vertical\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\"&gt; &lt;TextView android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:text=\"@{user.firstName}\" android:onClick=\"@{handlers::onClickFriend}\"/&gt; &lt;/LinearLayout&gt; &lt;/layout&gt; Listener binding Listener binding lÃ  kiá»ƒu binding Ä‘Æ°á»£c cháº¡y khi cÃ³ sá»± kiá»‡n xáº£y ra. NÃ³ tÆ°Æ¡ng tá»± method refrenence nhÆ°ng nÃ³ cho phÃ©p báº¡n cháº¡y cÃ¡c biá»ƒu thÆ°c rÃ ng buá»™c dá»¯ liá»‡u tÃ¹y Ã½. public class Presenter { public void onSaveClick(Task task){} } Khi Ä‘Ã³ báº¡n cÃ³ thá»ƒ bind sá»± kiá»‡n tá»›i onSaveClick(), nhÆ° sau : &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt; &lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt; &lt;data&gt; &lt;variable name=\"task\" type=\"com.android.example.Task\" /&gt; &lt;variable name=\"presenter\" type=\"com.android.example.Presenter\" /&gt; &lt;/data&gt; &lt;LinearLayout android:layout_width=\"match_parent\" android:layout_height=\"match_parent\"&gt; &lt;Button android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:onClick=\"@{() -&gt; presenter.onSaveClick(task)}\" /&gt; &lt;/LinearLayout&gt; &lt;/layout&gt; Import, variables, include Databinding cung cáº¥p 1 sá»‘ feature nhÆ° import, variable, includes. Import giÃºp viá»‡c tham chiáº¿u Ä‘áº¿n class bÃªn trong layout cá»§a báº¡n Ä‘Æ¡n giáº£n hÆ¡n. Variable cho phÃ©p báº¡n miÃªu táº£ Ä‘á»‘i tÆ°á»£ng Type Aliases Khi cÃ³ xung Ä‘á»™t vá» tÃªn lá»›p, má»™t trong cÃ¡c lá»›p cÃ³ thá»ƒ Ä‘Æ°á»£c Ä‘á»•i thÃ nh bÃ­ danh. (alias) VÃ­ dá»¥ sau Ä‘Ã¢y sáº½ rename View class trong package com.example.real.estate thÃ nh Vista : &lt;import type=\"android.view.View\"/&gt; &lt;import type=\"com.example.real.estate.View\" alias=\"Vista\"/&gt; Imported other class &lt;data&gt; &lt;import type=\"com.example.User\"/&gt; &lt;import type=\"java.util.List\"/&gt; &lt;variable name=\"user\" type=\"User\"/&gt; &lt;variable name=\"userList\" type=\"List&lt;User&gt;\"/&gt; &lt;/data&gt; Imported types cÃ³ thá»ƒ sá»­ dá»¥ng khi tham chiáº¿u cÃ¡c trÆ°á»ng hay method static. Äoáº¡n code sau imports lá»›p MyStringUtils vÃ  tham chiáº¿u Ä‘áº¿n lá»›p capitalize cá»§a nÃ³ : &lt;data&gt; &lt;import type=\"com.example.MyStringUtils\"/&gt; &lt;variable name=\"user\" type=\"com.example.User\"/&gt; &lt;/data&gt; â€¦ &lt;TextView android:text=\"@{MyStringUtils.capitalize(user.lastName)}\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\"/&gt; 6. Conclusion TrÃªn Ä‘Ã¢y lÃ  pháº§n má»Ÿ Ä‘áº§u vá» data binding, hi vá»ng bÃ i viáº¿t cÃ³ thá»ƒ giÃºp cÃ¡c báº¡n cÃ³ cÃ¡i nhÃ¬n tá»•ng quan vá» databinding vÃ  cÃ¡ch dÃ¹ng cÆ¡ báº£n. Trong bÃ i viáº¿t sau mÃ¬nh sáº½ cÃ¹ng tÃ¬m hiá»ƒu vá» cÃ¡ch sá»­ dá»¥ng data binding vá»›i LiveData, binding adapterâ€¦ Cáº£m Æ¡n cÃ¡c báº¡n Ä‘Ã£ Ä‘á»c bÃ i viáº¿t. Happy coding ^^" }, { "title": "[Android] Kotlin Sealed Class", "url": "/posts/kotlin-sealed-class/", "categories": "Android", "tags": "android, kotlin", "date": "2019-01-23 14:15:03 +0000", "content": "Introduction Sealed class Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ Ä‘áº¡i diá»‡n cho cÃ¡c class phÃ¢n cáº¥p bá»‹ háº¡n cháº¿. Trong Ä‘Ã³ má»™t giÃ¡ trá»‹ chá»‰ cÃ³ thá»ƒ cÃ³ má»™t kiá»ƒu tá»« má»™t táº­p cÃ³ giá»›i háº¡n vÃ  khÃ´ng thá»ƒ cÃ³ báº¥t kÃ¬ loáº¡i nÃ o khÃ¡c. Vá» máº·t nÃ o Ä‘Ã³, sealed class lÃ  má»™t pháº§n má»Ÿ rá»™ng cá»§a enum class chá»‰ khÃ¡c á»Ÿ chá»— má»—i enum constant chá»‰ cÃ³ má»™t instance trong khi má»—i subclass cá»§a sealed class cÃ³ thá»ƒ cÃ³ nhiá»u instance nhÆ° má»™t class thÆ°á»ng vÃ¬ váº­y cÃ³ thá»ƒ chá»©a state trong cÃ¡c class nÃ y. Giá» hÃ£y cÃ¹ng tÃ¬m hiá»ƒu cÃ¡ch implement má»™t sealed class nhÆ° tháº¿ nÃ o nhÃ© ;D Implementing Kotlin sealed classes Äá»ƒ khai bÃ¡o má»™t sealed class, Báº¡n cáº§n thÃªm modifier sealed trÆ°á»›c tÃªn cá»§a class. sealed class A { class B : A() class C : A() } Má»™t sealed class lÃ  abstract vÃ  khÃ´ng thá»ƒ Ä‘Æ°á»£c khá»Ÿi táº¡o. VÃ­ dá»¥ : fun main(args: Array&lt;String&gt;) { var a = A() //compiler error. Class A cannot be instantiated. } Máº·c Ä‘á»‹nh, cÃ¡c constructors cá»§a sealed class cÃ³ modifier lÃ  private. Táº¥t cáº£ cÃ¡c subclass cá»§a sealed class pháº£i Ä‘Æ°á»£c khai bÃ¡o trong cÃ¹ng má»™t file. Sealed class ráº¥t quan trá»ng trong viá»‡c Ä‘áº£m báº£o type safety báº±ng cÃ¡ch háº¡n cháº¿ táº­p cÃ¡c kiá»ƒu chá»‰ Ä‘á»‹nh táº¡i thá»i Ä‘iá»ƒm biÃªn dá»‹ch (compile-time). sealed class A { class B : A() class C : A() { class E : A() //this works. } init { println(\"Sealed class A\") } } class D : A() //this works { class F: A() //This won't work. Since sealed class is defined in another scope. } Sealed class constructors sealed class A(var name: String){ class B : A(\"B\") class C : A(\"C\") } class D : A(\"D\") fun main(args: Array&lt;String&gt;) { var b = A.B() var d = D() } Data class &amp; object in sealed class sealed class A { class B : A() class C : A() object D : A() { fun name() { println(\"Object D\") } } data class E(var name: String) : A() } fun main(args: Array&lt;String&gt;) { val e = A.E(\"Anupam\") println(e) //prints E(name=Anupam) var d = A.D d.name() //prints Object D } Difference between enum and sealed classes Sealed class cho phÃ©p ta táº¡o cÃ¡c thá»ƒ hiá»‡n vá»›i nhiá»u kiá»ƒu khÃ¡c nhau trong khi enum sá»­ dá»¥ng cÃ¹ng loáº¡i cho táº¥t cáº£ enum constants. Vá»›i enum báº¡n khÃ´ng thá»ƒ lÃ m Ä‘Æ°á»£c nhÆ° dÆ°á»›i Ä‘Ã¢y : enum class Months(string: String){ January(\"Jan\"), February(2), // error } Bá»Ÿi enum chá»‰ cho phÃ©p single type cho cÃ¡c háº±ng mÃ  thÃ´i. ÄÃ¢y lÃ  cÃ¡ch mÃ  sealed class giáº£i quyáº¿t váº¥n Ä‘á» nÃ y : sealed class Months { class January(var shortHand: String) : Months() class February(var number: Int) : Months() class March(var shortHand: String, var number: Int) : Months() } Giáº£ sá»­ báº¡n cÃ³ má»™t newfeed app, báº¡n cÃ³ thá»ƒ táº¡o cÃ¡c kiá»ƒu lá»›p khÃ¡c nhau cho bÃ i Post nhÆ° Status, Image hay Video cháº³ng háº¡n. sealed class Post { class Status(var text: String) : Post() class Image(var url: String, var caption: String) : Post() class Video(var url: String, var timeDuration: Int, var encoding: String): Post() } Sealed classes and when Sealed class thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng vá»›i cÃ¡c cÃ¢u lá»‡nh when do má»—i lá»›p con vÃ  kiá»ƒu cá»§a nÃ³ biá»ƒu diá»…n má»™t case. HÆ¡n ná»¯a, bá»Ÿi sealed class giá»›i háº¡n cÃ¡c kiá»ƒu nÃªn khá»‘i else coi nhÆ° bá». sealed class Shape { class Circle(var radius: Float): Shape() class Square(var length: Int): Shape() class Rectangle(var length: Int, var breadth: Int): Shape() } fun eval(e: Shape) = when (e) { is Shape.Circle -&gt; println(\"Circle area is ${3.14*e.radius*e.radius}\") is Shape.Square -&gt; println(\"Square area is ${e.length*e.length}\") is Shape.Rectangle -&gt; println(\"Rectagle area is ${e.length*e.breadth}\") } CÃ¹ng thá»­ tÃ­nh toÃ¡n vá»›i hÃ m eval xem : fun main(args: Array&lt;String&gt;) { var circle = Shape.Circle(4.5f) var square = Shape.Square(4) var rectangle = Shape.Rectangle(4,5) eval(circle) //Circle area is 63.585 eval(square) //Square area is 16 eval(rectangle) //Rectangle area is 20 //eval(x) //compile-time error. } Note : Modifier is kiá»ƒm tra náº¿u class Ä‘Ã³ thuá»™c má»™t trong cÃ¡c kiá»ƒu Ä‘Ã£ cho vÃ  chá»‰ yÃªu cáº§u cho cÃ¡c class. Vá»›i cÃ¡c objects thÃ¬ sao ? sealed class Shape{ class Circle(var radius: Float): Shape() class Square(var length: Int): Shape() object Rectangle: Shape() { var length: Int = 0 var breadth : Int = 0 } } fun eval(e: Shape) = when (e) { is Shape.Circle -&gt; println(\"Circle area is ${3.14*e.radius*e.radius}\") is Shape.Square -&gt; println(\"Square area is ${e.length*e.length}\") Shape.Rectangle -&gt; println(\"Rectangle area is ${Shape.Rectangle.length*Shape.Rectangle.breadth}\") } Conclusion Hi vá»ng bÃ i viáº¿t cÃ³ thá»ƒ giÃºp cÃ¡c báº¡n hiá»ƒu rÃµ hÆ¡n vá» sealed class vÃ  khi nÃ o thÃ¬ sá»­ dá»¥ng nÃ³ má»™t cÃ¡ch há»£p lÃ½. Cáº£m Æ¡n cÃ¡c báº¡n Ä‘Ã£ Ä‘á»c bÃ i viáº¿t. Happy coding ^^ References Kotlin Docs Kotlin Sealed Class" }, { "title": "[Android] Kotlin standard functions: run-with-let-also-apply", "url": "/posts/kotlin-starndard-function/", "categories": "Android", "tags": "android, performance", "date": "2019-01-23 14:15:03 +0000", "content": "Giá»›i thiá»‡u Standard.kt lÃ  má»™t pháº§n náº±m trong Kotlin library. Trong Ä‘Ã³ Ä‘á»‹nh nghÄ©a má»™t sá»‘ hÃ m má»Ÿ rá»™ng nhÆ° let, apply, run with also mÃ  cháº¯c háº³n báº¡n Ä‘Ã£ tá»«ng nhÃ¬n tháº¥y trong cÃ¡c guide hay Ä‘Ã£ tá»«ng sá»­ dá»¥ng chÃºng. Trong bÃ i biáº¿t nÃ y, ta sáº½ cÃ¹ng tÃ¬m hiá»ƒu cÃ¡ch Ä‘á»ƒ phÃ¢n biá»‡t sá»± khÃ¡c nhau giá»¯a chÃºng vÃ  khi nÃ o thÃ¬ sá»­ dá»¥ng nhÃ© :D Scoping Functions Má»™t sá»‘ function mÃ  mÃ¬nh focus vÃ o lÃ  run, with, T.run, T.let, T.also vÃ  T.apply. Ta gá»i Ä‘Ã³ lÃ  nhá»¯ng scoping function (hÃ m pháº¡m vi) bá»Ÿi chÃºng cÃ³ chá»©c nÄƒng chÃ­nh lÃ  cung cáº¥p scope nhá» hÆ¡n tá»« hÃ m gá»i nÃ³. BÃªn dÆ°á»›i lÃ  má»™t vÃ­ dá»¥ vá» scoping function : fun test() { var mood = \"I am sad\" run { val mood = \"I am happy\" println(mood) // I am happy } println(mood) // I am sad } Vá»›i vÃ­ dá»¥ nÃ y thÃ¬ báº¡n cÃ³ thá»ƒ cÃ³ má»™t scope riÃªng biá»‡t vá»›i giÃ¡ trá»‹ mood Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a láº¡i thÃ nh I am happy vÃ  nÃ³ chá»‰ tá»“n táº¡i bÃªn trong run. Má»™t há»¯u Ã­ch khÃ¡c cá»§a run lÃ  nÃ³ tráº£ vá» Ä‘á»‘i tÆ°á»£ng cuá»‘i cÃ¹ng náº±m trong scope. run { if (firstTimeView) introView else normalView }.show() // similarly if (firstTimeView) { introView.show() } else { normalView.show() } Dá»… tháº¥y sá»­ dá»¥ng run sáº½ ngáº¯n gá»n hÆ¡n nhiá»u so vá»›i cÃ¡ch thÃ´ng thÆ°á»ng, 3 attributes of scoping functions Äá»ƒ phÃ¢n loáº¡i cÃ¡c scoping funtion, ta sáº½ dá»±a vÃ o nhá»¯ng tiÃªu chÃ­ sau : Normal vs. extension function This vs. it argument Return this vs. other type 1. Normal vs. extension function Náº¿u ta Ä‘á»ƒ Ã½ with vÃ  T.run sáº½ tháº¥y 2 hÃ m nÃ y khÃ¡ lÃ  giá»‘ng nhau. VÃ­ dá»¥ bÃªn dÆ°á»›i cho ra káº¿t quáº£ tÆ°Æ¡ng Ä‘Æ°Æ¡ng nhau : with(webview.settings) { javaScriptEnabled = true databaseEnabled = true } // similarly webview.settings.run { javaScriptEnabled = true databaseEnabled = true } Tuy nhiÃªn, khÃ¡c nhau giá»¯a chÃºng lÃ  má»™t tháº±ng lÃ  normal function (with), má»™t tháº±ng lÃ  extension function (T.run) Váº­y khi nÃ o thÃ¬ sá»­ dá»¥ng with, khi nÃ o thÃ¬ sá»­ dá»¥ng T.run ? HÃ£y tÆ°á»Ÿng tÆ°á»£ng náº¿u webview.settings cÃ³ thá»ƒ null, vÃ­ dá»¥ bÃªn trÃªn sáº½ Ä‘Æ°á»£c viáº¿t láº¡i nhÆ° sau : // Yack! with(webview.settings) { this?.javaScriptEnabled = true this?.databaseEnabled = true } } // Nice. webview.settings?.run { javaScriptEnabled = true databaseEnabled = true } Trong trÆ°á»ng há»£p nÃ y, T.run tá»‘t hÆ¡n, bá»Ÿi ta cÃ³ thá»ƒ check null trÆ°á»›c khi sá»­ dá»¥ng nÃ³. 2. This vs. it argument Tiáº¿p theo lÃ  T.run vÃ  T.let, cáº£ 2 function khÃ¡ giá»‘ng nhau ngoáº¡i trá»« cÃ¡ch mÃ  chÃºng nháº­n tham sá»‘. HÃ£y nhÃ¬n vÃ­ dá»¥ bÃªn dÆ°á»›i : stringVariable?.run { println(\"The length of this String is $length\") } // Similarly. stringVariable?.let { println(\"The length of this String is ${it.length}\") } Náº¿u Ä‘á»ƒ Ã½ vÃ o chi tiáº¿t cá»§a T.run, báº¡n sáº½ tháº¥y T.run chá»‰ Ä‘Æ°á»£c táº¡o ra dÆ°á»›i dáº¡ng extension function gá»i lÃ  T.() . Do Ä‘Ã³ táº¥t cáº£ bÃªn trong scope, T cÃ³ thá»ƒ Ä‘Æ°á»£c gá»i nhÆ° this. Trong láº­p trÃ¬nh, pháº§n lá»›n this Ä‘á»u cÃ³ thá»ƒ bá» qua. VÃ¬ váº­y, ta cÃ³ thá»ƒ sá»­ dá»¥ng $length thay vÃ¬ ${this.length}. Vá»›i T.let, báº¡n sáº½ tháº¥y T.let gá»­i chÃ­nh nÃ³ vÃ o block: (T). vÃ  cÃ³ thá»ƒ Ä‘Æ°á»£c gá»i trong function nhÆ° it. Tá»« Ä‘áº·c Ä‘iá»ƒm cá»§a T.let vÃ  T.run, cÃ³ váº» nhÆ° T.run tá»‘t hÆ¡n T.let, nhÆ°ng T.let cÃ³ má»™t sá»‘ Æ°u Ä‘iá»ƒm nhÆ° sau : T.let giÃºp phÃ¢n biá»‡t rÃµ rÃ ng hÆ¡n biáº¿n thÃ nh viÃªn vÃ  bÃªn ngoÃ i Trong 1 sá»‘ trÆ°á»ng há»£p this khÃ´ng thá»ƒ bá» qua, â€œitâ€ ngáº¯n hÆ¡n â€œthisâ€ T.let cho phÃ©p Ä‘áº·t tÃªn chuyá»ƒn Ä‘á»•i, do Ä‘Ã³ báº¡n cÃ³ thá»ƒ Ä‘á»•i â€œitâ€ sang má»™t cÃ¡i tÃªn khÃ¡c dá»… hiá»ƒu hÆ¡n. stringVariable?.let { nonNullString -&gt; println(\"The non null string is $nonNullString\") } 3.Return this vs. other type Giá» hÃ£y Ä‘á»ƒ Ã½ Ä‘áº¿n T.let vÃ  T.also, cáº£ 2 Ä‘á»u giá»‘ng nhau náº¿u ta nhÃ¬n vÃ o pháº§n thÃ¢n cá»§a chÃºng : stringVariable?.let { println(\"The length of this String is ${it.length}\") } // Exactly the same as below stringVariable?.also { println(\"The length of this String is ${it.length}\") } Tuy nhiÃªn, sá»± khÃ¡c biá»‡t giá»¯a chÃºng lÃ  Ä‘á»‘i tÆ°á»£ng tráº£ vá». T.let cho phÃ©p tráº£ vá» má»™t kiá»ƒu giÃ¡ trá»‹ khÃ¡c trong khi T.also tráº£ vá» chÃ­nh nÃ³ T. Cáº£ 2 Ä‘á»u há»¯u Ã­ch Ä‘á»‘i vá»›i cÃ¡c hÃ m chuá»—i (chaining function) khi mÃ  T.let cho phÃ©p báº¡n triá»ƒn khai cÃ¡c operation liÃªn tá»¥c vÃ  T.also cho phÃ©p báº¡n biá»ƒu diá»…n trÃªn cÃ¹ng má»™t variable. DÆ°á»›i Ä‘Ã¢y lÃ  má»™t minh há»a : val original = \"abc\" // Evolve the value and send to the next chain original.let { println(\"The original String is $it\") // \"abc\" it.reversed() // evolve it as parameter to send to next let }.let { println(\"The reverse String is $it\") // \"cba\" it.length // can be evolve to other type }.let { println(\"The length of the String is $it\") // 3 } // Wrong // Same value is sent in the chain (printed answer is wrong) original.also { println(\"The original String is $it\") // \"abc\" it.reversed() // even if we evolve it, it is useless }.also { println(\"The reverse String is ${it}\") // \"abc\" it.length // even if we evolve it, it is useless }.also { println(\"The length of the String is ${it}\") // \"abc\" } // Corrected for also (i.e. manipulate as original string // Same value is sent in the chain original.also { println(\"The original String is $it\") // \"abc\" }.also { println(\"The reverse String is ${it.reversed()}\") // \"cba\" }.also { println(\"The length of the String is ${it.length}\") // 3 } T.also cÃ³ váº» khÃ´ng cÃ³ tÃ¡c dá»¥ng á»Ÿ trÃªn, vÃ¬ ta cÃ³ thá»ƒ káº¿t há»£p chÃºng thÃ nh má»™t khá»‘i chá»©c nÄƒng duy nháº¥t. Tuy nhiÃªn, suy nghÄ© kÄ© má»™t chÃºt, chÃºng ta cÃ³ thá»ƒ tháº¥y nÃ³ cÃ³ má»™t sá»‘ Ä‘iá»ƒm máº¡nh nhÆ°: TÃ¡ch rá»i ráº¥t rÃµ rÃ ng trÃªn cÃ¹ng má»™t Ä‘á»‘i tÆ°á»£ng, tá»©c lÃ  lÃ m cho pháº§n chá»©c nÄƒng nhá» hÆ¡n. CÃ³ thá»ƒ tá»± thao tÃ¡c trÆ°á»›c khi Ä‘Æ°á»£c sá»­ dá»¥ng, táº¡o ra má»™t hoáº¡t Ä‘á»™ng xÃ¢y dá»±ng chuá»—i. Thá»­ káº¿t há»£p T.let vÃ  T.also xem nÃ o : // Normal approach fun makeDir(path: String): File { val result = File(path) result.mkdirs() return result } // Improved approach fun makeDir(path: String) = path.let{ File(it) }.also{ it.mkdirs() } Looking at all attributes Qua cÃ¡c tiÃªu chÃ­ trÃªn, ta cÃ³ thá»ƒ tháº¥y Ä‘Æ°á»£c khÃ¡ Ä‘áº§y Ä‘á»§ vá» cÃ¡ch cÃ¡c function run with let also hoáº¡t Ä‘á»™ng. Váº­y cÃ²n T.apply thÃ¬ sao ? T.apply lÃ  má»™t extension function T.apply gá»­i this nhÆ° má»™t tham sá»‘ T.apply tráº£ vá» this. DÆ°á»›i Ä‘Ã¢y lÃ  vÃ­ dá»¥ : // Normal approach fun createInstance(args: Bundle) : MyFragment { val fragment = MyFragment() fragment.arguments = args return fragment } // Improved approach fun createInstance(args: Bundle) = MyFragment().apply { arguments = args } // Normal approach fun createIntent(intentData: String, intentAction: String): Intent { val intent = Intent() intent.action = intentAction intent.data=Uri.parse(intentData) return intent } // Improved approach, chaining fun createIntent(intentData: String, intentAction: String) = Intent().apply { action = intentAction } .apply { data = Uri.parse(intentData) } Function selections Dá»±a vÃ o cÃ¡c Ä‘áº·c trÆ°ng vÃ  tÃ­nh nÄƒng cá»§a tá»«ng loáº¡i mÃ  báº¡n hÃ£y quyáº¿t Ä‘á»‹nh sá»­ dá»¥ng chÃºng má»™t cÃ¡ch há»£p lÃ½ nhÃ© :D References https://medium.com/@elye.project/mastering-kotlin-standard-functions-run-with-let-also-and-apply-9cd334b0ef84" }, { "title": "[Android] Performanceâ€Š - â€ŠRendering", "url": "/posts/android-performance-rendering/", "categories": "Android", "tags": "android, performance", "date": "2018-12-23 14:15:03 +0000", "content": "Hiá»‡u nÄƒng á»©ng dá»¥ng luÃ´n lÃ  váº¥n Ä‘á» vá»›i má»i láº­p trÃ¬nh viÃªn mobile. Bá»Ÿi láº½, náº¿u báº¡n nháº­n ra á»©ng dá»¥ng cá»§a mÃ¬nh cháº­m hoáº·c tá»‡ hÆ¡n lÃ  ai Ä‘Ã³ nÃ³i vá»›i báº¡n ráº±ng á»©ng dá»¥ng cá»§a báº¡n cháº­m quÃ¡ thÃ¬ tháº­t Ä‘Ã¡ng buá»“n pháº£i khÃ´ng ? :D Rendering lÃ  má»™t trong nhá»¯ng váº¥n Ä‘á» hiá»‡u suáº¥t phá»• biáº¿n nháº¥t. Trong bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ cÃ¹ng cÃ¡c báº¡n tÃ¬m hiá»ƒu vá» rendering trong android vÃ  má»™t sá»‘ váº¥n Ä‘á» liÃªn quan nhÃ©. 1. Giá»›i thiá»‡u Trong Android, há»‡ thá»‘ng sáº½ cá»‘ váº½ láº¡i cÃ¡c hoáº¡t Ä‘á»™ng cá»§a báº¡n sau má»—i 16ms. Äiá»u Ä‘Ã³ cÃ³ nghÄ©a ráº±ng á»©ng dá»¥ng cá»§a báº¡n cáº§n xá»­ lÃ½ cÃ¡c logic code Ä‘á»ƒ update mÃ n hÃ¬nh trong khoáº£ng 16ms, Ä‘iá»u nÃ y giÃºp á»©ng dá»¥ng cá»§a báº¡n trá»Ÿ nÃªn â€œmÆ°á»£tâ€. NhÆ°ng Ä‘iá»u gÃ¬ xáº£y ra náº¿u báº¡n khÃ´ng thá»ƒ hoÃ n thÃ nh logic code trong 16ms Ä‘Ã³ ? Hiá»‡n tÆ°á»£ng nÃ y gá»i lÃ  â€œDropped Frameâ€ hay tá»¥t khung hÃ¬nh. Giáº£ sá»­ logic cá»§a báº¡n chiáº¿m 24ms váº½ trong khi há»‡ thá»‘ng cá»‘ gáº¯ng lÃ m má»›i khung hÃ¬nh má»—i 16ms. Bá»Ÿi váº­y pháº£i sau 32ms thÃ¬ khung hÃ¬nh má»›i Ä‘Æ°á»£c cáº­p nháº­t. Náº¿u viá»‡c drop khung hÃ¬nh tá»›i 5s thÃ¬ báº¡n sáº½ tháº¥y thÃ´ng bÃ¡o lá»—i ARN (Application Not Responding) Äá»ƒ tÃ¬m hiá»ƒu kÄ© hÆ¡n, hÃ£y xem viá»‡c render Ä‘Æ°á»£c thá»±c hiá»‡n nhÆ° nÃ o nhÃ©! 2. Rendering Vá» cÆ¡ báº£n, viá»‡c rendering Ä‘Æ°á»£c chia thÃ nh 2 pháº§n : CPU rendering GPU rendering Vá» phÃ­a CPU, váº¥n Ä‘á» hiá»‡u suáº¥t thÆ°á»ng Ä‘áº¿n tá»« viá»‡c sá»­ dá»¥ng layout khÃ´ng cáº§n thiáº¿t vÃ  invalidate() khÃ´ng Ä‘Ãºng chá»—. Vá» phÃ­a GPU, Ä‘Ã³ lÃ  Overdraw. Äá»ƒ nhá»¯ng file .XML mÃ  báº¡n design Ä‘Æ°á»£c chuyá»ƒn thÃ nh nhá»¯ng pixels mÃ  ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ tháº¥y vÃ  hiá»ƒn thá»‹, nÃ³ pháº£i tráº£i qua 1 quÃ¡ trÃ¬nh Ä‘Æ°á»£c gá»i lÃ  Rasterization. ÄÃ¢y lÃ  quÃ¡ trÃ¬nh chuyá»ƒn Ä‘á»•i cÃ¡c Ä‘á»‘i tÆ°á»£ng cáº¥p cao nhÆ° String, Button, Path, Shapeâ€¦ thÃ nh nhá»¯ng pixel trÃªn mÃ n hÃ¬nh. Äá»ƒ rÃµ hÆ¡n hÃ£y nhÃ¬n flow bÃªn dÆ°á»›i: Báº¥t cá»© khi nÃ o cÃ¡c Ä‘á»‘i tÆ°á»£ng cáº§n Ä‘Æ°á»£c váº½ lÃªn mÃ n hÃ¬nh, Ä‘áº§u tiÃªn nÃ³ Ä‘Æ°á»£c CPU xá»­ lÃ½ thÃ nh cÃ¡c dáº¡ng nguyÃªn thá»§y nhÆ° polygons vÃ  texture vÃ  gá»­i tá»›i GPU thÃ´ng qua táº­p cÃ¡c OpenGLES API. CÃ¡c dá»¯ liá»‡u Ä‘Æ°á»£c chuyá»ƒn tá»›i GPU Ä‘á»ƒ Rasterization vÃ  Ä‘Æ°á»£c váº½ lÃªn mÃ n hÃ¬nh. Má»™t vÃ­ dá»¥ vá» quÃ¡ trÃ¬nh render 1 button lÃªn mÃ n hÃ¬nh : 3. Overdraw Overdraw lÃ  má»™t thuáº­t ngá»¯ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ mÃ´ táº£ má»™t Ä‘iá»ƒm áº£nh trÃªn mÃ n hÃ¬nh Ä‘Æ°á»£c váº½ láº¡i bao nhiÃªu láº§n trong 1 khung hÃ¬nh duy nháº¥t. Giáº£ sá»­ báº¡n cÃ³ má»™t giao diá»‡n hiá»ƒn thá»‹ má»™t stack cÃ¡c tháº» nhÆ° bÃªn dÆ°á»›i. Chá»‰ cÃ³ tháº» trÃªn cÃ¹ng lÃ  hiá»ƒn thá»‹ toÃ n bá»™ cÃ²n cÃ¡c tháº» bÃªn dÆ°á»›i chá»‰ hiá»ƒn thá»‹ 1 pháº§n, náº¿u báº¡n váº½ táº¥t cáº£ cÃ¡c tháº» thÃ¬ sáº½ tháº­t lÃ£ng phÃ­ khi GPU pháº£i váº½ nhá»¯ng thá»© khÃ´ng hiá»ƒn thá»‹ vá»›i ngÆ°á»i dÃ¹ng. Äá»ƒ xÃ¡c Ä‘á»‹nh overdraw trÃªn cÃ¡c device Android : Setting -&gt; Developer Options -&gt; Show GPU Overdraw Android sá»­ dá»¥ng nhá»¯ng báº£n mÃ u khÃ¡c nhau Ä‘á»ƒ lÃ m ná»•i cÃ¡c má»©c overdraw trÃªn mÃ n hÃ¬nh. ÄÃºng mÃ u : khÃ´ng cÃ³ overdraw Xanh biá»ƒn : overdraw 1 láº§n Xanh lÃ¡ : overdraw 2 láº§n Há»“ng : overdraw 3 láº§n Äá» : overdraw tá»« 4 láº§n trá»Ÿ lÃªn TrÃªn thá»±c táº¿ thÃ¬ xanh biá»ƒn lÃ  cháº¥p nháº­n Ä‘Æ°á»£c. Overdraw cÃ ng nhiá»u, hiá»‡u nÄƒng cÃ ng giáº£m. Äá»ƒ trÃ¡nh Ä‘iá»u nÃ y, cÃ³ thá»ƒ dÃ¹ng nhá»¯ng giáº£i phÃ¡p sau: 3.1. Loáº¡i bá» background khÃ´ng cáº§n thiáº¿t ÄÆ¡n giáº£n nháº¥t, loáº¡i bá» nhá»¯ng background mÃ  ngÆ°á»i dÃ¹ng khÃ´ng bao giá» tháº¥y Ä‘Æ°á»£c. &lt;ImageView android:layout_width=â€match_parentâ€ android:layout_height=â€match_parentâ€ android:src=â€@drawable/beachâ€ android:background=â€@android:color/whiteâ€&gt; &lt;/ImageView&gt; &lt;ImageView android:layout_width=â€match_parentâ€ android:layout_height=â€match_parentâ€ android:src=â€@drawable/beachâ€ &gt; &lt;/ImageView&gt; 3.2. Háº¡n cháº¿ sá»­ dá»¥ng Transparency Viá»‡c render nhá»¯ng pixel trong suá»‘t trÃªn mÃ n hÃ¬nh Ä‘Æ°á»£c gá»i lÃ  Alpha rendering. QuÃ¡ trÃ¬nh nÃ y cÅ©ng gÃ¢y ra overdraw, bá»Ÿi há»‡ thá»‘ng sáº½ pháº£i hiá»ƒn thá»‹ cáº£ pixel trong suá»‘t vÃ  Ä‘iá»ƒm áº£nh bÃªn dÆ°á»›i pixel, sau Ä‘Ã³ káº¿t há»£p cáº£ 2 chÃºng láº¡i. CÃ¡c hiá»‡u á»©ng hÃ¬nh áº£nh nhÆ° trong suá»‘t, má» dáº§n, Ä‘á»• bÃ³ngâ€¦Ä‘á»u liÃªn quan Ä‘áº¿n transparency. Äá»ƒ cáº£i thiá»‡n overdraw, hÃ£y thá»­ giáº£m bá»›t sá»‘ lÆ°á»£ng transparent object báº¡n cáº§n. VÃ­ dá»¥ : xem xÃ©t Ä‘áº¿n viá»‡c táº¡o text vá»›i solid color vÃ  sá»­ dá»¥ng transitions mÃ  khÃ´ng cáº§n sá»­ dá»¥ng Ä‘áº¿n alpha cháº³ng háº¡n. Video bÃªn dÆ°á»›i sáº½ cho báº¡n tháº¥y chi phÃ­ cá»§a transparency {@youtube: https://www.youtube.com/watch?v=wIy8g8yNhNk} 3.3. Sá»­ dá»¥ng clipping khi xÃ¢y dá»±ng custom view Äá»‘i vá»›i custom view, khi báº¡n ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c onDraw(), há»‡ thá»‘ng cÆ¡ báº£n khÃ´ng cÃ³ thÃ´ng tin gÃ¬ vá» ná»™i dung mÃ  báº¡n Ä‘ang váº½, Ä‘iá»u nÃ y dá»… dáº«n tá»›i overdraw. VÃ­ dá»¥ nhÆ° áº£nh 1 stack cÃ¡c tháº» bÃªn trÃªn, báº¡n ráº¥t cÃ³ thá»ƒ sáº½ váº½ toÃ n bá»™ cÃ¡c tháº» ngay cáº£ khi nhá»¯ng tháº» bÃªn dÆ°á»›i chá»‰ hiá»‡n thá»‹ 1 pháº§n nhá» :D Khi Ä‘Ã³, clipping ( cáº¯t, xÃ©n bá»›t) lÃ  cÃ¡ch Ä‘á»ƒ loáº¡i trá»« cÃ¡c vÃ¹ng khÃ´ng cáº§n thiáº¿t khá»i viá»‡c bá»‹ váº½. Clipping chá»‰ váº½ cÃ¡c pháº§n cá»§a ngÆ°á»i dÃ¹ng nhÃ¬n tháº¥y, giáº£m bá»›t viá»‡c rendering cá»§a há»‡ thá»‘ng vÃ  tÄƒng hiá»‡u suáº¥t cá»§a á»©ng dá»¥ng. Má»™t vÃ i method báº¡n cÃ³ thá»ƒ tÃ¬m hiá»ƒu : Canvas.clipRect() Canvas.quickReject() 4. Má»Ÿ rá»™ng Android cung cáº¥p má»™t sá»‘ bá»™ cÃ´ng cá»¥ giÃºp phÃ¢n tÃ­ch layout. TÃ¹y vÃ o yÃªu cáº§u mÃ  báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng má»™t trong cÃ¡c tools dÆ°á»›i Ä‘Ã¢y : Profile GPU Rendering Show GPU view updates Layout Inspector Lint Systrace and dumpsys 5. Tham kháº£o https://developer.android.com/topic/performance/rendering/ https://medium.com/@elifbon/android-application-performance-step-1-rendering-ba820653ad3" }, { "title": "[Android] KhÃ¡m phÃ¡ notification channel trÃªn Android O", "url": "/posts/android-notification-channel/", "categories": "Android", "tags": "android, notification channel", "date": "2018-08-19 14:15:03 +0000", "content": "Trong bÃ i viáº¿t nÃ y chÃºng ta cÃ¹ng tÃ¬m hiá»ƒu vá» Notification Channels vÃ  cÃ¡ch Ä‘Æ°a chÃºng vÃ o á»©ng dá»¥ng nhÆ° tháº¿ nÃ o nhÃ© ! Notification Channels lÃ  gÃ¬ ? Notification Channels cung cáº¥p cho chÃºng ta kháº£ nÄƒng nhÃ³m cÃ¡c thÃ´ng bÃ¡o mÃ  á»©ng dá»¥ng cá»§a ta gá»­i vÃ o cÃ¡c nhÃ³m Ä‘á»ƒ quáº£n lÃ½. Má»™t khi nhá»¯ng notifications náº±m trong nhá»¯ng kÃªnh nÃ y, ngÆ°á»i dÃ¹ng pháº£i quáº£n lÃ½ chÃºng. HÃ£y nhÃ¬n vÃ o cÃ¡c tÃ¹y chá»n bÃªn dÆ°á»›i : Báº¯t Ä‘áº§u tá»« bÃªn trÃ¡i, báº¡n cÃ³ thá»ƒ tháº¥y trong mÃ n hÃ¬nh Ä‘áº§u tiÃªn cÃ i Ä‘áº·t thÃ´ng bÃ¡o cho á»©ng dá»¥ng. Vá»›i cÃ¡c tÃ¹y chá»n Ä‘Ã³ báº¡n cÃ³ thá»ƒ : Cháº·n táº¥t cáº£ cÃ¡c kÃªnh thÃ´ng bÃ¡o cho á»©ng dá»¥ng. CÃ³ nghÄ©a lÃ  táº¥t cáº£ thÃ´ng bÃ¡o tá»« á»©ng dá»¥ng cá»§a báº¡n sáº½ khÃ´ng bao giá» Ä‘Æ°á»£c hiá»ƒn thá»‹ trÃªn thiáº¿t bá»‹ cá»§a ngÆ°á»i dÃ¹ng. Náº¿u Ä‘Æ°á»£c há»— trá»£, ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ xÃ¡c Ä‘á»‹nh xem thÃ´ng bÃ¡o cá»§a á»©ng dá»¥ng cÃ³ thá»ƒ Ä‘Æ°á»£c hiá»ƒn thá»‹ dÆ°á»›i dáº¡ng huy hiá»‡u (badge) hay khÃ´ng. CÃ¡c danh má»¥c thÃ´ng bÃ¡o tá»“n táº¡i cho á»©ng dá»¥ng. NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ báº­t hoáº·c táº¯t cÃ¡c tÃ­nh nÄƒng nÃ y. Tiáº¿p Ä‘áº¿n lÃ  mÃ n hÃ¬nh thá»© hai, ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ truy cáº­p vÃ o nÃ³ khi chá»n má»™t danh má»¥c tá»« má»¥c Category á»Ÿ mÃ n hÃ¬nh Ä‘áº§u. á» Ä‘Ã¢y ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ : Cháº·n táº¥t cáº£ thÃ´ng bÃ¡o cá»§a á»©ng dá»¥ng Ä‘áº¿n tá»« kÃªnh nÃ y. Hiá»ƒn thá»‹ thÃ´ng bÃ¡o tá»« kÃªnh nÃ y táº¡i mÃ n Home náº¿u Ä‘Æ°á»£c há»— trá»£. Thiáº¿t Ä‘áº·t má»±c Ä‘á»™ quan trá»ng cá»§a thÃ´ng bÃ¡o. TÃ¹y chá»n nÃ y thá»ƒ hiá»‡n rÃµ khi nháº­n Ä‘Æ°á»£c má»™t thÃ´ng bÃ¡o. CÃ¡c má»©c Ä‘á»™ Ä‘Æ°á»£c Ä‘Æ°a ra cÃ³ thá»ƒ tháº¥y Ä‘Æ°á»£c táº¡i mÃ n hÃ¬nh cuá»‘i. Má»™t tÃ­nh nÄƒng khÃ¡ lÃ  hay ná»¯a Ä‘Ã³ lÃ  chÃºng ta cÃ³ thá»ƒ nhÃ³m cÃ¡c kÃªnh thá»‘ng bÃ¡o láº¡i thÃ nh cÃ¡c nhÃ³m riÃªng biá»‡t. Äiá»u nÃ y giÃºp ta cÃ³ thá»ƒ cÃ³ cÃ¹ng má»™t kÃªnh thÃ´ng bÃ¡o trÃªn nhiá»u cháº¿ Ä‘á»™ á»©ng dá»¥ng. Láº¥y má»™t vÃ­ dá»¥ nÃ o : á»¨ng dá»¥ng cá»§a mÃ¬nh cÃ³ thá»ƒ há»— trá»£ cháº¿ Ä‘á»™ nhÆ° Personal, Business, Child, Parent.. . Äiá»u nÃ y cho phÃ©p cung cáº¥p cÃ¡c tÃ¹y chá»n quáº£n lÃ½ cÃ i Ä‘áº·t thÃ´ng bÃ¡o trÃªn nhiá»u nhÃ³m. TrÃªn cÃ¡c phiÃªn báº£n Android cÅ© trÆ°á»›c Android O, cÃ¡c tÃ­nh nÄƒng má»›i nÃ y bá»‹ bá» qua hoÃ n toÃ n. Äáº¿n Ä‘Ã¢y thÃ¬ cháº¯c má»i ngÆ°á»i cÅ©ng biáº¿t thÃªm má»™t chÃºt vá» Notification Channels rá»“i, giá» thÃ¬ báº¯t tay vÃ o code thÃ´i :D Táº¡o 1 Notification Channel KhÃ¡ Ä‘Æ¡n giáº£n Ä‘á»ƒ táº¡o 1 kÃªnh thÃ´ng bÃ¡o trong á»©ng dá»¥ng cá»§a mÃ¬nh : NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE); String channelId = \"some_channel_id\"; CharSequence channelName = \"Some Channel\"; int importance = NotificationManager.IMPORTANCE_LOW; NotificationChannel notificationChannel = new NotificationChannel(channelId, channelName, importance); notificationChannel.enableLights(true); notificationChannel.setLightColor(Color.RED); notificationChannel.enableVibration(true); notificationChannel.setVibrationPattern(new long[]{100, 200, 300, 400, 500, 400, 300, 200, 400}); notificationManager.createNotificationChannel(notificationChannel); Khi thao tÃ¡c vá»›i Notification Channel, báº¡n sáº½ Ä‘Æ°á»£c cung cáº¥p má»™t sá»‘ phÆ°Æ¡ng thá»©c : getId() â€” Tráº£ vá» Id cá»§a channel. enableLights()â€Šâ€”â€ŠNáº¿u thiáº¿t bá»‹ há»— trá»£ Ä‘Ã¨n thÃ´ng bÃ¡o, nÃ³ cho phÃ©p kÃªnh thÃ´ng bÃ¡o nÃ y cÃ³ hiá»ƒn thá»‹ Ã¡nh sÃ¡ng hay khÃ´ng. setLightColor()â€Šâ€”â€ŠXÃ¡c Ä‘á»‹nh mÃ u Ä‘Æ°á»£c sá»­ dá»¥ng cho Ä‘Ã¨n thÃ´ng bÃ¡o. enableVibration()â€Šâ€” Rung khi thÃ´ng bÃ¡o Ä‘Æ°á»£c hiá»ƒn thá»‹ trÃªn thiáº¿t bá»‹. setVibrationPattern()â€Šâ€”â€ŠKiá»ƒu máº«u rung Ä‘Æ°á»£c sá»­ dá»¥ng, Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a báº±ng 1 máº£ng long[]. setImportance()â€Šâ€”â€ŠThiáº¿t Ä‘áº·t má»©c Ä‘á»™ giÃ¡n Ä‘oáº¡n cá»§a kÃªnh thÃ´ng bÃ¡o. setSound()â€Šâ€”â€ŠCung cáº¥p 1 Uri Ä‘á»ƒ phÃ¡t Ã¢m thanh khi thÃ´ng bÃ¡o Ä‘Æ°á»£c Ä‘Äƒng lÃªn kÃªnh nÃ y. setGroup()â€Šâ€” Thiáº¿t Ä‘áº·t group mÃ  thÃ´ng bÃ¡o Ä‘Æ°á»£c gÃ¡n vÃ o. setBypassDnd()â€Šâ€”â€ŠCÃ³ bá» qua cháº¿ Ä‘á»™ khÃ´ng lÃ m phiá»n khÃ´ng (Not Disturb mode). setLockScreenVisibility()â€Šâ€”â€ŠThÃ´ng bÃ¡o tá»« kÃªnh nÃ y Ä‘Æ°á»£c hiá»ƒn thá»‹ trÃªn mÃ n hÃ¬nh khÃ³a khÃ´ng. canShowBadge()â€Šâ€”â€ŠThÃ´ng bÃ¡o tá»« kÃªnh nÃ y cÃ³ thá»ƒ xuáº¥t hiá»‡n dÆ°á»›i dáº¡ng huy hiá»‡u (badge) trÃªn launcher á»©ng dá»¥ng khÃ´ng. Báº¡n cÃ³ thá»ƒ Ä‘á»c thÃªm vá» Notification Channels á»Ÿ Ä‘Ã¢y. OK, sau khi táº¡o xong channel ta cÃ³ thá»ƒ sá»­ dá»¥ng Id cá»§a channel vá»«a táº¡o Ä‘á»ƒ táº¡o má»™t Notification hiá»ƒn thá»‹ trÃªn thiáº¿t bá»‹ ngÆ°á»i dÃ¹ng. Táº¡o 1 Notification Channel Group NhÆ° Ä‘Ã£ Ä‘á» cáº­p bÃªn trÃªn, ta cÃ³ thá»ƒ nhÃ³m cÃ¡c kÃªnh thÃ´ng bÃ¡o láº¡i thÃ nh cÃ¡c nhÃ³m cÃ³ thá»ƒ quáº£n lÃ½ Ä‘Æ°á»£c. Äiá»u nÃ y cho phÃ©p ta cÃ³ cÃ¡c kÃªnh thÃ´ng bÃ¡o cÃ³ tÃªn giá»‘ng nhau Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh bá»Ÿi cÃ¡c pháº§n quáº£n lÃ½ khÃ¡c nhau. Äiá»u nÃ y ráº¥t há»¯u Ã­ch náº¿u á»©ng dá»¥ng há»— trá»£ nhiá»u tÃ i khoáº£n (multi accounts) hay cháº¿ Ä‘á»™ (mode). Äá»ƒ táº¡o má»™t nhÃ³m kÃªnh thÃ´ng bÃ¡o, ta gá»i phÆ°Æ¡ng thá»©c createNotificationChannelGroup() Ä‘Æ°á»£c cung cáº¥p bá»Ÿi Notification Manager. Khi Ä‘Ã³, ta pháº£i truyá»n vÃ o 1 instance cá»§a NotificationChannelGroup bao gá»“m 2 tham sá»‘ : Group Id : Id Ä‘á»‹nh danh cho group nÃ y. Group name : TÃªn cá»§a group Ä‘Æ°á»£c hiá»ƒn thá»‹ vá»›i ngÆ°á»i dÃ¹ng. String groupId = \"some_group_id\"; CharSequence groupName = \"Some Group\"; NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE); notificationManager.createNotificationChannelGroup(new NotificationChannelGroup(groupId, groupName)); OK, sau khi táº¡o xong má»™t channel group ta cÃ³ thá»ƒ gá»i phÆ°Æ¡ng thá»©c setGroup() khi táº¡o Ä‘Æ°á»£c má»™t instance cá»§a Notification Channel báº±ng cÃ¡ch truyá»n vÃ o Id cá»§a group mÃ  muá»‘n liÃªn káº¿t Ä‘áº¿n. Táº¡o 1 Notification Ká»ƒ tá»« Android O, khi báº¡n táº¡o 1 notification báº¯t buá»™c pháº£i khai bÃ¡o má»™t channel báº±ng phÆ°Æ¡ng thá»©c setChannel(). Äiá»u nÃ y nháº±m Ä‘áº£m báº£o ráº±ng thÃ´ng bÃ¡o thuá»™c vá» má»™t kÃªnh cÃ³ thá»ƒ Ä‘Æ°á»£c ngÆ°á»i dÃ¹ng quáº£n lÃ½ tá»« cÃ i Ä‘áº·t thiáº¿t bá»‹ cá»§a há». NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE); int notifyId = 1; String channelId = \"some_channel_id\"; Notification notification = new Notification.Builder(MainActivity.this) .setContentTitle(\"Some Message\") .setContentText(\"You've received new messages!\") .setSmallIcon(R.drawable.ic_notification) .setChannel(channelId) .build(); notificationManager.notify(id, notification); Äá»c thiáº¿t láº­p kÃªnh thÃ´ng bÃ¡o Äá»ƒ xem cÃ¡c thiáº¿t Ä‘áº·t mÃ  ngÆ°á»i dÃ¹ng Ä‘Ã£ Ã¡p dá»¥ng cho 1 kÃªnh thÃ´ng bÃ¡o xÃ¡c Ä‘á»‹nh : NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE); NotificationChannel notificationChannel = notificationManager.getNotificationChannel(\"some_id\"); Báº¡n cÅ©ng cÃ³ thá»ƒ truy xuáº¥t táº¥t cáº£ cÃ¡c kÃªnh thÃ´ng bÃ¡o : NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE); List&lt;NotificationChannel&gt; notificationChannels = notificationManager.getNotificationChannels(); Cáº­p nháº­t thiáº¿t láº­p kÃªnh thÃ´ng bÃ¡o Sau khi kÃªnh thÃ´ng bÃ¡o Ä‘Æ°á»£c táº¡o, ngÆ°á»i dÃ¹ng chá»‹u trÃ¡ch nhiá»‡m sá»­a Ä‘á»•i báº¥t kÃ¬ cÃ i Ä‘áº·t nÃ o cá»§a kÃªnh Ä‘Ã³. Máº·c dÃ¹ khÃ´ng thá»ƒ cung cáº¥p kháº£ nÄƒng sá»­a Ä‘á»•i tá»« bÃªn trong á»©ng dá»¥ng nhÆ°ng ta cÃ³ thá»ƒ hÆ°á»›ng ngÆ°á»i dÃ¹ng Ä‘áº¿n trang cÃ i Ä‘áº·t thÃ´ng bÃ¡o thÃ´ng qua Intent : Intent intent = new Intent(Settings.ACTION_CHANNEL_NOTIFICATION_SETTINGS); intent.putExtra(Settings.EXTRA_CHANNEL_ID, notificationChannel.getId()); intent.putExtra(Settings.EXTRA_APP_PACKAGE, getPackageName()); startActivity(intent); XÃ³a Notification Channel Náº¿u khÃ´ng cáº§n sá»­ dá»¥ng kÃªnh thÃ´ng bÃ¡o ná»¯a, ta cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c deleteNotificationChannel() vÃ  truyá»n vÃ o Id cá»§a channel muá»‘n xÃ³a. NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE); String channelId = \"some_channel_id\"; NotificationChannel notificationChannel = notificationManager.getNotificationChannel(channelId); notificationManager.deleteNotificationChannel(notificationChannel); Káº¿t luáº­n TrÃªn Ä‘Ã¢y lÃ  nhá»¯ng giá»›i thiá»‡u cÆ¡ báº£n vá» Notification Channel. Hi vá»ng qua bÃ i viáº¿t nÃ y báº¡n cÃ³ thá»ƒ hiá»ƒu Ä‘Æ°á»£c tá»•ng quan vá» Notification Channel cÅ©ng nhÆ° cÃ¡ch táº¡o channel, channel group hay cÃ¡ch quáº£n lÃ½ chÃºng. Tham kháº£o Nguá»“n tham kháº£o : https://developer.android.com/guide/topics/ui/notifiers/notifications#ManageChannels https://medium.com/exploring-android/exploring-android-o-notification-channels-94cd274f604c" }, { "title": "[Android] Má»™t sá»‘ lÆ°u Ã½ khi sá»­ dá»¥ng strings.xml", "url": "/posts/luu-y-khi-su-dung-string-xml/", "categories": "Android", "tags": "android", "date": "2018-08-08 14:15:03 +0000", "content": "Hi má»i ngÆ°á»i! Trong bÃ i viáº¿t nÃ y mÃ¬nh sáº½ chia sáº» má»™t sá»‘ lÆ°u Ã½ khi lÃ m viá»‡c vá»›i strings.xml. Äá»«ng dÃ¹ng láº¡i Äá»«ng sá»­ dá»¥ng láº¡i strings cho nhiá»u mÃ n hÃ¬nh khÃ¡c nhau. 1.\tTÆ°á»Ÿng tÆ°á»£ng ráº±ng báº¡n cÃ³ má»™t há»™p thoáº¡i loading trÃªn 2 mÃ n hÃ¬nh Sign in vÃ  Sign up.VÃ¬ cáº£ 2 Ä‘á»u cÃ³ chung má»™t há»™p thoáº¡i nÃªn báº¡n quyáº¿t Ä‘á»‹nh sá»­ dá»¥ng chung string lÃ  R.string.loading &lt;string name=\"loading\"&gt;Loading please wait...&lt;/string&gt; 2.\t Sau Ä‘Ã³ náº¿u báº¡n quyáº¿t Ä‘á»‹nh sá»­ dá»¥ng má»™t cÃ¡i khÃ¡c, báº¡n sáº½ pháº£i táº¡o ra hai string má»›i vÃ  cáº§n update láº¡i file. Náº¿u tá»« Ä‘áº§u báº¡n sá»­ dá»¥ng 2 string, báº¡n sáº½ sá»­a duy nháº¥t file strings.xml. &lt;string name=\"sign_in_loading\"&gt;Signing in...&lt;/string&gt; &lt;string name=\"sign_up_loading\"&gt;Signing up...&lt;/string&gt; 3.\tBáº¡n khÃ´ng bao giá» biáº¿t á»©ng dá»¥ng cá»§a báº¡n há»— trá»£ ngÃ´n ngá»¯ nÃ o. Trong má»™t ngÃ´n ngá»¯ - báº¡n sáº½ cÃ³ thá»ƒ sá»­ dá»¥ng má»™t tá»« cho nhiá»u ná»™i dung khÃ¡c nhau, nhÆ°ng á»Ÿ má»™t ngÃ´n ngá»¯ khÃ¡c - báº¡n sáº½ pháº£i sá»­ dá»¥ng cÃ¡c tá»« khÃ¡c nhau cho ná»™i dung khÃ¡c nhau. res/values/strings.xml &lt;string name=\"download_file_yes\"&gt;Yes&lt;/string&gt; &lt;string name=\"terms_of_use_yes\"&gt;Yes&lt;/string&gt; res/values-UA/strings.xml &lt;string name=\"download_file_yes\"&gt;Ğ“Ğ°Ñ€Ğ°Ğ·Ğ´&lt;/string&gt; &lt;string name=\"terms_of_use_yes\"&gt;Ğ¢Ğ°Ğº&lt;/string&gt; =&gt; PhiÃªn báº£n tiáº¿ng Anh cá»§a strings.xml sá»­ dá»¥ng cÃ¹ng má»™t tá»« yes cho cáº£ hai string. NhÆ°ng phiÃªn báº£n tiáº¿ng Ukraina cá»§a strings.xml sá»­ dá»¥ng hai tá»« khÃ¡c nhau: â€œĞ“Ğ°Ñ€Ğ°Ğ·Ğ´â€ cho R.string.download_file_yes vÃ  â€œĞ¢Ğ°Ğºâ€ cho R.string.terms_of_use_yes. RiÃªng biá»‡t CÃ¡c strings riÃªng biá»‡t thuá»™c chung má»™t mÃ n hÃ¬nh nÃªn Ä‘Æ°á»£c phÃ¢n biá»‡t bá»Ÿi tiá»n tá»‘ vÃ  comment &lt;!-- settings screen start --&gt; &lt;string name=\"settings_log_out\"&gt;Log out&lt;/string&gt; &lt;string name=\"settings_notification_policy\"&gt;Notification Policy&lt;/string&gt; &lt;string name=\"settings_contact_us\"&gt;Contact Us&lt;/string&gt; &lt;!-- settings screen end --&gt; &lt;!-- profile screen start --&gt; &lt;string name=\"profile_name\"&gt;Name&lt;/string&gt; &lt;string name=\"profile_email\"&gt;Email&lt;/string&gt; &lt;string name=\"profile_work\"&gt;Work&lt;/string&gt; &lt;string name=\"profile_birthday\"&gt;Birthday&lt;/string&gt; &lt;!-- profile screen end --&gt; ThÃªm tÃªn mÃ n hÃ¬nh nhÆ° lÃ  tiá»n tá»‘ vÃ o má»—i string giÃºp ta ngay láº­p tá»©c nháº­n ra mÃ n hÃ¬nh mÃ  string hiá»‡n táº¡i thuá»™c vá». Tá»‡p strings.xml rÃµ rÃ ng giÃºp dá»… dÃ ng duy trÃ¬ vÃ  chuyá»ƒn Ä‘á»•i nhiá»u strings sang cÃ¡c ngÃ´n ngá»¯ khÃ¡c nhau. Äá»‹nh dáº¡ng Sá»­ dá»¥ng Resource#getString(int id, Object... formatArgs) Ä‘á»ƒ Ä‘á»‹nh dáº¡ng strings. KhÃ´ng bao giá» ná»‘i chuá»—i báº±ng toÃ¡n tá»­ + bá»Ÿi vÃ¬ trong cÃ¡c ngÃ´n ngá»¯ khÃ¡c thá»© tá»± tá»« cÃ³ thá»ƒ thay Ä‘á»•i. &lt;string name=\"login_welcome_back\"&gt; - welcome back&lt;/string&gt; res/values/strings.xml String username = \"John Doe\"; String result = username + \" \" + getString(R.string.login_welcome_back); // EN result \"John Doe - welcome back\" CÃ¡ch Ä‘Ãºng nÃªn sá»­ dá»¥ng Resources#getString(int id, Objectâ€¦ formatArgs). &lt;string name=\"login_welcome_back\"&gt; %s - welcome back&lt;/string&gt; res/values/strings.xml &lt;string name=\"login_welcome_back\"&gt; Ğ· Ğ¿Ğ¾Ğ²ĞµÑ€Ğ½ĞµĞ½Ğ½ÑĞ¼ %s&lt;/string&gt; res/values-UA/strings.xml Khi Ä‘Ã³ : String username = \"John Doe\"; String result = getString(R.string.login_welcome_back,username); // EN result \"John Doe - welcome back\" // UA result \"Ğ· Ğ¿Ğ¾Ğ²ĞµÑ€Ğ½ĞµĞ½Ğ½ÑĞ¼ John Doe\" Sá»‘ nhiá»u Sá»­ dá»¥ng Resources#getQuantityString (int id, int quantity) cho strings sá»‘ lÆ°á»£ng. KhÃ´ng bao giá» giáº£i quyáº¿t sá»‘ nhiá»u trong code java , bá»Ÿi vÃ¬ cÃ¡c ngÃ´n ngá»¯ khÃ¡c nhau cÃ³ quy táº¯c khÃ¡c nhau cho qui Ä‘á»‹nh vá» ngá»¯ phÃ¡p vá»›i sá»‘ lÆ°á»£ng. &lt;plurals name=\"minutes\"&gt; \t\t&lt;item quantity=\"one\"&gt;minute&lt;/item&gt; \t\t&lt;item quantity=\"other\"&gt;minutes&lt;/item&gt; &lt;/plurals&gt; res/values/strings.xml int minute = Calendar.getInstance().get(Calendar.MINUTE); String text = getResource().getQuantityString(R.plurals.minutes,minutes); LÃ m ná»•i báº­t má»™t sá»‘ tá»« Sá»­ dá»¥ng vÄƒn báº£n html Ä‘á»ƒ lÃ m ná»•i báº­t nhá»¯ng chá»¯ cá»‘ Ä‘á»‹nh. Náº¿u báº¡n muá»‘n thay Ä‘á»•i mÃ u sáº¯c cá»§a má»™t sá»‘ tá»« trong TextView - ForegroundColorSpan khÃ´ng pháº£i lÃºc nÃ o cÅ©ng lÃ  sá»± lá»±a chá»n tá»‘t, bá»Ÿi vÃ¬ náº¿u ná»‘i báº­t thÃ´ng qua cÃ¡c indexes, nÃ³ khÃ´ng an toÃ n trong cÃ¡c á»©ng dá»¥ng Ä‘a ngÃ´n ngá»¯. Tá»‘t hÆ¡n nÃªn sá»­ dá»¥ng Html font color tags bÃªn trong file strings.xml. Báº¡n cÃ³ vÄƒn báº£n â€œDiscover and play games.â€ Báº¡n muá»‘n lÃ m ná»•i báº­t tá»« â€œDiscoverâ€ vÃ  â€œplayâ€ vá»›i mÃ u xanh lam. &lt;string name=\"html_text\" formatted=\"false\"&gt; \t&lt;![CDATA[ &lt;font color=\\'#28b5f5\\'&gt;Discover&lt;/font&gt; and &lt;font color=\\'#28b5f5\\'&gt;play&lt;/font&gt; game.]]&gt; &lt;/string&gt; res/values/strings.xml TextView textView = (TextView) findViewById(R.id.tv); textView.setText(Html.fromHtml(getString(R.string.html_text))); Káº¿t bÃ i ChÃºc cÃ¡c báº¡n coding vui váº» :D" }, { "title": "[Android] RecyclerView", "url": "/posts/android-recycler-view/", "categories": "Android", "tags": "android, recyclerview", "date": "2018-07-12 14:15:03 +0000", "content": "Giá»›i thiá»‡u RecycleView lÃ  má»™t viewGroup má»›i Ä‘Æ°á»£c giá»›i thiá»‡u trong Android L (API 21). LÃ  má»™t viewGroup cÃ³ chá»©c nÄƒng tÆ°Æ¡ng tá»± nhÆ° ListView nhÆ°ng linh hoáº¡t hÆ¡n ráº¥t nhiá»u. ListView chá»‰ há»— trá»£ báº¡n scroll cÃ¡c item trong listView theo chiá»u dá»c mÃ  khÃ´ng há»— trá»£ scroll theo chiá»u ngang. RecyclerView support Ä‘Æ°á»£c táº¥t cáº£ nhá»¯ng thá»© Ä‘Ã³ vÃ  hÆ¡n tháº¿ ná»¯a. Trong bÃ i viáº¿t nÃ y tÃ´i sáº½ giá»›i thiá»‡u cho cÃ¡c báº¡n vá» má»™t ViewGroup nÃ y. So sÃ¡nh vá»›i ListView So vá»›i ListView thÃ¬ RecyclerView cÃ³ nhá»¯ng Ä‘iá»ƒm máº¡nh máº½ vÆ°á»£t trá»™i hÆ¡n nhÆ° sau : YÃªu cáº§u sá»­ dá»¥ng ViewHolder Pattern trong Adapter : Khi táº¡o ra má»™t adapter sá»­ dá»¥ng vá»›i RecyclerView báº¯t buá»™c pháº£i sá»­ dá»¥ng ViewHolder Ä‘á»ƒ cáº£i thiá»‡n performance. Má»¥c Ä‘Ã­ch sá»­ dá»¥ng ViewHolder Ä‘á»ƒ tÃ¡i sá»­ dá»¥ng view nháº±m trÃ¡nh viá»‡c táº¡o view má»›i vÃ  findViewById quÃ¡ nhiá»u ListView chá»‰ support cho chÃºng ta danh sÃ¡ch dáº¡ng scroll dá»c. NhÆ°ng vá»›i recyclerView cung cáº¥p cho chÃºng ta RecyclerView.LayoutManager cho phÃ©p layout cÃ¡c item trong listview theo cÃ¡c kiá»ƒu khÃ¡c nhau ( ngang, dá»c, grid, staggered grid). Vá»›i listView viá»‡c xá»­ lÃ½ animation cho cÃ¡c item khÃ´ng há» dá»… dÃ ng. NhÆ°ng Ä‘á»‘i vá»›i RecyclerView há»— trá»£ ItemAnimator giÃºp chÃºng ta cÃ³ thá»ƒ xá»­ lÃ½ animation khi add hay remove 1 item ra khá»i list má»™t cÃ¡ch dá»… dÃ ng. Máº·c Ä‘á»‹nh RecyclerView sá»­ dá»¥ng DefaultItemAnimator. Vá»›i listView viá»‡c sá»­ sá»­ dá»¥ng divider khÃ´ng Ä‘Æ°á»£c linh hoáº¡t nhÆ°ng vá»›i recyclerView cÃ³ há»— trá»£ ItemDecoration cho phÃ©p chÃºng ta draw divider 1 cÃ¡ch tÃ¹y Ã½. ListView cÃ³ support cÃ¡c phÆ°Æ¡ng thá»©c setOnItemClickListener vÃ  setOnLongItemClickListener nhÆ°ng RecyclerView chá»‰ support 1 phÆ°Æ¡ng thá»©c Ä‘Ã³ lÃ  onItemTouchListener. CÃ¡c thÃ nh pháº§n khi sá»­ dá»¥ng RecyclerView Khi lÃ m viá»‡c vá»›i RecyclerView ta pháº£i lÃ m viá»‡c vá»›i nhá»¯ng thÃ nh pháº§n sau : RecyclerView.Adapter CÅ©ng giá»‘ng ListView Ä‘Ã¢y lÃ  thÃ nh pháº§n xá»­ lÃ½ data collection (dá»¯ liá»‡u kiá»ƒu danh sÃ¡ch) vÃ  bind (gáº¯n) nhá»¯ng dá»¯ liá»‡u nÃ y lÃªn cÃ¡c Item cá»§a RecyclerView. Khi táº¡o custom Adapter chÃºng ta pháº£i override láº¡i 2 phÆ°Æ¡ng thá»©c chÃ­nh Ä‘Ã³ lÃ  : onCreateViewHolder : phÆ°Æ¡ng thá»©c nÃ y dÃ¹ng Ä‘á»ƒ táº¡o view má»›i cho RecyclerView. Náº¿u RecyclerView Ä‘Ã£ cached láº¡i View thÃ¬ phÆ°Æ¡ng thá»©c nÃ y sáº½ khÃ´ng gá»i. onBindViewHolder : phÆ°Æ¡ng thá»©c nÃ y dÃ¹ng Ä‘á»ƒ gáº¯n data vÃ  view. LayoutManager LÃ  thÃ nh pháº§n cÃ³ chá»©c nÄƒng sáº¯p xáº¿p cÃ¡c item trong RecyclerView. CÃ¡c item scroll dá»c hay ngang phá»¥ thuá»™c chÃºng ta setLayoutManager cho RecyclerView. CÃ¡c classs con cá»§a layoutManager. LinearLayoutManager: Há»— trá»£ scroll cÃ¡c item theo chiá»u ngang hay chiá»u dá»c. GridLayoutManager: Layout cÃ¡c item trong RecyclerView dÆ°á»›i dáº¡ng Grid giá»‘ng nhÆ° khi chÃºng ta sá»­ dá»¥ng GridView. StaggerdGridLayoutManager : Layout cÃ¡ item trong ListView dÆ°á»›i dáº¡ng Grid so le. ItemAnimator : LÃ  thÃ nh pháº§n há»— trá»£ animation khi chÃºng ta add hay remove má»™t item ra khá»i RecyclerView. TÃ´i sáº½ hÆ°á»›ng dáº«n chi tiáº¿t vá» ItemAnimator trong bÃ i viáº¿t sau. Sá»­ dá»¥ng RecyclerView trong Android 1. Äáº§u tiÃªn báº¡n cáº§n import thÆ° viá»‡n bÃªn dÆ°á»›i : compile 'com.android.support:recyclerview-v7:23.0.+' 2. Táº¡o model Ä‘á»ƒ chá»©a data Movie.java package com.example.hades.testrecyclerview; /** * Created by Hades on 12/8/2016. */ public class Movie { \tprivate String title, genre, year; \tpublic Movie() { \t} \tpublic Movie(String title, String genre, String year) { \t\tthis.title = title; \t\tthis.genre = genre; \t\tthis.year = year; \t} \tpublic String getTitle() { \t\treturn title; \t} \tpublic void setTitle(String name) { \t\tthis.title = name; \t} \tpublic String getYear() { \t\treturn year; \t} \tpublic void setYear(String year) { \t\tthis.year = year; \t} \tpublic String getGenre() { \t\treturn genre; \t} \tpublic void setGenre(String genre) { \t\tthis.genre = genre; \t} } 3. ThÃªm recyclerView vÃ o main_activity.xml activity_main.xml &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt; &lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:tools=\"http://schemas.android.com/tools\" android:id=\"@+id/activity_main\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\"com.example.hades.testrecyclerview.MainActivity\"&gt; &lt;android.support.v7.widget.RecyclerView android:id=\"@+id/recycler_view\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" android:scrollbars=\"vertical\"/&gt; &lt;/RelativeLayout&gt; 4. Táº¡o giao diá»‡n cho 1 row movie_list_row.xml &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt; &lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" android:layout_width=\"match_parent\" android:layout_height=\"wrap_content\" android:focusable=\"true\" android:paddingLeft=\"16dp\" android:paddingRight=\"16dp\" android:paddingTop=\"10dp\" android:paddingBottom=\"10dp\" android:clickable=\"true\" android:background=\"?android:attr/selectableItemBackground\"&gt; &lt;TextView android:id=\"@+id/m_title\" android:textColor=\"#222222\" android:textSize=\"16dp\" android:textStyle=\"bold\" android:layout_alignParentTop=\"true\" android:layout_width=\"match_parent\" android:layout_height=\"wrap_content\" /&gt; &lt;TextView android:id=\"@+id/m_genre\" android:layout_below=\"@+id/m_title\" android:layout_width=\"match_parent\" android:layout_height=\"wrap_content\" /&gt; &lt;TextView android:id=\"@+id/m_year\" android:textColor=\"#999999\" android:layout_width=\"wrap_content\" android:layout_alignParentRight=\"true\" android:layout_height=\"wrap_content\" /&gt; &lt;/RelativeLayout&gt; 5. Táº¡o Custom Adapter vÃ  bind dá»¯ liá»‡u cho tá»«ng row trong Adapter MoviesAdapter.java package com.example.hades.testrecyclerview; import android.content.Context; import android.support.v7.widget.RecyclerView; import android.view.LayoutInflater; import android.view.View; import android.view.ViewGroup; import android.widget.TextView; import android.widget.Toast; import java.util.List; /** * Created by Hades on 12/8/2016. */ public class MoviesAdapter extends RecyclerView.Adapter&lt;MoviesAdapter.MyViewHolder&gt; { \tprivate List&lt;Movie&gt; movieList; \tprivate LayoutInflater mLayoutInflater; \tprivate Context mContext; \tpublic MoviesAdapter(Context context,List&lt;Movie&gt; movieList) { \t\tthis.movieList = movieList; \t\tthis.mContext = context; \t\tmLayoutInflater = LayoutInflater.from(context); \t} \tpublic class MyViewHolder extends RecyclerView.ViewHolder { \t\tpublic TextView title, year, genre; \t\tpublic MyViewHolder(View itemView) { \t\t\tsuper(itemView); \t\t\ttitle = (TextView) itemView.findViewById(R.id.m_title); \t\t\tgenre = (TextView) itemView.findViewById(R.id.m_genre); \t\t\tyear = (TextView) itemView.findViewById(R.id.m_year); \t\t\titemView.setOnClickListener(new View.OnClickListener() { \t\t\t\t@Override \t\t\t\tpublic void onClick(View v) { \t\t\t\t\tToast.makeText(mContext,title.getText(),Toast.LENGTH_SHORT).show(); \t\t\t\t} \t\t\t}); itemView.setOnLongClickListener(new View.OnLongClickListener() { \t\t\t\t@Override \t\t\t\tpublic boolean onLongClick(View v) { \t\t\t\t\tToast.makeText(mContext,\"Long item clicked \" + title.getText() + ,Toast.LENGTH_SHORT).show(); \t\t\t\t\treturn true; \t\t\t\t} \t\t\t}); \t\t} \t} \t@Override \tpublic MyViewHolder onCreateViewHolder(ViewGroup parent, int viewType) { \t\tView item = mLayoutInflater.inflate(R.layout.movie_list_row,parent,false); \t\treturn new MyViewHolder(item); \t} \t@Override \tpublic void onBindViewHolder(MoviesAdapter.MyViewHolder holder, int position) { \t\tMovie movie = movieList.get(position); \t\tholder.title.setText(movie.getTitle()); \t\tholder.genre.setText(movie.getGenre()); \t\tholder.year.setText(movie.getYear()); \t} \t@Override \tpublic int getItemCount() { \t\treturn movieList.size(); \t} } ChÃºng ta cÃ³ thá»ƒ select item trong RecyclerView báº±ng cÃ¡ch setOnClickListenner cho itemView trong constructor cá»§a ViewHolder. 6. Setup RecyclerView trong MainActivity.java KhÃ´ng giá»‘ng nhÆ° ListView chÃºng ta chá»‰ cáº§n setAdapter cho ListView lÃ  Ä‘á»§ nhÆ°ng Ä‘á»‘i vá»›i RecyclerView chÃºng ta pháº£i set 2 thÃ nh pháº§n báº¯t buá»™c dÆ°á»›i Ä‘áº¥y : setAdapter cho RecyclerView. setLayoutManager chá»‰ ra cÃ¡c item Ä‘Æ°á»£c hiá»ƒn thá»‹ nhÆ° theo cÃ¡ch nÃ o. MainActivity.java package com.example.hades.testrecyclerview; import android.support.v7.app.AppCompatActivity; import android.os.Bundle; import android.support.v7.widget.DefaultItemAnimator; import android.support.v7.widget.LinearLayoutManager; import android.support.v7.widget.RecyclerView; import java.util.ArrayList; import java.util.List; public class MainActivity extends AppCompatActivity { \tprivate List&lt;Movie&gt; mListMovie = new ArrayList&lt;&gt;(); \tprivate RecyclerView recyclerView; \tprivate MoviesAdapter mAdapter; \t@Override \tprotected void onCreate(Bundle savedInstanceState) { \t\tsuper.onCreate(savedInstanceState); \t\tsetContentView(R.layout.activity_main); \t\tprepareMovieData(); \t\trecyclerView = (RecyclerView) findViewById(R.id.recycler_view); \t\tmAdapter = new MoviesAdapter(this,mListMovie); \t\tRecyclerView.LayoutManager mLayoutManager = new LinearLayoutManager(getApplicationContext()); \t\trecyclerView.setLayoutManager(mLayoutManager); \t\trecyclerView.setItemAnimator(new DefaultItemAnimator()); \t\trecyclerView.setAdapter(mAdapter); \t} \tprivate void prepareMovieData() { \t\tMovie movie = new Movie(\"Mad Max: Fury Road\", \"Action &amp; Adventure\", \"2015\"); \t\tmListMovie.add(movie); \t\tmovie = new Movie(\"Inside Out\", \"Animation, Kids &amp; Family\", \"2015\"); \t\tmListMovie.add(movie); \t\tmovie = new Movie(\"Star Wars: Episode VII - The Force Awakens\", \"Action\", \"2015\"); \t\tmListMovie.add(movie); \t\tmovie = new Movie(\"Shaun the Sheep\", \"Animation\", \"2015\"); \t\tmListMovie.add(movie); \t\tmovie = new Movie(\"The Martian\", \"Science Fiction &amp; Fantasy\", \"2015\"); \t\tmListMovie.add(movie); \t\tmovie = new Movie(\"Mission: Impossible Rogue Nation\", \"Action\", \"2015\"); \t\tmListMovie.add(movie); \t\tmovie = new Movie(\"Up\", \"Animation\", \"2009\"); \t\tmListMovie.add(movie); \t\tmovie = new Movie(\"Star Trek\", \"Science Fiction\", \"2009\"); \t\tmListMovie.add(movie); \t\tmovie = new Movie(\"The LEGO Movie\", \"Animation\", \"2014\"); \t\tmListMovie.add(movie); \t\tmovie = new Movie(\"Iron Man\", \"Action &amp; Adventure\", \"2008\"); \t\tmListMovie.add(movie); \t\tmovie = new Movie(\"Aliens\", \"Science Fiction\", \"1986\"); \t\tmListMovie.add(movie); \t} } DÆ°á»›i Ä‘Ã¢y lÃ  video demo : https://www.youtube.com/watch?v=XrFG4BMIFpo" }, { "title": "[Java] File Properties", "url": "/posts/file-properties/", "categories": "Java", "tags": "java, file properties", "date": "2017-07-01 14:15:03 +0000", "content": "Hi má»i ngÆ°á»i! Cháº¯c háº³n má»i ngÆ°á»i Ä‘Ã£ tá»«ng lÃ m viá»‡c vá»›i CSDL hay networks. CÃ³ nhá»¯ng thÃ´ng sá»‘ thÆ°á»ng xuyÃªn thay Ä‘á»•i nhÆ° tÃªn CSDL, cá»•ng, tÃ i khoáº£n, ngÆ°á»i dÃ¹ng, máº­t kháº©uâ€¦ Náº¿u nhá»¯ng thÃ´ng tin nÃ y báº¡n fix cá»©ng trong code thÃ¬ cÃ³ váº¥n Ä‘á» Ä‘áº·t ra lÃ  náº¿u muá»‘n thay Ä‘á»•i báº¡n pháº£i má»Ÿ file code lÃªn vÃ  tÃ¬m Ä‘áº¿n file chÃºng ta Ä‘Ã£ cáº¥u hÃ¬nh Ä‘á»ƒ thay Ä‘á»•i ? LÃ m nhÆ° váº­y phá»©c táº¡p vÃ  khÃ¡ láº±ng nháº±ng. File Properties Thay vÃ¬ hardcode thÃ¬ ta sáº½ lÆ°u thÃ´ng tin cáº¥u hÃ¬nh vÃ o 1 file Ä‘á»ƒ cÃ³ thá»ƒ dá»… dÃ ng cho viá»‡c thay Ä‘á»•i cÃ¡c thÃ´ng tin cáº¥u hÃ¬nh. Trong java cung cáº¥p lá»›p java.util.Properties cung cáº¥p má»™t sá»‘ phÆ°Æ¡ng thá»©c : Náº¡p 1 cáº·p key/value vÃ o Ä‘á»‘i tÆ°á»£ng Properties tá»« luá»“ng Láº¥y value tá»« key cá»§a nÃ³ Láº¥y ra danh sÃ¡ch key vÃ  value LÆ°u properties vÃ o luá»“ng Cáº¥u trÃºc file properties File properties lÃ  1 dáº¡ng file text theo cáº¥u trÃºc key=value, cÃ¡ch sá»­ dá»¥ng ráº¥t Ä‘Æ¡n giáº£n. VÃ­ dá»¥: # Config dang nhap he thong username=test123 code=16996 ChÃº Ã½ : key vÃ  value viáº¿t sÃ¡t nhau bá»Ÿi dáº¥u = Key khÃ´ng Ä‘Æ°á»£c chá»©a khoáº£ng tráº¯ng Value cÃ³ thá»ƒ chá»©a khoáº£ng tráº¯ng Demo package FileProperties; import java.io.FileInputStream; import java.io.FileOutputStream; import java.io.IOException; import java.io.InputStream; import java.io.OutputStream; import java.util.Enumeration; import java.util.Properties; /** * * @author Hades */ public class PropertiesFile { public static void main(String[] args) { Properties props = new Properties(); OutputStream outStream = null; InputStream inStream = null; writeToPropsFile(props,outStream); loadPropsFile(props,inStream); printEveryThing(props,inStream); } private static void writeToPropsFile(Properties props, OutputStream outStream) { try { outStream = new FileOutputStream(\"config.properties\"); // Note :Náº¿u Ä‘Æ°á»ng dáº«n file khÃ´ng Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh, táº­p tin sáº½ Ä‘Æ°á»£c lÆ°u trong thÆ° má»¥c gá»‘c cá»§a project props.setProperty(\"port\",\"8983\"); props.setProperty(\"user\",\"admin\"); props.setProperty(\"pass\",\"admin\"); props.store(outStream,null); } catch (Exception e) { System.out.println(e.getCause()); } finally { if(outStream != null) { try { outStream.close(); } catch (Exception e) { System.out.println(e.getCause()); } } } } private static void loadPropsFile(Properties props, InputStream inStream) { try { inStream = new FileInputStream(\"config.properties\"); props.load(inStream); System.out.println(props.get(\"port\")); System.out.println(props.get(\"user\")); System.out.println(props.get(\"pass\")); } catch (Exception e) { System.out.println(e.getCause()); } finally { if(inStream != null) { try { inStream.close(); } catch (IOException ex) { System.out.println(ex.getCause()); } } } } private static void printEveryThing(Properties props, InputStream inStream) { try { inStream = new FileInputStream(\"config.properties\"); props.load(inStream); Enumeration&lt;?&gt; e = props.propertyNames(); while(e.hasMoreElements()) { String key = (String) e.nextElement(); String value = props.getProperty(key); System.out.println(\"KEY: \" + key + \" - \" + \"VALUE: \"+value); } } catch (IOException ex) { System.out.println(ex.getCause()); } } } Run láº§n lÆ°á»£t tá»«ng method káº¿t quáº£ tráº£ vá» : config.properties # Sat Jan 07 23:22:03 ICT 2017 user=admin port=8983 pass=admin output 8983 admin admin output KEY: user - VALUE: admin KEY: port - VALUE: 8983 KEY: pass - VALUE: admin Conclusion ChÃºc cÃ¡c báº¡n coding vui váº» :D" }, { "title": "[Android] CÃ¡ch tá»• chá»©c thÆ° má»¥c cho 1 project Android", "url": "/posts/android-structure/", "categories": "Android", "tags": "android, structure", "date": "2016-08-12 14:15:03 +0000", "content": "Hi má»i ngÆ°á»i! Dáº¡o gáº§n Ä‘Ã¢y mÃ¬nh cÃ³ xÃ¢y dá»±ng 1 dá»± Ã¡n android nhá». DÆ°á»›i Ä‘Ã¢y lÃ  má»™t cÃ¡ch tá»• chá»©c thÆ° má»¥c mÃ  mÃ¬nh cho lÃ  khÃ¡ há»£p lÃ½. Hi vá»ng má»i ngÆ°á»i cÃ³ thá»ƒ tham kháº£o vÃ  gÃ³p Ã½. â”œâ”€ com.abc â”‚ â”œâ”€ activities â”‚ â”œâ”€ adapters â”‚ â”œâ”€ fragments â”‚ â”œâ”€ example â”‚ â”œâ”€ interfaces â”‚ â”œâ”€ models â”‚ â”œâ”€ navigates â”‚ â”œâ”€ networks â”‚ â”œâ”€ notifications â”‚ â”œâ”€ utils â”‚ â””â”€ views Trong Ä‘Ã³ má»—i thÃ nh pháº§n sáº½ cÃ³ 1 Ã½ nghÄ©a riáº¿ng nhÆ° sau : com : TÃªn cÃ´ng ty ( Ä‘á»“ng thá»i náº±m trong thÆ° má»¥c root package abc : TÃªn viáº¿t táº¯t cá»§a team activities : CÃ¡c activity sáº½ Ä‘Æ°á»£c Ä‘Æ°a vÃ o Ä‘Ã¢y adapters : DÃ nh cho cÃ¡c custom adapter fragments : ToÃ n bá»™ cÃ¡c fragment example : TÃªn cá»§a project. Trong nÃ y sáº½ chá»©a táº¥t cáº£ nhá»¯ng gÃ¬ liÃªn quÃ¡n Ä‘áº¿n project bao gá»“m file Config.java, Application.java.. . models : LÃ m viá»‡c vá»›i preference, lÃ m viá»‡c vá»›i SQLite,.. . navigates : CÃ¡c phÆ°Æ¡ng thá»©c Ä‘iá»u khiá»ƒn vÃ o ra cá»§a fragment sáº½ Ä‘Æ°á»£c Ä‘Æ°a vÃ o Ä‘Ã¢y networks : Xá»­ lÃ½ network, picasso, Volley, OKHttp.. . notifications : Táº¥t cáº£ má»i hoáº¡t Ä‘á»™ng liÃªn quan Ä‘áº¿n notification, GCM utils : CÃ¡c lá»›p há»— trá»£ trong quÃ¡ trÃ¬nh sá»­ dá»¥ng nhÆ° StorageUtil.java, ImageUtil.java, TextUtil.java.. views : Khai bÃ¡o cÃ¡c custom view." } ]
