<!doctype html><html lang="en-US" data-mode="dark"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="[Android] Kotlin standard functions: run-with-let-also-apply" /><meta property="og:locale" content="en_US" /><meta name="description" content="Giới thiệu Standard.kt là một phần nằm trong Kotlin library. Trong đó định nghĩa một số hàm mở rộng như let, apply, run with also mà chắc hẳn bạn đã từng nhìn thấy trong các guide hay đã từng sử dụng chúng." /><meta property="og:description" content="Giới thiệu Standard.kt là một phần nằm trong Kotlin library. Trong đó định nghĩa một số hàm mở rộng như let, apply, run with also mà chắc hẳn bạn đã từng nhìn thấy trong các guide hay đã từng sử dụng chúng." /><link rel="canonical" href="https://hadesptit.github.io/posts/kotlin-starndard-function/" /><meta property="og:url" content="https://hadesptit.github.io/posts/kotlin-starndard-function/" /><meta property="og:site_name" content="Hades" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2019-01-23T14:15:03+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[Android] Kotlin standard functions: run-with-let-also-apply" /><meta name="twitter:site" content="@hades_pt" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2019-01-23T14:15:03+00:00","datePublished":"2019-01-23T14:15:03+00:00","description":"Giới thiệu Standard.kt là một phần nằm trong Kotlin library. Trong đó định nghĩa một số hàm mở rộng như let, apply, run with also mà chắc hẳn bạn đã từng nhìn thấy trong các guide hay đã từng sử dụng chúng.","headline":"[Android] Kotlin standard functions: run-with-let-also-apply","mainEntityOfPage":{"@type":"WebPage","@id":"https://hadesptit.github.io/posts/kotlin-starndard-function/"},"url":"https://hadesptit.github.io/posts/kotlin-starndard-function/"}</script><title>[Android] Kotlin standard functions: run-with-let-also-apply | Hades</title><link rel="icon" type="image/png" href="/assets/img/favicons/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/svg+xml" href="/assets/img/favicons/favicon.svg"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.36.4/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.18/dayjs.min.js,npm/dayjs@1.11.18/locale/en.js,npm/dayjs@1.11.18/plugin/relativeTime.js,npm/dayjs@1.11.18/plugin/localizedFormat.js,npm/tocbot@4.36.4/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="https://avatars.githubusercontent.com/u/20601191?s=400" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">Hades</a><p class="site-subtitle fst-italic mb-0">Chase excellence success will follow you</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info"></i> <span>ABOUT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <a href="https://github.com/HadesPTIT" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/hades_pt" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['Hphamptit','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" class="flex-shrink-0" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>[Android] Kotlin standard functions: run-with-let-also-apply</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link" aria-label="Search"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>[Android] Kotlin standard functions: run-with-let-also-apply</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1548252903" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jan 23, 2019 </time> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/HadesPTIT">Hades</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1329 words" > <em>7 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">[Android] Kotlin standard functions: run-with-let-also-apply</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Contents</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">[Android] Kotlin standard functions: run-with-let-also-apply</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><h1 id="giới-thiệu">Giới thiệu</h1><p><a href="https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/src/kotlin/util/Standard.kt">Standard.kt</a> là một phần nằm trong Kotlin library. Trong đó định nghĩa một số hàm mở rộng như <code class="language-plaintext highlighter-rouge">let</code>, <code class="language-plaintext highlighter-rouge">apply</code>, <code class="language-plaintext highlighter-rouge">run</code> <code class="language-plaintext highlighter-rouge">with</code> <code class="language-plaintext highlighter-rouge">also</code> mà chắc hẳn bạn đã từng nhìn thấy trong các guide hay đã từng sử dụng chúng.</p><p>Trong bài biết này, ta sẽ cùng tìm hiểu cách để phân biệt sự khác nhau giữa chúng và khi nào thì sử dụng nhé :D</p><h3 id="scoping-functions"><span class="me-2">Scoping Functions</span><a href="#scoping-functions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Một số function mà mình focus vào là <em><code class="language-plaintext highlighter-rouge">run</code>, <code class="language-plaintext highlighter-rouge">with</code>, <code class="language-plaintext highlighter-rouge">T.run</code>, <code class="language-plaintext highlighter-rouge">T.let</code>, <code class="language-plaintext highlighter-rouge">T.also</code> và <code class="language-plaintext highlighter-rouge">T.apply</code></em>. Ta gọi đó là những scoping function (hàm phạm vi) bởi chúng có chức năng chính là cung cấp scope nhỏ hơn từ hàm gọi nó.</p><p>Bên dưới là một ví dụ về scoping function :</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="n">fun</span> <span class="nf">test</span><span class="o">()</span> <span class="o">{</span>
    <span class="kt">var</span> <span class="n">mood</span> <span class="o">=</span> <span class="s">"I am sad"</span>

    <span class="n">run</span> <span class="o">{</span>
        <span class="n">val</span> <span class="n">mood</span> <span class="o">=</span> <span class="s">"I am happy"</span>
        <span class="n">println</span><span class="o">(</span><span class="n">mood</span><span class="o">)</span> <span class="c1">// I am happy</span>
    <span class="o">}</span>

    <span class="n">println</span><span class="o">(</span><span class="n">mood</span><span class="o">)</span>  <span class="c1">// I am sad</span>
<span class="o">}</span>
</pre></table></code></div></div><p>Với ví dụ này thì bạn có thể có một scope riêng biệt với giá trị mood được định nghĩa lại thành <code class="language-plaintext highlighter-rouge">I am happy</code> và nó chỉ tồn tại bên trong <code class="language-plaintext highlighter-rouge">run</code>. Một hữu ích khác của <code class="language-plaintext highlighter-rouge">run</code> là nó trả về đối tượng cuối cùng nằm trong scope.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>    <span class="n">run</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">firstTimeView</span><span class="o">)</span> <span class="n">introView</span> <span class="k">else</span> <span class="n">normalView</span>
    <span class="o">}.</span><span class="na">show</span><span class="o">()</span>
    
    <span class="c1">// similarly</span>
    
    <span class="k">if</span> <span class="o">(</span><span class="n">firstTimeView</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">introView</span><span class="o">.</span><span class="na">show</span><span class="o">()</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">normalView</span><span class="o">.</span><span class="na">show</span><span class="o">()</span>
    <span class="o">}</span>
</pre></table></code></div></div><p>Dễ thấy sử dụng <code class="language-plaintext highlighter-rouge">run</code> sẽ ngắn gọn hơn nhiều so với cách thông thường,</p><h3 id="3-attributes-of-scoping-functions"><span class="me-2">3 attributes of scoping functions</span><a href="#3-attributes-of-scoping-functions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Để phân loại các scoping funtion, ta sẽ dựa vào những tiêu chí sau :</p><ul><li>Normal vs. extension function<li>This vs. it argument<li>Return this vs. other type</ul><h4 id="1-normal-vs-extension-function"><span class="me-2">1. Normal vs. extension function</span><a href="#1-normal-vs-extension-function" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Nếu ta để ý <code class="language-plaintext highlighter-rouge">with</code> và <code class="language-plaintext highlighter-rouge">T.run</code> sẽ thấy 2 hàm này khá là giống nhau. Ví dụ bên dưới cho ra kết quả tương đương nhau :</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="n">with</span><span class="o">(</span><span class="n">webview</span><span class="o">.</span><span class="na">settings</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">javaScriptEnabled</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="n">databaseEnabled</span> <span class="o">=</span> <span class="kc">true</span>
<span class="o">}</span>
<span class="c1">// similarly</span>
<span class="n">webview</span><span class="o">.</span><span class="na">settings</span><span class="o">.</span><span class="na">run</span> <span class="o">{</span>
    <span class="n">javaScriptEnabled</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="n">databaseEnabled</span> <span class="o">=</span> <span class="kc">true</span>
<span class="o">}</span>
</pre></table></code></div></div><p>Tuy nhiên, khác nhau giữa chúng là một thằng là normal function (<code class="language-plaintext highlighter-rouge">with</code>), một thằng là extension function (<code class="language-plaintext highlighter-rouge">T.run</code>) Vậy khi nào thì sử dụng <code class="language-plaintext highlighter-rouge">with</code>, khi nào thì sử dụng <code class="language-plaintext highlighter-rouge">T.run</code> ?</p><p>Hãy tưởng tượng nếu webview.settings có thể <code class="language-plaintext highlighter-rouge">null</code>, ví dụ bên trên sẽ được viết lại như sau :</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c1">// Yack!</span>
<span class="n">with</span><span class="o">(</span><span class="n">webview</span><span class="o">.</span><span class="na">settings</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">?.</span><span class="na">javaScriptEnabled</span> <span class="o">=</span> <span class="kc">true</span>
      <span class="k">this</span><span class="o">?.</span><span class="na">databaseEnabled</span> <span class="o">=</span> <span class="kc">true</span>
   <span class="o">}</span>
<span class="o">}</span>
<span class="c1">// Nice.</span>
<span class="n">webview</span><span class="o">.</span><span class="na">settings</span><span class="o">?.</span><span class="na">run</span> <span class="o">{</span>
    <span class="n">javaScriptEnabled</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="n">databaseEnabled</span> <span class="o">=</span> <span class="kc">true</span>
<span class="o">}</span>
</pre></table></code></div></div><p>Trong trường hợp này, <code class="language-plaintext highlighter-rouge">T.run</code> tốt hơn, bởi ta có thể check null trước khi sử dụng nó.</p><h4 id="2-this-vs-it-argument"><span class="me-2">2. This vs. it argument</span><a href="#2-this-vs-it-argument" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Tiếp theo là <code class="language-plaintext highlighter-rouge">T.run</code> và <code class="language-plaintext highlighter-rouge">T.let</code>, cả 2 function khá giống nhau ngoại trừ cách mà chúng nhận tham số.</p><p>Hãy nhìn ví dụ bên dưới :</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="n">stringVariable</span><span class="o">?.</span><span class="na">run</span> <span class="o">{</span>
      <span class="n">println</span><span class="o">(</span><span class="s">"The length of this String is $length"</span><span class="o">)</span>
<span class="o">}</span>
<span class="c1">// Similarly.</span>
<span class="n">stringVariable</span><span class="o">?.</span><span class="na">let</span> <span class="o">{</span>
      <span class="n">println</span><span class="o">(</span><span class="s">"The length of this String is ${it.length}"</span><span class="o">)</span>
<span class="o">}</span>
</pre></table></code></div></div><p>Nếu để ý vào chi tiết của <code class="language-plaintext highlighter-rouge">T.run</code>, bạn sẽ thấy <code class="language-plaintext highlighter-rouge">T.run</code> chỉ được tạo ra dưới dạng extension function gọi là T.() . Do đó tất cả bên trong scope, T có thể được gọi như <code class="language-plaintext highlighter-rouge">this</code>. Trong lập trình, phần lớn <code class="language-plaintext highlighter-rouge">this</code> đều có thể bỏ qua. Vì vậy, ta có thể sử dụng <code class="language-plaintext highlighter-rouge">$length</code> thay vì <code class="language-plaintext highlighter-rouge">${this.length}</code>.</p><p>Với <code class="language-plaintext highlighter-rouge">T.let</code>, bạn sẽ thấy <code class="language-plaintext highlighter-rouge">T.let</code> gửi chính nó vào<code class="language-plaintext highlighter-rouge"> block: (T)</code>. và có thể được gọi trong function như <code class="language-plaintext highlighter-rouge">it</code>.</p><p>Từ đặc điểm của<code class="language-plaintext highlighter-rouge"> T.let</code> và <code class="language-plaintext highlighter-rouge">T.run</code>, có vẻ như <code class="language-plaintext highlighter-rouge">T.run</code> tốt hơn <code class="language-plaintext highlighter-rouge">T.let</code>, nhưng <code class="language-plaintext highlighter-rouge">T.let</code> có một số ưu điểm như sau :</p><ul><li><code class="language-plaintext highlighter-rouge">T.let</code> giúp phân biệt rõ ràng hơn biến thành viên và bên ngoài<li>Trong 1 số trường hợp this không thể bỏ qua, “it” ngắn hơn “this”<li>T.let cho phép đặt tên chuyển đổi, do đó bạn có thể đổi “it” sang một cái tên khác dễ hiểu hơn.<div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">stringVariable</span><span class="o">?.</span><span class="na">let</span> <span class="o">{</span>
  <span class="n">nonNullString</span> <span class="o">-&gt;</span>
  <span class="n">println</span><span class="o">(</span><span class="s">"The non null string is $nonNullString"</span><span class="o">)</span>
<span class="o">}</span>
</pre></table></code></div></div></ul><h4 id="3return-this-vs-other-type"><span class="me-2">3.Return this vs. other type</span><a href="#3return-this-vs-other-type" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Giờ hãy để ý đến <code class="language-plaintext highlighter-rouge">T.let</code> và <code class="language-plaintext highlighter-rouge">T.also</code>, cả 2 đều giống nhau nếu ta nhìn vào phần thân của chúng :</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="n">stringVariable</span><span class="o">?.</span><span class="na">let</span> <span class="o">{</span>
      <span class="n">println</span><span class="o">(</span><span class="s">"The length of this String is ${it.length}"</span><span class="o">)</span>
<span class="o">}</span>
<span class="c1">// Exactly the same as below</span>
<span class="n">stringVariable</span><span class="o">?.</span><span class="na">also</span> <span class="o">{</span>
      <span class="n">println</span><span class="o">(</span><span class="s">"The length of this String is ${it.length}"</span><span class="o">)</span>
<span class="o">}</span>
</pre></table></code></div></div><p>Tuy nhiên, sự khác biệt giữa chúng là đối tượng trả về. <code class="language-plaintext highlighter-rouge">T.let</code> cho phép trả về một kiểu giá trị khác trong khi <code class="language-plaintext highlighter-rouge">T.also</code> trả về chính nó T.</p><p>Cả 2 đều hữu ích đối với các hàm chuỗi (chaining function) khi mà <code class="language-plaintext highlighter-rouge">T.let</code> cho phép bạn triển khai các operation liên tục và <code class="language-plaintext highlighter-rouge">T.also</code> cho phép bạn biểu diễn trên cùng một variable. Dưới đây là một minh họa :</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
</pre><td class="rouge-code"><pre>
<span class="n">val</span> <span class="n">original</span> <span class="o">=</span> <span class="s">"abc"</span>
<span class="c1">// Evolve the value and send to the next chain</span>
<span class="n">original</span><span class="o">.</span><span class="na">let</span> <span class="o">{</span>
    <span class="n">println</span><span class="o">(</span><span class="s">"The original String is $it"</span><span class="o">)</span> <span class="c1">// "abc"</span>
    <span class="n">it</span><span class="o">.</span><span class="na">reversed</span><span class="o">()</span> <span class="c1">// evolve it as parameter to send to next let</span>
<span class="o">}.</span><span class="na">let</span> <span class="o">{</span>
    <span class="n">println</span><span class="o">(</span><span class="s">"The reverse String is $it"</span><span class="o">)</span> <span class="c1">// "cba"</span>
    <span class="n">it</span><span class="o">.</span><span class="na">length</span>  <span class="c1">// can be evolve to other type</span>
<span class="o">}.</span><span class="na">let</span> <span class="o">{</span>
    <span class="n">println</span><span class="o">(</span><span class="s">"The length of the String is $it"</span><span class="o">)</span> <span class="c1">// 3</span>
<span class="o">}</span>
<span class="c1">// Wrong</span>
<span class="c1">// Same value is sent in the chain (printed answer is wrong)</span>
<span class="n">original</span><span class="o">.</span><span class="na">also</span> <span class="o">{</span>
    <span class="n">println</span><span class="o">(</span><span class="s">"The original String is $it"</span><span class="o">)</span> <span class="c1">// "abc"</span>
    <span class="n">it</span><span class="o">.</span><span class="na">reversed</span><span class="o">()</span> <span class="c1">// even if we evolve it, it is useless</span>
<span class="o">}.</span><span class="na">also</span> <span class="o">{</span>
    <span class="n">println</span><span class="o">(</span><span class="s">"The reverse String is ${it}"</span><span class="o">)</span> <span class="c1">// "abc"</span>
    <span class="n">it</span><span class="o">.</span><span class="na">length</span>  <span class="c1">// even if we evolve it, it is useless</span>
<span class="o">}.</span><span class="na">also</span> <span class="o">{</span>
    <span class="n">println</span><span class="o">(</span><span class="s">"The length of the String is ${it}"</span><span class="o">)</span> <span class="c1">// "abc"</span>
<span class="o">}</span>
<span class="c1">// Corrected for also (i.e. manipulate as original string</span>
<span class="c1">// Same value is sent in the chain </span>
<span class="n">original</span><span class="o">.</span><span class="na">also</span> <span class="o">{</span>
    <span class="n">println</span><span class="o">(</span><span class="s">"The original String is $it"</span><span class="o">)</span> <span class="c1">// "abc"</span>
<span class="o">}.</span><span class="na">also</span> <span class="o">{</span>
    <span class="n">println</span><span class="o">(</span><span class="s">"The reverse String is ${it.reversed()}"</span><span class="o">)</span> <span class="c1">// "cba"</span>
<span class="o">}.</span><span class="na">also</span> <span class="o">{</span>
    <span class="n">println</span><span class="o">(</span><span class="s">"The length of the String is ${it.length}"</span><span class="o">)</span> <span class="c1">// 3</span>
<span class="o">}</span>

</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">T.also</code> có vẻ không có tác dụng ở trên, vì ta có thể kết hợp chúng thành một khối chức năng duy nhất. Tuy nhiên, suy nghĩ kĩ một chút, chúng ta có thể thấy nó có một số điểm mạnh như:</p><ul><li>Tách rời rất rõ ràng trên cùng một đối tượng, tức là làm cho phần chức năng nhỏ hơn.<li>Có thể tự thao tác trước khi được sử dụng, tạo ra một hoạt động xây dựng chuỗi.</ul><p>Thử kết hợp <code class="language-plaintext highlighter-rouge">T.let</code> và <code class="language-plaintext highlighter-rouge">T.also</code> xem nào :</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="c1">// Normal approach</span>
<span class="n">fun</span> <span class="nf">makeDir</span><span class="o">(</span><span class="nl">path:</span> <span class="nc">String</span><span class="o">):</span> <span class="nc">File</span>  <span class="o">{</span>
    <span class="n">val</span> <span class="n">result</span> <span class="o">=</span> <span class="nc">File</span><span class="o">(</span><span class="n">path</span><span class="o">)</span>
    <span class="n">result</span><span class="o">.</span><span class="na">mkdirs</span><span class="o">()</span>
    <span class="k">return</span> <span class="n">result</span>
<span class="o">}</span>

<span class="c1">// Improved approach</span>
<span class="n">fun</span> <span class="nf">makeDir</span><span class="o">(</span><span class="nl">path:</span> <span class="nc">String</span><span class="o">)</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="na">let</span><span class="o">{</span> <span class="nc">File</span><span class="o">(</span><span class="n">it</span><span class="o">)</span> <span class="o">}.</span><span class="na">also</span><span class="o">{</span> <span class="n">it</span><span class="o">.</span><span class="na">mkdirs</span><span class="o">()</span> <span class="o">}</span>
</pre></table></code></div></div><h3 id="looking-at-all-attributes"><span class="me-2">Looking at all attributes</span><a href="#looking-at-all-attributes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Qua các tiêu chí trên, ta có thể thấy được khá đầy đủ về cách các function <code class="language-plaintext highlighter-rouge">run</code> <code class="language-plaintext highlighter-rouge">with</code> <code class="language-plaintext highlighter-rouge">let</code> <code class="language-plaintext highlighter-rouge">also</code> hoạt động. Vậy còn <code class="language-plaintext highlighter-rouge">T.apply</code> thì sao ?</p><ul><li><code class="language-plaintext highlighter-rouge">T.apply</code> là một extension function<li><code class="language-plaintext highlighter-rouge">T.apply</code> gửi <code class="language-plaintext highlighter-rouge">this</code> như một tham số<li><code class="language-plaintext highlighter-rouge">T.apply</code> trả về <code class="language-plaintext highlighter-rouge">this</code>.</ul><p>Dưới đây là ví dụ :</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="c1">// Normal approach</span>
<span class="n">fun</span> <span class="nf">createInstance</span><span class="o">(</span><span class="nl">args:</span> <span class="nc">Bundle</span><span class="o">)</span> <span class="o">:</span> <span class="nc">MyFragment</span> <span class="o">{</span>
    <span class="n">val</span> <span class="n">fragment</span> <span class="o">=</span> <span class="nc">MyFragment</span><span class="o">()</span>
    <span class="n">fragment</span><span class="o">.</span><span class="na">arguments</span> <span class="o">=</span> <span class="n">args</span>
    <span class="k">return</span> <span class="n">fragment</span>
<span class="o">}</span>
<span class="c1">// Improved approach</span>
<span class="n">fun</span> <span class="nf">createInstance</span><span class="o">(</span><span class="nl">args:</span> <span class="nc">Bundle</span><span class="o">)</span> 
              <span class="o">=</span> <span class="nc">MyFragment</span><span class="o">().</span><span class="na">apply</span> <span class="o">{</span> <span class="n">arguments</span> <span class="o">=</span> <span class="n">args</span> <span class="o">}</span>

</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="c1">// Normal approach</span>
<span class="n">fun</span> <span class="nf">createIntent</span><span class="o">(</span><span class="nl">intentData:</span> <span class="nc">String</span><span class="o">,</span> <span class="nl">intentAction:</span> <span class="nc">String</span><span class="o">):</span> <span class="nc">Intent</span> <span class="o">{</span>
    <span class="n">val</span> <span class="n">intent</span> <span class="o">=</span> <span class="nc">Intent</span><span class="o">()</span>
    <span class="n">intent</span><span class="o">.</span><span class="na">action</span> <span class="o">=</span> <span class="n">intentAction</span>
    <span class="n">intent</span><span class="o">.</span><span class="na">data</span><span class="o">=</span><span class="nc">Uri</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">intentData</span><span class="o">)</span>
    <span class="k">return</span> <span class="n">intent</span>
<span class="o">}</span>
<span class="c1">// Improved approach, chaining</span>
<span class="n">fun</span> <span class="nf">createIntent</span><span class="o">(</span><span class="nl">intentData:</span> <span class="nc">String</span><span class="o">,</span> <span class="nl">intentAction:</span> <span class="nc">String</span><span class="o">)</span> <span class="o">=</span>
        <span class="nc">Intent</span><span class="o">().</span><span class="na">apply</span> <span class="o">{</span> <span class="n">action</span> <span class="o">=</span> <span class="n">intentAction</span> <span class="o">}</span>
                <span class="o">.</span><span class="na">apply</span> <span class="o">{</span> <span class="n">data</span> <span class="o">=</span> <span class="nc">Uri</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">intentData</span><span class="o">)</span> <span class="o">}</span>
                
</pre></table></code></div></div><h3 id="function-selections"><span class="me-2">Function selections</span><a href="#function-selections" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Dựa vào các đặc trưng và tính năng của từng loại mà bạn hãy quyết định sử dụng chúng một cách hợp lý nhé :D</p><p><a href="https://images.viblo.asia/62508328-1287-48d0-b74f-2060a30dcbe3.png" class="popup img-link shimmer"><img src="https://images.viblo.asia/62508328-1287-48d0-b74f-2060a30dcbe3.png" alt="" loading="lazy"></a></p><h3 id="references"><span class="me-2">References</span><a href="#references" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ol><li><a href="https://medium.com/@elye.project/mastering-kotlin-standard-functions-run-with-let-also-and-apply-9cd334b0ef84">https://medium.com/@elye.project/mastering-kotlin-standard-functions-run-with-let-also-and-apply-9cd334b0ef84</a></ol></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/android/">Android</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/android/" class="post-tag no-text-decoration" >android</a> <a href="/tags/performance/" class="post-tag no-text-decoration" >performance</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[Android]%20Kotlin%20standard%20functions:%20run-with-let-also-apply%20-%20Hades&url=https%3A%2F%2Fhadesptit.github.io%2Fposts%2Fkotlin-starndard-function%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[Android]%20Kotlin%20standard%20functions:%20run-with-let-also-apply%20-%20Hades&u=https%3A%2F%2Fhadesptit.github.io%2Fposts%2Fkotlin-starndard-function%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=[Android]%20Kotlin%20standard%20functions:%20run-with-let-also-apply%20-%20Hades&url=https%3A%2F%2Fhadesptit.github.io%2Fposts%2Fkotlin-starndard-function%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fhadesptit.github.io%2Fposts%2Fkotlin-starndard-function%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recent Update</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/flutter-338/">[Flutter] Flutter 3.38 & Dart 3.10 có gì mới ?</a><li class="text-truncate lh-lg"> <a href="/posts/flutter-33/">[Flutter] Flutter 3.3 có gì mới ?</a><li class="text-truncate lh-lg"> <a href="/posts/what-news-in-flutter3/">[Flutter] Flutter 3.0 có gì mới ?</a><li class="text-truncate lh-lg"> <a href="/posts/flutter-2.8/">[Flutter] Flutter 2.8 có gì mới ?</a><li class="text-truncate lh-lg"> <a href="/posts/shrinkwrap-vs-slivers/">[Flutter] ShrinkWrap vs Slivers | Decoding Flutter</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/android/">android</a> <a class="post-tag btn btn-outline-primary" href="/tags/flutter/">flutter</a> <a class="post-tag btn btn-outline-primary" href="/tags/dart/">dart</a> <a class="post-tag btn btn-outline-primary" href="/tags/rxjava/">rxjava</a> <a class="post-tag btn btn-outline-primary" href="/tags/kotlin/">kotlin</a> <a class="post-tag btn btn-outline-primary" href="/tags/new/">new</a> <a class="post-tag btn btn-outline-primary" href="/tags/performance/">performance</a> <a class="post-tag btn btn-outline-primary" href="/tags/android-studio/">android studio</a> <a class="post-tag btn btn-outline-primary" href="/tags/as/">as</a> <a class="post-tag btn btn-outline-primary" href="/tags/cicd/">cicd</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/android-performance-rendering/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1545574503" data-df="ll" > Dec 23, 2018 </time><h4 class="pt-0 my-2">[Android] Performance  -  Rendering</h4><div class="text-muted"><p>Hiệu năng ứng dụng luôn là vấn đề với mọi lập trình viên mobile. Bởi lẽ, nếu bạn nhận ra ứng dụng của mình chậm hoặc tệ hơn là ai đó nói với bạn rằng ứng dụng của bạn chậm quá thì thật đáng buồn ph...</p></div></div></a></article><article class="col"> <a href="/posts/rxjava-start/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1562422503" data-df="ll" > Jul 6, 2019 </time><h4 class="pt-0 my-2">[RxJava] Khái niệm</h4><div class="text-muted"><p>Giới thiệu Khi tôi mới học Android, ai đó đã nói với tôi rằng “Nếu bạn muốn học thứ gì khó khó, hãy học RxJava”. Trong series này, tôi sẽ cùng các bạn tìm hiểu nó từ những điều đơn giản nhất nhé. ...</p></div></div></a></article><article class="col"> <a href="/posts/android-paging-library/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1558361703" data-df="ll" > May 20, 2019 </time><h4 class="pt-0 my-2">[Android] Architecture Components : Paging Library</h4><div class="text-muted"><p>Introduction Hiện nay việc tải và hiển thị dữ liệu dưới dạng danh sách rất phổ biến và hầu như ứng dụng nào cũng có. Với những tập dữ liệu đầu vào vừa và nhỏ ta thường tải xong sau đó mới hiển thị...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/android-performance-rendering/" class="btn btn-outline-primary" aria-label="Older" ><p>[Android] Performance  -  Rendering</p></a> <a href="/posts/kotlin-sealed-class/" class="btn btn-outline-primary" aria-label="Newer" ><p>[Android] Kotlin Sealed Class</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://github.com/HadesPTIT">Hades</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p>Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.4.1" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/android/">android</a> <a class="post-tag btn btn-outline-primary" href="/tags/flutter/">flutter</a> <a class="post-tag btn btn-outline-primary" href="/tags/dart/">dart</a> <a class="post-tag btn btn-outline-primary" href="/tags/rxjava/">rxjava</a> <a class="post-tag btn btn-outline-primary" href="/tags/kotlin/">kotlin</a> <a class="post-tag btn btn-outline-primary" href="/tags/new/">new</a> <a class="post-tag btn btn-outline-primary" href="/tags/performance/">performance</a> <a class="post-tag btn btn-outline-primary" href="/tags/android-studio/">android studio</a> <a class="post-tag btn btn-outline-primary" href="/tags/as/">as</a> <a class="post-tag btn btn-outline-primary" href="/tags/cicd/">cicd</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{content}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
