<!DOCTYPE html><html lang="en-US" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="[CI/CD] Tích hợp CI/CD với Gitlab" /><meta property="og:locale" content="en_US" /><meta name="description" content="1.Introduction" /><meta property="og:description" content="1.Introduction" /><link rel="canonical" href="https://hadesptit.github.io/posts/ci-cd-gitlab/" /><meta property="og:url" content="https://hadesptit.github.io/posts/ci-cd-gitlab/" /><meta property="og:site_name" content="Hades" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2019-06-19T14:15:03+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[CI/CD] Tích hợp CI/CD với Gitlab" /><meta name="twitter:site" content="@hades_pt" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2019-06-19T14:15:03+00:00","datePublished":"2019-06-19T14:15:03+00:00","description":"1.Introduction","headline":"[CI/CD] Tích hợp CI/CD với Gitlab","mainEntityOfPage":{"@type":"WebPage","@id":"https://hadesptit.github.io/posts/ci-cd-gitlab/"},"url":"https://hadesptit.github.io/posts/ci-cd-gitlab/"}</script><title>[CI/CD] Tích hợp CI/CD với Gitlab | Hades</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/20601191?s=400" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Hades</a></div><div class="site-subtitle font-italic">Chase excellence success will follow you</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/HadesPTIT" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/hades_pt" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['Hphamptit','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>[CI/CD] Tích hợp CI/CD với Gitlab</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[CI/CD] Tích hợp CI/CD với Gitlab</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Hades </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Jun 19, 2019, 2:15 PM +0000" prep="on" > Jun 19, 2019 <i class="unloaded">2019-06-19T14:15:03+00:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1230 words">6 min</span></div></div><div class="post-content"><h3 id="1introduction">1.Introduction</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://images.viblo.asia/d3358d65-f8ad-4d94-b371-9bbcc6afe3f0.png" alt="" /></p><p>Chắc hẳn các bạn đã từng nghe đến hệ thống CI/CD. Mục tiêu của nó là tự động hóa các khâu trong quy trình phát triển phần mềm hiện nay. Nếu chưa biết nó là gì, hãy tham khảo bài viết <a href="https://viblo.asia/p/ci-cd-va-devops-07LKXYXDZV4">này</a> của anh @nghiadd để hiểu cơ bản về CI/CD.</p><p>Hiện nay có rất nhiều hệ thống như <strong>Travis</strong>, <strong>Jenkin</strong>, <strong>Circle</strong>, <strong>Gitlab</strong> có thể giúp bạn làm được điều đó. Trong bài viết này, mình sẽ giới thiệu với các bạn tổng quan <code class="language-plaintext highlighter-rouge">Gitlab CI</code> và cách để xây dựng một hệ thống cơ bản.</p><h3 id="2-git-flow">2. Git Flow</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://images.viblo.asia/703279f5-241c-472d-8adc-deb324758551.png" alt="" /></p><p>Developer hoàn thành một task nào đó và push commit lên Gitlab để mọi người review.</p><p>Khi đó <code class="language-plaintext highlighter-rouge">Gitlab CI</code> cũng bắt đầu thực hiện công việc mà nó được giao. Nó sử dụng file <code class="language-plaintext highlighter-rouge">.gitlab-ci.ym</code> nằm trong thư mục gốc của repo để cấu hình project sử dụng các <code class="language-plaintext highlighter-rouge">Runner</code>. Một <code class="language-plaintext highlighter-rouge">Pipeline</code> CI sinh ra và report sẽ được hiển thị trên giao diện.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://images.viblo.asia/a50f0294-80d3-4a49-8e89-5a95f113ef66.PNG" alt="" /></p><p>Vậy <code class="language-plaintext highlighter-rouge">Pipelines</code> là gì ?</p><h3 id="3-pipelines">3. Pipelines</h3><p>Là thành phần cấp cao nhất của tích hợp, phân phối và triển khai liên tục.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>Pipelines are the top-level component of continuous integration, delivery, and deployment.
</pre></table></code></div></div><p><strong>Pipeline</strong> bao gồm :</p><ul><li><strong>Jobs</strong> : Các công việc được giao thực thi. ( Ví dụ : biên dịch mã hoặc chạy test )<li><strong>Stage</strong> : Xác định các thời điểm và cách thực hiện. ( Ví dụ : test chỉ chạy sau khi biên dịch thành công )</ul><p><strong>Pipeline</strong> hoạt động theo nguyên tắc sau :</p><ul><li>Tất cả các công việc trong cùng một <code class="language-plaintext highlighter-rouge">stage</code> được <code class="language-plaintext highlighter-rouge">Runner</code> thực hiện song song, nếu có đủ số lượng <code class="language-plaintext highlighter-rouge">Runner</code> đồng thời.<li>Nếu Success, pipeline chuyển sang <code class="language-plaintext highlighter-rouge">stage</code> tiếp theo.<li>Nếu Failed, pipeline sẽ dừng lại. Có một ngoại lệ là nếu job được đánh dấu làm thủ công, thì dù bị fail thì pipeline vẫn tiếp tục.</ul><p>Bên dưới là ví dụ về đồ thị Pipeline thông thường :</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://images.viblo.asia/af6e91ef-0fd1-41e9-9efb-5127a7b239e9.png" alt="" /></p><p>Tóm lại, các bước để <strong>Gitlab CI</strong> hoạt động như sau :</p><ul><li>Thêm<code class="language-plaintext highlighter-rouge"> .gitlab-ci.yml</code> vào thư mục gốc của repo.<li>Cấu hình gitlab <code class="language-plaintext highlighter-rouge">Runner</code></ul><h3 id="4-config-gitlab-ciyml">4. Config gitlab-ci.yml</h3><h4 id="41-create-gilab-ciyml">4.1 Create .gilab-ci.yml</h4><p><code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code> được viết theo định dạng YAML. Bạn có thể tìm hiểu thêm tại <a href="https://yaml.org/">đây</a>.</p><p>Như đã đề cập ở trên, <code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code> cho <code class="language-plaintext highlighter-rouge">Runner</code> biết những công việc cần phải làm. Mặc định, nó sẽ chạy một pipeline với 3 stage :</p><ul><li>build<li>test<li>deploy</ul><p>Tuy nhiên, bạn không cần phải sử dụng cả 3 stage, các stage không được giao việc sẽ được bỏ qua.</p><p>Dưới đây là ví dụ cấu hình cho một dự án Ruby on Rails :</p><div class="language-yaml highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="na">image</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ruby:2.5"</span>

<span class="na">before_script</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">apt-get update -qq &amp;&amp; apt-get install -y -qq sqlite3 libsqlite3-dev nodejs</span>
  <span class="pi">-</span> <span class="s">ruby -v</span>
  <span class="pi">-</span> <span class="s">which ruby</span>
  <span class="pi">-</span> <span class="s">gem install bundler --no-document</span>
  <span class="pi">-</span> <span class="s">bundle install --jobs $(nproc)  "${FLAGS[@]}"</span>

<span class="na">rspec</span><span class="pi">:</span>
  <span class="na">script</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">bundle exec rspec</span>

<span class="na">rubocop</span><span class="pi">:</span>
  <span class="na">script</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">bundle exec rubocop</span>
</pre></table></code></div></div><p>Đây là cấu hình đơn giản nhất có thể hoạt động với hầu hết các ứng dụng Ruby</p><ol><li>Xác định 2 job <code class="language-plaintext highlighter-rouge">rspec</code> và <code class="language-plaintext highlighter-rouge">rubocop</code> với các lệnh thực thi khác nhau.<li>Trước mỗi job, các lệnh được xác định bởi <strong>before_script</strong> được thực thi.</ol><p>Nếu bạn muốn kiểm tra xem file<code class="language-plaintext highlighter-rouge"> .gitlab-ci.yml</code> có hợp lệ hay không, có một công cụ lint trong page <strong>/-/ci/lint</strong> trong namespace project. Bạn cũng có thể thấy nút <code class="language-plaintext highlighter-rouge">CI Lint</code> để đến trang này trong mục <strong>CI/CD</strong> -&gt; <strong>Pipelines</strong> và <strong>Pipelines</strong> -&gt; <strong>Jobs</strong> trong page Project.</p><h4 id="42-push-gitlab-ciyml-to-gitlab">4.2. Push .gitlab-ci.yml to GitLab</h4><p>Sau khi tạo file <code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code>, thêm nó vào git repos và push nó lên gitlab.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>git add .gitlab-ci.yml
git commit -m "Add .gitlab-ci.yml"
git push origin master
</pre></table></code></div></div><p>Trở về <code class="language-plaintext highlighter-rouge">Pipeline</code> page, bạn sẽ thấy pipeline đang ở trạng thái <code class="language-plaintext highlighter-rouge">pending</code>. Bạn cũng có thể tới page <code class="language-plaintext highlighter-rouge">Commits</code>, để ý icon tạm dừng nhỏ bên cạnh commit SHA.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://images.viblo.asia/70eec0ec-a424-41bc-915a-130746df5e25.png" alt="" /></p><p>Click vào nó sẽ chuyển hướng đến page <code class="language-plaintext highlighter-rouge">Jobs</code> của commit tương ứng.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://images.viblo.asia/a0bb93f8-f5ac-42df-9e79-3cc2e49495c2.png" alt="" /></p><p>Thông báo <strong><code class="language-plaintext highlighter-rouge">stuck</code></strong> chỉ rằng chưa có <code class="language-plaintext highlighter-rouge">Gitlab runner</code> nào được cấu hình để thực thi Job này.</p><p>Bước tiếp theo mình sẽ cấu hình Runner để nó thực thi công việc này.</p><h3 id="5-gitlab-runner">5. Gitlab Runner</h3><p>Trong gitlab, các <code class="language-plaintext highlighter-rouge">Runner</code> thực thi các jobs được định nghĩa trong file <code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code>.</p><p>Một <strong>Runner</strong> có thể là một <strong>máy ảo</strong> (VM), một <strong>VPS</strong>, một <strong>bare-metal</strong>, một <strong>docker container</strong> hay thậm chí là một <strong>cluster container</strong>. Gitlab và Runners giao tiếp với nhau thông qua API, vì vậy yêu cầu duy nhất là máy chạy Runner có quyền truy cập Gitlab server.</p><p>Một <code class="language-plaintext highlighter-rouge">Runner</code> có thể xác định cụ thể cho một dự án nhất định hoặc phục vụ cho nhiều dự án trong Gitlab. Nếu nó phục vụ cho tất cả project thì được gọi là <code class="language-plaintext highlighter-rouge">Shared Runner</code>.</p><p>Để xác định xem <strong>Runner</strong> nào được chỉ định cho project của bạn. Vào <strong>Settings</strong> -&gt; <strong>CI/CD</strong>.</p><p>Để Runner hoạt động được, bạn cần thực hiện 2 bước :</p><ul><li><a href="https://docs.gitlab.com/runner/install/">Cài đặt Runner</a><li><a href="https://docs.gitlab.com/ee/ci/runners/README.html#registering-a-specific-runner">Cấu hình Runner</a></ul><p>Trong bài viết này, mình sẽ chỉ các bạn các bước để thiết lập trên môi trường Windows :</p><p>Đầu tiên, truy cập vào project Gitlab. Vào <strong>Settings</strong> -&gt; <strong>CI/CD</strong> -&gt; <strong>Runners</strong> (expand).</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://images.viblo.asia/22c2585f-85d1-4594-a28f-c799c2631835.png" alt="" /></p><ol><li>Tạo một folder bất kì trên hệ thống ( ví dụ : <code class="language-plaintext highlighter-rouge">C:\GitLab-Runner</code>)<li>Tùy thuộc vào phiên bản hệ điều hành mà bạn download bản <a href="https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-windows-386.exe">x86</a> hay <a href="https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-windows-amd64.exe">amd64</a> . Sau đó di chuyển vào thư mục vừa tạo và đổi tên thành <code class="language-plaintext highlighter-rouge">gitlab-runner.exe</code>.<li><p>Bật CMD với quyền admin, cd tới thư mục vừa tạo và chạy lệnh :</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre> gitlab-runner register
</pre></table></code></div></div><li>Nhập gitlab url của bạn :<div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>  Please enter the gitlab-ci coordinator URL (e.g. https://gitlab.com )
  https://gitlab.com
</pre></table></code></div></div><li>Nhập Token nhận được từ giao diện trên.<div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>Please enter the gitlab-ci token for this runner
xxx
</pre></table></code></div></div><li><p>Thêm mô tả cho Runner, phần này có thể thay đổi sau trong giao diện người dùng Gitlab :</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>  Please enter the gitlab-ci description for this runner
  [hostname] my-runner
</pre></table></code></div></div><li>Thêm các thẻ Tags được liên kết với Runners, phần này có thể thay đổi sau :<div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>  Please enter the gitlab-ci tags for this runner (comma separated):
  my-tag,another-tag
</pre></table></code></div></div><li>Chọn <strong>Executor</strong> cho Runner<div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>  Please enter the executor: ssh, docker+machine, docker-ssh+machine, kubernetes, docker, parallels, virtualbox, docker-ssh, shell:
  docker
</pre></table></code></div></div><li><p>Nếu chọn Docker, bạn sẽ được yêu cầu thêm image mặc định nếu image không được định nghĩa trong <code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code>.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>  Please enter the Docker image (eg. ruby:2.1):
  alpine:latest
</pre></table></code></div></div></ol><p>OK, đến đây là đã thiết lập thành công Gitlab CI rồi đó :+1:</p><h3 id="6-seeing-status-of-your-pipeline--jobs">6. Seeing status of your pipeline &amp; jobs</h3><p>Sau khi cấu hình thành công, bạn có thể thấy trạng thái của commit cuối cùng đã chuyển từ <code class="language-plaintext highlighter-rouge">pending</code> thành <code class="language-plaintext highlighter-rouge">running</code> or <code class="language-plaintext highlighter-rouge">success</code> or <code class="language-plaintext highlighter-rouge">failed</code>…</p><p>Bạn có thể theo dõi tất cả <code class="language-plaintext highlighter-rouge">pipeline</code> trong project :</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://images.viblo.asia/86a31214-0aac-447c-9927-7a13d46f02d4.png" alt="" /></p><p>Hoặc có thể xem các jobs bằng cách truy cập <strong>Pipelines</strong> -&gt; <strong>Jobs</strong>.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://images.viblo.asia/8b74282b-54e8-418f-8076-ba5f93391062.png" alt="" /></p><p>Bằng cách click vào trạng thái job, bạn có thể xem log của nó. Điều này rất quan trọng để chuẩn đoán tại sao job lại thất bại hay hành động khác với mong đợi.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://images.viblo.asia/dab770ee-f62b-40b6-8c2a-4f44e9b9f0fd.png" alt="" /></p><h3 id="summary">Summary</h3><p>Hi vọng bài biết giúp các bạn hiểu được các khái niệm cơ bản về CI/CD cũng như cách xây dựng hệ thống cơ bản với Gilab CI. Chúc các bạn coding vui vẻ :+1::+1:</p><p>Tham khảo : <a href="https://docs.gitlab.com/">https://docs.gitlab.com/</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/ci-cd/'>CI/CD</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/cicd/" class="post-tag no-text-decoration" >cicd</a> <a href="/tags/gitlab/" class="post-tag no-text-decoration" >gitlab</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[CI/CD] Tích hợp CI/CD với Gitlab - Hades&url=https://hadesptit.github.io/posts/ci-cd-gitlab/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[CI/CD] Tích hợp CI/CD với Gitlab - Hades&u=https://hadesptit.github.io/posts/ci-cd-gitlab/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=[CI/CD] Tích hợp CI/CD với Gitlab - Hades&url=https://hadesptit.github.io/posts/ci-cd-gitlab/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://hadesptit.github.io/posts/ci-cd-gitlab/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/android/">android</a> <a class="post-tag" href="/tags/flutter/">flutter</a> <a class="post-tag" href="/tags/dart/">dart</a> <a class="post-tag" href="/tags/rxjava/">rxjava</a> <a class="post-tag" href="/tags/kotlin/">kotlin</a> <a class="post-tag" href="/tags/new/">new</a> <a class="post-tag" href="/tags/performance/">performance</a> <a class="post-tag" href="/tags/android-studio/">android studio</a> <a class="post-tag" href="/tags/as/">as</a> <a class="post-tag" href="/tags/cicd/">cicd</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/flutter-33/"><div class="card-body"> <span class="timeago small" > Sep 10 <i class="unloaded">2022-09-10T14:15:03+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Flutter] Flutter 3.3 có gì mới ?</h3><div class="text-muted small"><p> I. Introduction Chào mừng đến với Flutter 3.3 Đây là phiên bản cập nhật với nhiều tính năng thú vị để xử lý văn bản, cải thiện hiệu suất và hơn thế nữa! Chỉ 3 tháng trước khi công bố Flutter 3, ...</p></div></div></a></div><div class="card"> <a href="/posts/what-news-in-flutter3/"><div class="card-body"> <span class="timeago small" > Jun 1 <i class="unloaded">2022-06-01T14:15:03+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Flutter] Flutter 3.0 có gì mới ?</h3><div class="text-muted small"><p> Giới thiệu 11/05/2022, Google I/O chính thức phát hành phiên bản Flutter 3 với rất nhiều cải tiến đáng kể. Đặc biệt dành cho các thiết bị sử dụng window. Trong bài viết này mình sẽ cùng tìm hiểu x...</p></div></div></a></div><div class="card"> <a href="/posts/flutter-2.8/"><div class="card-body"> <span class="timeago small" > Dec 10, 2021 <i class="unloaded">2021-12-10T14:15:03+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Flutter] Flutter 2.8 có gì mới ?</h3><div class="text-muted small"><p> Introduction Hi, xin chào mọi người :D Flutter vừa mới cho ra mắt phiên bản 2.8 với khá nhiều cập nhật mới cùng những con số đáng chú ý 207 contributor &amp; 178 reviewers 2424 MRs được mer...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/android-paging-library/" class="btn btn-outline-primary" prompt="previous"><p>[Android] Architecture Components : Paging Library</p></a> <a href="/posts/rxjava-start/" class="btn btn-outline-primary" prompt="next"><p>[RxJava] Khái niệm</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/HadesPTIT">Hades</a>.</p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/android/">android</a> <a class="post-tag" href="/tags/flutter/">flutter</a> <a class="post-tag" href="/tags/dart/">dart</a> <a class="post-tag" href="/tags/rxjava/">rxjava</a> <a class="post-tag" href="/tags/kotlin/">kotlin</a> <a class="post-tag" href="/tags/new/">new</a> <a class="post-tag" href="/tags/performance/">performance</a> <a class="post-tag" href="/tags/android-studio/">android studio</a> <a class="post-tag" href="/tags/as/">as</a> <a class="post-tag" href="/tags/cicd/">cicd</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://HadesPTIT.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
