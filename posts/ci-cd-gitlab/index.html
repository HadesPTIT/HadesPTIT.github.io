<!doctype html><html lang="en-US" data-mode="dark"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="[CI/CD] Tích hợp CI/CD với Gitlab" /><meta property="og:locale" content="en_US" /><meta name="description" content="1.Introduction" /><meta property="og:description" content="1.Introduction" /><link rel="canonical" href="https://hadesptit.github.io/posts/ci-cd-gitlab/" /><meta property="og:url" content="https://hadesptit.github.io/posts/ci-cd-gitlab/" /><meta property="og:site_name" content="Hades" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2019-06-19T14:15:03+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[CI/CD] Tích hợp CI/CD với Gitlab" /><meta name="twitter:site" content="@hades_pt" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2019-06-19T14:15:03+00:00","datePublished":"2019-06-19T14:15:03+00:00","description":"1.Introduction","headline":"[CI/CD] Tích hợp CI/CD với Gitlab","mainEntityOfPage":{"@type":"WebPage","@id":"https://hadesptit.github.io/posts/ci-cd-gitlab/"},"url":"https://hadesptit.github.io/posts/ci-cd-gitlab/"}</script><title>[CI/CD] Tích hợp CI/CD với Gitlab | Hades</title><link rel="icon" type="image/png" href="/assets/img/favicons/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/svg+xml" href="/assets/img/favicons/favicon.svg"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.36.4/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.18/dayjs.min.js,npm/dayjs@1.11.18/locale/en.js,npm/dayjs@1.11.18/plugin/relativeTime.js,npm/dayjs@1.11.18/plugin/localizedFormat.js,npm/tocbot@4.36.4/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="https://avatars.githubusercontent.com/u/20601191?s=400" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">Hades</a><p class="site-subtitle fst-italic mb-0">Chase excellence success will follow you</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info"></i> <span>ABOUT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <a href="https://github.com/HadesPTIT" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/hades_pt" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['Hphamptit','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" class="flex-shrink-0" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>[CI/CD] Tích hợp CI/CD với Gitlab</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link" aria-label="Search"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>[CI/CD] Tích hợp CI/CD với Gitlab</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1560953703" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jun 19, 2019 </time> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/HadesPTIT">Hades</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1230 words" > <em>6 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">[CI/CD] Tích hợp CI/CD với Gitlab</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Contents</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">[CI/CD] Tích hợp CI/CD với Gitlab</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><h3 id="1introduction"><span class="me-2">1.Introduction</span><a href="#1introduction" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="https://images.viblo.asia/d3358d65-f8ad-4d94-b371-9bbcc6afe3f0.png" class="popup img-link shimmer"><img src="https://images.viblo.asia/d3358d65-f8ad-4d94-b371-9bbcc6afe3f0.png" alt="" loading="lazy"></a></p><p>Chắc hẳn các bạn đã từng nghe đến hệ thống CI/CD. Mục tiêu của nó là tự động hóa các khâu trong quy trình phát triển phần mềm hiện nay. Nếu chưa biết nó là gì, hãy tham khảo bài viết <a href="https://viblo.asia/p/ci-cd-va-devops-07LKXYXDZV4">này</a> của anh @nghiadd để hiểu cơ bản về CI/CD.</p><p>Hiện nay có rất nhiều hệ thống như <strong>Travis</strong>, <strong>Jenkin</strong>, <strong>Circle</strong>, <strong>Gitlab</strong> có thể giúp bạn làm được điều đó. Trong bài viết này, mình sẽ giới thiệu với các bạn tổng quan <code class="language-plaintext highlighter-rouge">Gitlab CI</code> và cách để xây dựng một hệ thống cơ bản.</p><h3 id="2-git-flow"><span class="me-2">2. Git Flow</span><a href="#2-git-flow" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="https://images.viblo.asia/703279f5-241c-472d-8adc-deb324758551.png" class="popup img-link shimmer"><img src="https://images.viblo.asia/703279f5-241c-472d-8adc-deb324758551.png" alt="" loading="lazy"></a></p><p>Developer hoàn thành một task nào đó và push commit lên Gitlab để mọi người review.</p><p>Khi đó <code class="language-plaintext highlighter-rouge">Gitlab CI</code> cũng bắt đầu thực hiện công việc mà nó được giao. Nó sử dụng file <code class="language-plaintext highlighter-rouge">.gitlab-ci.ym</code> nằm trong thư mục gốc của repo để cấu hình project sử dụng các <code class="language-plaintext highlighter-rouge">Runner</code>. Một <code class="language-plaintext highlighter-rouge">Pipeline</code> CI sinh ra và report sẽ được hiển thị trên giao diện.</p><p><a href="https://images.viblo.asia/a50f0294-80d3-4a49-8e89-5a95f113ef66.PNG" class="popup img-link shimmer"><img src="https://images.viblo.asia/a50f0294-80d3-4a49-8e89-5a95f113ef66.PNG" alt="" loading="lazy"></a></p><p>Vậy <code class="language-plaintext highlighter-rouge">Pipelines</code> là gì ?</p><h3 id="3-pipelines"><span class="me-2">3. Pipelines</span><a href="#3-pipelines" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Là thành phần cấp cao nhất của tích hợp, phân phối và triển khai liên tục.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>Pipelines are the top-level component of continuous integration, delivery, and deployment.
</pre></table></code></div></div><p><strong>Pipeline</strong> bao gồm :</p><ul><li><strong>Jobs</strong> : Các công việc được giao thực thi. ( Ví dụ : biên dịch mã hoặc chạy test )<li><strong>Stage</strong> : Xác định các thời điểm và cách thực hiện. ( Ví dụ : test chỉ chạy sau khi biên dịch thành công )</ul><p><strong>Pipeline</strong> hoạt động theo nguyên tắc sau :</p><ul><li>Tất cả các công việc trong cùng một <code class="language-plaintext highlighter-rouge">stage</code> được <code class="language-plaintext highlighter-rouge">Runner</code> thực hiện song song, nếu có đủ số lượng <code class="language-plaintext highlighter-rouge">Runner</code> đồng thời.<li>Nếu Success, pipeline chuyển sang <code class="language-plaintext highlighter-rouge">stage</code> tiếp theo.<li>Nếu Failed, pipeline sẽ dừng lại. Có một ngoại lệ là nếu job được đánh dấu làm thủ công, thì dù bị fail thì pipeline vẫn tiếp tục.</ul><p>Bên dưới là ví dụ về đồ thị Pipeline thông thường :</p><p><a href="https://images.viblo.asia/af6e91ef-0fd1-41e9-9efb-5127a7b239e9.png" class="popup img-link shimmer"><img src="https://images.viblo.asia/af6e91ef-0fd1-41e9-9efb-5127a7b239e9.png" alt="" loading="lazy"></a></p><p>Tóm lại, các bước để <strong>Gitlab CI</strong> hoạt động như sau :</p><ul><li>Thêm<code class="language-plaintext highlighter-rouge"> .gitlab-ci.yml</code> vào thư mục gốc của repo.<li>Cấu hình gitlab <code class="language-plaintext highlighter-rouge">Runner</code></ul><h3 id="4-config-gitlab-ciyml"><span class="me-2">4. Config gitlab-ci.yml</span><a href="#4-config-gitlab-ciyml" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="41-create-gilab-ciyml"><span class="me-2">4.1 Create .gilab-ci.yml</span><a href="#41-create-gilab-ciyml" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code> được viết theo định dạng YAML. Bạn có thể tìm hiểu thêm tại <a href="https://yaml.org/">đây</a>.</p><p>Như đã đề cập ở trên, <code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code> cho <code class="language-plaintext highlighter-rouge">Runner</code> biết những công việc cần phải làm. Mặc định, nó sẽ chạy một pipeline với 3 stage :</p><ul><li>build<li>test<li>deploy</ul><p>Tuy nhiên, bạn không cần phải sử dụng cả 3 stage, các stage không được giao việc sẽ được bỏ qua.</p><p>Dưới đây là ví dụ cấu hình cho một dự án Ruby on Rails :</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="na">image</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ruby:2.5"</span>

<span class="na">before_script</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">apt-get update -qq &amp;&amp; apt-get install -y -qq sqlite3 libsqlite3-dev nodejs</span>
  <span class="pi">-</span> <span class="s">ruby -v</span>
  <span class="pi">-</span> <span class="s">which ruby</span>
  <span class="pi">-</span> <span class="s">gem install bundler --no-document</span>
  <span class="pi">-</span> <span class="s">bundle install --jobs $(nproc)  "${FLAGS[@]}"</span>

<span class="na">rspec</span><span class="pi">:</span>
  <span class="na">script</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">bundle exec rspec</span>

<span class="na">rubocop</span><span class="pi">:</span>
  <span class="na">script</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">bundle exec rubocop</span>
</pre></table></code></div></div><p>Đây là cấu hình đơn giản nhất có thể hoạt động với hầu hết các ứng dụng Ruby</p><ol><li>Xác định 2 job <code class="language-plaintext highlighter-rouge">rspec</code> và <code class="language-plaintext highlighter-rouge">rubocop</code> với các lệnh thực thi khác nhau.<li>Trước mỗi job, các lệnh được xác định bởi <strong>before_script</strong> được thực thi.</ol><p>Nếu bạn muốn kiểm tra xem file<code class="language-plaintext highlighter-rouge"> .gitlab-ci.yml</code> có hợp lệ hay không, có một công cụ lint trong page <strong>/-/ci/lint</strong> trong namespace project. Bạn cũng có thể thấy nút <code class="language-plaintext highlighter-rouge">CI Lint</code> để đến trang này trong mục <strong>CI/CD</strong> -&gt; <strong>Pipelines</strong> và <strong>Pipelines</strong> -&gt; <strong>Jobs</strong> trong page Project.</p><h4 id="42-push-gitlab-ciyml-to-gitlab"><span class="me-2">4.2. Push .gitlab-ci.yml to GitLab</span><a href="#42-push-gitlab-ciyml-to-gitlab" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Sau khi tạo file <code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code>, thêm nó vào git repos và push nó lên gitlab.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>git add .gitlab-ci.yml
git commit -m "Add .gitlab-ci.yml"
git push origin master
</pre></table></code></div></div><p>Trở về <code class="language-plaintext highlighter-rouge">Pipeline</code> page, bạn sẽ thấy pipeline đang ở trạng thái <code class="language-plaintext highlighter-rouge">pending</code>. Bạn cũng có thể tới page <code class="language-plaintext highlighter-rouge">Commits</code>, để ý icon tạm dừng nhỏ bên cạnh commit SHA.</p><p><a href="https://images.viblo.asia/70eec0ec-a424-41bc-915a-130746df5e25.png" class="popup img-link shimmer"><img src="https://images.viblo.asia/70eec0ec-a424-41bc-915a-130746df5e25.png" alt="" loading="lazy"></a></p><p>Click vào nó sẽ chuyển hướng đến page <code class="language-plaintext highlighter-rouge">Jobs</code> của commit tương ứng.</p><p><a href="https://images.viblo.asia/a0bb93f8-f5ac-42df-9e79-3cc2e49495c2.png" class="popup img-link shimmer"><img src="https://images.viblo.asia/a0bb93f8-f5ac-42df-9e79-3cc2e49495c2.png" alt="" loading="lazy"></a></p><p>Thông báo <strong><code class="language-plaintext highlighter-rouge">stuck</code></strong> chỉ rằng chưa có <code class="language-plaintext highlighter-rouge">Gitlab runner</code> nào được cấu hình để thực thi Job này.</p><p>Bước tiếp theo mình sẽ cấu hình Runner để nó thực thi công việc này.</p><h3 id="5-gitlab-runner"><span class="me-2">5. Gitlab Runner</span><a href="#5-gitlab-runner" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Trong gitlab, các <code class="language-plaintext highlighter-rouge">Runner</code> thực thi các jobs được định nghĩa trong file <code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code>.</p><p>Một <strong>Runner</strong> có thể là một <strong>máy ảo</strong> (VM), một <strong>VPS</strong>, một <strong>bare-metal</strong>, một <strong>docker container</strong> hay thậm chí là một <strong>cluster container</strong>. Gitlab và Runners giao tiếp với nhau thông qua API, vì vậy yêu cầu duy nhất là máy chạy Runner có quyền truy cập Gitlab server.</p><p>Một <code class="language-plaintext highlighter-rouge">Runner</code> có thể xác định cụ thể cho một dự án nhất định hoặc phục vụ cho nhiều dự án trong Gitlab. Nếu nó phục vụ cho tất cả project thì được gọi là <code class="language-plaintext highlighter-rouge">Shared Runner</code>.</p><p>Để xác định xem <strong>Runner</strong> nào được chỉ định cho project của bạn. Vào <strong>Settings</strong> -&gt; <strong>CI/CD</strong>.</p><p>Để Runner hoạt động được, bạn cần thực hiện 2 bước :</p><ul><li><a href="https://docs.gitlab.com/runner/install/">Cài đặt Runner</a><li><a href="https://docs.gitlab.com/ee/ci/runners/README.html#registering-a-specific-runner">Cấu hình Runner</a></ul><p>Trong bài viết này, mình sẽ chỉ các bạn các bước để thiết lập trên môi trường Windows :</p><p>Đầu tiên, truy cập vào project Gitlab. Vào <strong>Settings</strong> -&gt; <strong>CI/CD</strong> -&gt; <strong>Runners</strong> (expand).</p><p><a href="https://images.viblo.asia/22c2585f-85d1-4594-a28f-c799c2631835.png" class="popup img-link shimmer"><img src="https://images.viblo.asia/22c2585f-85d1-4594-a28f-c799c2631835.png" alt="" loading="lazy"></a></p><ol><li>Tạo một folder bất kì trên hệ thống ( ví dụ : <code class="language-plaintext highlighter-rouge">C:\GitLab-Runner</code>)<li>Tùy thuộc vào phiên bản hệ điều hành mà bạn download bản <a href="https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-windows-386.exe">x86</a> hay <a href="https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-windows-amd64.exe">amd64</a> . Sau đó di chuyển vào thư mục vừa tạo và đổi tên thành <code class="language-plaintext highlighter-rouge">gitlab-runner.exe</code>.<li><p>Bật CMD với quyền admin, cd tới thư mục vừa tạo và chạy lệnh :</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre> gitlab-runner register
</pre></table></code></div></div><li>Nhập gitlab url của bạn :<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>  Please enter the gitlab-ci coordinator URL (e.g. https://gitlab.com )
  https://gitlab.com
</pre></table></code></div></div><li>Nhập Token nhận được từ giao diện trên.<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>Please enter the gitlab-ci token for this runner
xxx
</pre></table></code></div></div><li><p>Thêm mô tả cho Runner, phần này có thể thay đổi sau trong giao diện người dùng Gitlab :</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>  Please enter the gitlab-ci description for this runner
  [hostname] my-runner
</pre></table></code></div></div><li>Thêm các thẻ Tags được liên kết với Runners, phần này có thể thay đổi sau :<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>  Please enter the gitlab-ci tags for this runner (comma separated):
  my-tag,another-tag
</pre></table></code></div></div><li>Chọn <strong>Executor</strong> cho Runner<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>  Please enter the executor: ssh, docker+machine, docker-ssh+machine, kubernetes, docker, parallels, virtualbox, docker-ssh, shell:
  docker
</pre></table></code></div></div><li><p>Nếu chọn Docker, bạn sẽ được yêu cầu thêm image mặc định nếu image không được định nghĩa trong <code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code>.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>  Please enter the Docker image (eg. ruby:2.1):
  alpine:latest
</pre></table></code></div></div></ol><p>OK, đến đây là đã thiết lập thành công Gitlab CI rồi đó :+1:</p><h3 id="6-seeing-status-of-your-pipeline--jobs"><span class="me-2">6. Seeing status of your pipeline &amp; jobs</span><a href="#6-seeing-status-of-your-pipeline--jobs" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Sau khi cấu hình thành công, bạn có thể thấy trạng thái của commit cuối cùng đã chuyển từ <code class="language-plaintext highlighter-rouge">pending</code> thành <code class="language-plaintext highlighter-rouge">running</code> or <code class="language-plaintext highlighter-rouge">success</code> or <code class="language-plaintext highlighter-rouge">failed</code>…</p><p>Bạn có thể theo dõi tất cả <code class="language-plaintext highlighter-rouge">pipeline</code> trong project :</p><p><a href="https://images.viblo.asia/86a31214-0aac-447c-9927-7a13d46f02d4.png" class="popup img-link shimmer"><img src="https://images.viblo.asia/86a31214-0aac-447c-9927-7a13d46f02d4.png" alt="" loading="lazy"></a></p><p>Hoặc có thể xem các jobs bằng cách truy cập <strong>Pipelines</strong> -&gt; <strong>Jobs</strong>.</p><p><a href="https://images.viblo.asia/8b74282b-54e8-418f-8076-ba5f93391062.png" class="popup img-link shimmer"><img src="https://images.viblo.asia/8b74282b-54e8-418f-8076-ba5f93391062.png" alt="" loading="lazy"></a></p><p>Bằng cách click vào trạng thái job, bạn có thể xem log của nó. Điều này rất quan trọng để chuẩn đoán tại sao job lại thất bại hay hành động khác với mong đợi.</p><p><a href="https://images.viblo.asia/dab770ee-f62b-40b6-8c2a-4f44e9b9f0fd.png" class="popup img-link shimmer"><img src="https://images.viblo.asia/dab770ee-f62b-40b6-8c2a-4f44e9b9f0fd.png" alt="" loading="lazy"></a></p><h3 id="summary"><span class="me-2">Summary</span><a href="#summary" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Hi vọng bài biết giúp các bạn hiểu được các khái niệm cơ bản về CI/CD cũng như cách xây dựng hệ thống cơ bản với Gilab CI. Chúc các bạn coding vui vẻ :+1::+1:</p><p>Tham khảo : <a href="https://docs.gitlab.com/">https://docs.gitlab.com/</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/ci-cd/">CI/CD</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/cicd/" class="post-tag no-text-decoration" >cicd</a> <a href="/tags/gitlab/" class="post-tag no-text-decoration" >gitlab</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[CI/CD]%20T%C3%ADch%20h%E1%BB%A3p%20CI/CD%20v%E1%BB%9Bi%20Gitlab%20-%20Hades&url=https%3A%2F%2Fhadesptit.github.io%2Fposts%2Fci-cd-gitlab%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[CI/CD]%20T%C3%ADch%20h%E1%BB%A3p%20CI/CD%20v%E1%BB%9Bi%20Gitlab%20-%20Hades&u=https%3A%2F%2Fhadesptit.github.io%2Fposts%2Fci-cd-gitlab%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=[CI/CD]%20T%C3%ADch%20h%E1%BB%A3p%20CI/CD%20v%E1%BB%9Bi%20Gitlab%20-%20Hades&url=https%3A%2F%2Fhadesptit.github.io%2Fposts%2Fci-cd-gitlab%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fhadesptit.github.io%2Fposts%2Fci-cd-gitlab%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recent Update</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/flutter-338/">[Flutter] Flutter 3.38 & Dart 3.10 có gì mới ?</a><li class="text-truncate lh-lg"> <a href="/posts/flutter-33/">[Flutter] Flutter 3.3 có gì mới ?</a><li class="text-truncate lh-lg"> <a href="/posts/what-news-in-flutter3/">[Flutter] Flutter 3.0 có gì mới ?</a><li class="text-truncate lh-lg"> <a href="/posts/flutter-2.8/">[Flutter] Flutter 2.8 có gì mới ?</a><li class="text-truncate lh-lg"> <a href="/posts/shrinkwrap-vs-slivers/">[Flutter] ShrinkWrap vs Slivers | Decoding Flutter</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/android/">android</a> <a class="post-tag btn btn-outline-primary" href="/tags/flutter/">flutter</a> <a class="post-tag btn btn-outline-primary" href="/tags/dart/">dart</a> <a class="post-tag btn btn-outline-primary" href="/tags/rxjava/">rxjava</a> <a class="post-tag btn btn-outline-primary" href="/tags/kotlin/">kotlin</a> <a class="post-tag btn btn-outline-primary" href="/tags/new/">new</a> <a class="post-tag btn btn-outline-primary" href="/tags/performance/">performance</a> <a class="post-tag btn btn-outline-primary" href="/tags/android-studio/">android studio</a> <a class="post-tag btn btn-outline-primary" href="/tags/as/">as</a> <a class="post-tag btn btn-outline-primary" href="/tags/cicd/">cicd</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/android-paging-library/" class="btn btn-outline-primary" aria-label="Older" ><p>[Android] Architecture Components : Paging Library</p></a> <a href="/posts/rxjava-start/" class="btn btn-outline-primary" aria-label="Newer" ><p>[RxJava] Khái niệm</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://github.com/HadesPTIT">Hades</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p>Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.4.1" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/android/">android</a> <a class="post-tag btn btn-outline-primary" href="/tags/flutter/">flutter</a> <a class="post-tag btn btn-outline-primary" href="/tags/dart/">dart</a> <a class="post-tag btn btn-outline-primary" href="/tags/rxjava/">rxjava</a> <a class="post-tag btn btn-outline-primary" href="/tags/kotlin/">kotlin</a> <a class="post-tag btn btn-outline-primary" href="/tags/new/">new</a> <a class="post-tag btn btn-outline-primary" href="/tags/performance/">performance</a> <a class="post-tag btn btn-outline-primary" href="/tags/android-studio/">android studio</a> <a class="post-tag btn btn-outline-primary" href="/tags/as/">as</a> <a class="post-tag btn btn-outline-primary" href="/tags/cicd/">cicd</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{content}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
