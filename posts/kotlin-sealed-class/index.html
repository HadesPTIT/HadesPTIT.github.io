<!DOCTYPE html><html lang="en-US" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="[Android] Kotlin Sealed Class" /><meta property="og:locale" content="en_US" /><meta name="description" content="Introduction" /><meta property="og:description" content="Introduction" /><link rel="canonical" href="https://hadesptit.github.io/posts/kotlin-sealed-class/" /><meta property="og:url" content="https://hadesptit.github.io/posts/kotlin-sealed-class/" /><meta property="og:site_name" content="Hades" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2019-01-23T14:15:03+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[Android] Kotlin Sealed Class" /><meta name="twitter:site" content="@hades_pt" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2019-01-23T14:15:03+00:00","datePublished":"2019-01-23T14:15:03+00:00","description":"Introduction","headline":"[Android] Kotlin Sealed Class","mainEntityOfPage":{"@type":"WebPage","@id":"https://hadesptit.github.io/posts/kotlin-sealed-class/"},"url":"https://hadesptit.github.io/posts/kotlin-sealed-class/"}</script><title>[Android] Kotlin Sealed Class | Hades</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/20601191?s=400" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Hades</a></div><div class="site-subtitle font-italic">Chase excellence success will follow you</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/HadesPTIT" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/hades_pt" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['Hphamptit','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>[Android] Kotlin Sealed Class</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[Android] Kotlin Sealed Class</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Hades </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Jan 23, 2019, 2:15 PM +0000" prep="on" > Jan 23, 2019 <i class="unloaded">2019-01-23T14:15:03+00:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="913 words">5 min</span></div></div><div class="post-content"><h3 id="introduction">Introduction</h3><p><code class="language-plaintext highlighter-rouge">Sealed class</code> được dùng để đại diện cho các class phân cấp bị hạn chế. Trong đó một giá trị chỉ có thể có một kiểu từ một tập có giới hạn và không thể có bất kì loại nào khác. Về mặt nào đó, <code class="language-plaintext highlighter-rouge">sealed class</code> là một phần mở rộng của <code class="language-plaintext highlighter-rouge">enum class</code> chỉ khác ở chỗ mỗi <code class="language-plaintext highlighter-rouge">enum</code> constant chỉ có một instance trong khi mỗi subclass của <code class="language-plaintext highlighter-rouge">sealed class</code> có thể có nhiều instance như một class thường vì vậy có thể chứa state trong các class này.</p><p>Giờ hãy cùng tìm hiểu cách implement một <code class="language-plaintext highlighter-rouge">sealed class</code> như thế nào nhé ;D</p><h3 id="implementing-kotlin-sealed-classes">Implementing Kotlin sealed classes</h3><p>Để khai báo một sealed class, Bạn cần thêm modifier <strong>sealed</strong> trước tên của class.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">sealed</span> <span class="kd">class</span> <span class="nc">A</span> <span class="o">{</span>
    <span class="kd">class</span> <span class="nc">B</span> <span class="o">:</span> <span class="no">A</span><span class="o">()</span>
    <span class="kd">class</span> <span class="nc">C</span> <span class="o">:</span> <span class="no">A</span><span class="o">()</span>
<span class="o">}</span>
</pre></table></code></div></div><p>Một sealed class là <strong>abstract</strong> và không thể được khởi tạo. Ví dụ :</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">fun</span> <span class="nf">main</span><span class="o">(</span><span class="nl">args:</span> <span class="nc">Array</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;)</span> 
<span class="o">{</span>
    <span class="kt">var</span> <span class="n">a</span> <span class="o">=</span> <span class="no">A</span><span class="o">()</span> <span class="c1">//compiler error. Class A cannot be instantiated.</span>
<span class="o">}</span>
</pre></table></code></div></div><p>Mặc định, các constructors của <code class="language-plaintext highlighter-rouge">sealed class</code> có modifier là <code class="language-plaintext highlighter-rouge">private</code>.</p><p>Tất cả các subclass của sealed class phải được khai báo trong cùng một file.</p><p>Sealed class rất quan trọng trong việc đảm bảo <code class="language-plaintext highlighter-rouge">type safety</code> bằng cách hạn chế tập các kiểu chỉ định tại thời điểm biên dịch (compile-time).</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre>
<span class="n">sealed</span> <span class="kd">class</span> <span class="nc">A</span> <span class="o">{</span>

    <span class="kd">class</span> <span class="nc">B</span> <span class="o">:</span> <span class="no">A</span><span class="o">()</span>

    <span class="kd">class</span> <span class="nc">C</span> <span class="o">:</span> <span class="no">A</span><span class="o">()</span> 
    <span class="o">{</span>
        <span class="kd">class</span> <span class="nc">E</span> <span class="o">:</span> <span class="no">A</span><span class="o">()</span> <span class="c1">//this works.</span>
    <span class="o">}</span>

    <span class="n">init</span> <span class="o">{</span>
        <span class="n">println</span><span class="o">(</span><span class="s">"Sealed class A"</span><span class="o">)</span>
    <span class="o">}</span>

<span class="o">}</span>

<span class="kd">class</span> <span class="nc">D</span> <span class="o">:</span> <span class="no">A</span><span class="o">()</span> <span class="c1">//this works</span>
<span class="o">{</span>
    <span class="kd">class</span> <span class="nc">F</span><span class="o">:</span> <span class="no">A</span><span class="o">()</span> <span class="c1">//This won't work. Since sealed class is defined in another scope.</span>
<span class="o">}</span>
</pre></table></code></div></div><p><strong>Sealed class constructors</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="n">sealed</span> <span class="kd">class</span> <span class="nf">A</span><span class="o">(</span><span class="kt">var</span> <span class="nl">name:</span> <span class="nc">String</span><span class="o">){</span>
    
    <span class="kd">class</span> <span class="nc">B</span> <span class="o">:</span> <span class="no">A</span><span class="o">(</span><span class="s">"B"</span><span class="o">)</span>
    
    <span class="kd">class</span> <span class="nc">C</span> <span class="o">:</span> <span class="no">A</span><span class="o">(</span><span class="s">"C"</span><span class="o">)</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">D</span> <span class="o">:</span> <span class="no">A</span><span class="o">(</span><span class="s">"D"</span><span class="o">)</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="n">fun</span> <span class="nf">main</span><span class="o">(</span><span class="nl">args:</span> <span class="nc">Array</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;)</span> <span class="o">{</span>
    
    <span class="kt">var</span> <span class="n">b</span> <span class="o">=</span> <span class="no">A</span><span class="o">.</span><span class="na">B</span><span class="o">()</span>
    <span class="kt">var</span> <span class="n">d</span> <span class="o">=</span> <span class="no">D</span><span class="o">()</span>
<span class="o">}</span>
</pre></table></code></div></div><p><strong>Data class &amp; object in sealed class</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre>
<span class="n">sealed</span> <span class="kd">class</span> <span class="nc">A</span> <span class="o">{</span>

    <span class="kd">class</span> <span class="nc">B</span> <span class="o">:</span> <span class="no">A</span><span class="o">()</span>
    
    <span class="kd">class</span> <span class="nc">C</span> <span class="o">:</span> <span class="no">A</span><span class="o">()</span>
    
    <span class="n">object</span> <span class="no">D</span> <span class="o">:</span> <span class="no">A</span><span class="o">()</span>
    <span class="o">{</span>
         <span class="n">fun</span> <span class="nf">name</span><span class="o">()</span>
         <span class="o">{</span>
             <span class="n">println</span><span class="o">(</span><span class="s">"Object D"</span><span class="o">)</span>
         <span class="o">}</span>
    <span class="o">}</span>
    
    <span class="n">data</span> <span class="kd">class</span> <span class="nf">E</span><span class="o">(</span><span class="kt">var</span> <span class="nl">name:</span> <span class="nc">String</span><span class="o">)</span> <span class="o">:</span> <span class="no">A</span><span class="o">()</span>
<span class="o">}</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="n">fun</span> <span class="nf">main</span><span class="o">(</span><span class="nl">args:</span> <span class="nc">Array</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;)</span> <span class="o">{</span>

    <span class="n">val</span> <span class="n">e</span> <span class="o">=</span> <span class="no">A</span><span class="o">.</span><span class="na">E</span><span class="o">(</span><span class="s">"Anupam"</span><span class="o">)</span>
    <span class="n">println</span><span class="o">(</span><span class="n">e</span><span class="o">)</span> <span class="c1">//prints E(name=Anupam)</span>

    <span class="kt">var</span> <span class="n">d</span> <span class="o">=</span> <span class="no">A</span><span class="o">.</span><span class="na">D</span>
    <span class="n">d</span><span class="o">.</span><span class="na">name</span><span class="o">()</span> <span class="c1">//prints Object D</span>
<span class="o">}</span>
</pre></table></code></div></div><h3 id="difference-between-enum-and-sealed-classes">Difference between enum and sealed classes</h3><p><code class="language-plaintext highlighter-rouge">Sealed class</code> cho phép ta tạo các thể hiện với nhiều kiểu khác nhau trong khi <code class="language-plaintext highlighter-rouge">enum</code> sử dụng cùng loại cho tất cả enum constants.</p><p>Với enum bạn không thể làm được như dưới đây :</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="kd">enum</span> <span class="kd">class</span> <span class="nf">Months</span><span class="o">(</span><span class="nl">string:</span> <span class="nc">String</span><span class="o">){</span>
    <span class="nc">January</span><span class="o">(</span><span class="s">"Jan"</span><span class="o">),</span> <span class="nc">February</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span>      <span class="c1">// error</span>
<span class="o">}</span>
</pre></table></code></div></div><p>Bởi enum chỉ cho phép single type cho các hằng mà thôi. Đây là cách mà sealed class giải quyết vấn đề này :</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="n">sealed</span> <span class="kd">class</span> <span class="nc">Months</span> <span class="o">{</span>
    <span class="kd">class</span> <span class="nf">January</span><span class="o">(</span><span class="kt">var</span> <span class="nl">shortHand:</span> <span class="nc">String</span><span class="o">)</span> <span class="o">:</span> <span class="nc">Months</span><span class="o">()</span>
    <span class="kd">class</span> <span class="nf">February</span><span class="o">(</span><span class="kt">var</span> <span class="nl">number:</span> <span class="nc">Int</span><span class="o">)</span> <span class="o">:</span> <span class="nc">Months</span><span class="o">()</span>
    <span class="kd">class</span> <span class="nf">March</span><span class="o">(</span><span class="kt">var</span> <span class="nl">shortHand:</span> <span class="nc">String</span><span class="o">,</span> <span class="kt">var</span> <span class="nl">number:</span> <span class="nc">Int</span><span class="o">)</span> <span class="o">:</span> <span class="nc">Months</span><span class="o">()</span>
<span class="o">}</span>
</pre></table></code></div></div><p>Giả sử bạn có một newfeed app, bạn có thể tạo các kiểu lớp khác nhau cho bài Post như Status, Image hay Video chẳng hạn.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">sealed</span> <span class="kd">class</span> <span class="nc">Post</span>
<span class="o">{</span>
    <span class="kd">class</span> <span class="nf">Status</span><span class="o">(</span><span class="kt">var</span> <span class="nl">text:</span> <span class="nc">String</span><span class="o">)</span> <span class="o">:</span> <span class="nc">Post</span><span class="o">()</span>
    <span class="kd">class</span> <span class="nf">Image</span><span class="o">(</span><span class="kt">var</span> <span class="nl">url:</span> <span class="nc">String</span><span class="o">,</span> <span class="kt">var</span> <span class="nl">caption:</span> <span class="nc">String</span><span class="o">)</span> <span class="o">:</span> <span class="nc">Post</span><span class="o">()</span>
    <span class="kd">class</span> <span class="nf">Video</span><span class="o">(</span><span class="kt">var</span> <span class="nl">url:</span> <span class="nc">String</span><span class="o">,</span> <span class="kt">var</span> <span class="nl">timeDuration:</span> <span class="nc">Int</span><span class="o">,</span> <span class="kt">var</span> <span class="nl">encoding:</span> <span class="nc">String</span><span class="o">):</span> <span class="nc">Post</span><span class="o">()</span>
<span class="o">}</span>
</pre></table></code></div></div><h3 id="sealed-classes-and-when">Sealed classes and when</h3><p><code class="language-plaintext highlighter-rouge">Sealed class</code> thường được sử dụng với các câu lệnh <code class="language-plaintext highlighter-rouge">when</code> do mỗi lớp con và kiểu của nó biểu diễn một case. Hơn nữa, bởi sealed class giới hạn các kiểu nên khối <code class="language-plaintext highlighter-rouge">else</code> coi như bỏ.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="n">sealed</span> <span class="kd">class</span> <span class="nc">Shape</span> <span class="o">{</span>
    <span class="kd">class</span> <span class="nf">Circle</span><span class="o">(</span><span class="kt">var</span> <span class="nl">radius:</span> <span class="nc">Float</span><span class="o">):</span> <span class="nc">Shape</span><span class="o">()</span>
    <span class="kd">class</span> <span class="nf">Square</span><span class="o">(</span><span class="kt">var</span> <span class="nl">length:</span> <span class="nc">Int</span><span class="o">):</span> <span class="nc">Shape</span><span class="o">()</span>
    <span class="kd">class</span> <span class="nf">Rectangle</span><span class="o">(</span><span class="kt">var</span> <span class="nl">length:</span> <span class="nc">Int</span><span class="o">,</span> <span class="kt">var</span> <span class="nl">breadth:</span> <span class="nc">Int</span><span class="o">):</span> <span class="nc">Shape</span><span class="o">()</span>
<span class="o">}</span>

<span class="n">fun</span> <span class="nf">eval</span><span class="o">(</span><span class="nl">e:</span> <span class="nc">Shape</span><span class="o">)</span> <span class="o">=</span>
        <span class="n">when</span> <span class="o">(</span><span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">is</span> <span class="nc">Shape</span><span class="o">.</span><span class="na">Circle</span> <span class="o">-&gt;</span> <span class="n">println</span><span class="o">(</span><span class="s">"Circle area is ${3.14*e.radius*e.radius}"</span><span class="o">)</span>
            <span class="n">is</span> <span class="nc">Shape</span><span class="o">.</span><span class="na">Square</span> <span class="o">-&gt;</span> <span class="n">println</span><span class="o">(</span><span class="s">"Square area is ${e.length*e.length}"</span><span class="o">)</span>
            <span class="n">is</span> <span class="nc">Shape</span><span class="o">.</span><span class="na">Rectangle</span> <span class="o">-&gt;</span> <span class="n">println</span><span class="o">(</span><span class="s">"Rectagle area is ${e.length*e.breadth}"</span><span class="o">)</span>
        <span class="o">}</span>
</pre></table></code></div></div><p>Cùng thử tính toán với hàm <code class="language-plaintext highlighter-rouge">eval</code> xem :</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="n">fun</span> <span class="nf">main</span><span class="o">(</span><span class="nl">args:</span> <span class="nc">Array</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;)</span> <span class="o">{</span>

    <span class="kt">var</span> <span class="n">circle</span> <span class="o">=</span> <span class="nc">Shape</span><span class="o">.</span><span class="na">Circle</span><span class="o">(</span><span class="mf">4.5f</span><span class="o">)</span>
    <span class="kt">var</span> <span class="n">square</span> <span class="o">=</span> <span class="nc">Shape</span><span class="o">.</span><span class="na">Square</span><span class="o">(</span><span class="mi">4</span><span class="o">)</span>
    <span class="kt">var</span> <span class="n">rectangle</span> <span class="o">=</span> <span class="nc">Shape</span><span class="o">.</span><span class="na">Rectangle</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">)</span>

    <span class="n">eval</span><span class="o">(</span><span class="n">circle</span><span class="o">)</span>       <span class="c1">//Circle area is 63.585</span>
    <span class="n">eval</span><span class="o">(</span><span class="n">square</span><span class="o">)</span>       <span class="c1">//Square area is 16</span>
    <span class="n">eval</span><span class="o">(</span><span class="n">rectangle</span><span class="o">)</span>    <span class="c1">//Rectangle area is 20</span>
    <span class="c1">//eval(x) //compile-time error.</span>

<span class="o">}</span>
</pre></table></code></div></div><p><strong>Note</strong> : Modifier <code class="language-plaintext highlighter-rouge">is</code> kiểm tra nếu class đó thuộc một trong các kiểu đã cho và chỉ yêu cầu cho các class. Với các objects thì sao ?</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre>
<span class="n">sealed</span> <span class="kd">class</span> <span class="nc">Shape</span><span class="o">{</span>
    <span class="kd">class</span> <span class="nf">Circle</span><span class="o">(</span><span class="kt">var</span> <span class="nl">radius:</span> <span class="nc">Float</span><span class="o">):</span> <span class="nc">Shape</span><span class="o">()</span>
    <span class="kd">class</span> <span class="nf">Square</span><span class="o">(</span><span class="kt">var</span> <span class="nl">length:</span> <span class="nc">Int</span><span class="o">):</span> <span class="nc">Shape</span><span class="o">()</span>
    <span class="n">object</span> <span class="nl">Rectangle:</span> <span class="nc">Shape</span><span class="o">()</span>
    <span class="o">{</span>
        <span class="kt">var</span> <span class="nl">length:</span> <span class="nc">Int</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="kt">var</span> <span class="n">breadth</span> <span class="o">:</span> <span class="nc">Int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="n">fun</span> <span class="nf">eval</span><span class="o">(</span><span class="nl">e:</span> <span class="nc">Shape</span><span class="o">)</span> <span class="o">=</span>
        <span class="n">when</span> <span class="o">(</span><span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">is</span> <span class="nc">Shape</span><span class="o">.</span><span class="na">Circle</span> <span class="o">-&gt;</span> <span class="n">println</span><span class="o">(</span><span class="s">"Circle area is ${3.14*e.radius*e.radius}"</span><span class="o">)</span>
            <span class="n">is</span> <span class="nc">Shape</span><span class="o">.</span><span class="na">Square</span> <span class="o">-&gt;</span> <span class="n">println</span><span class="o">(</span><span class="s">"Square area is ${e.length*e.length}"</span><span class="o">)</span>
            <span class="nc">Shape</span><span class="o">.</span><span class="na">Rectangle</span> <span class="o">-&gt;</span> <span class="n">println</span><span class="o">(</span><span class="s">"Rectangle area is ${Shape.Rectangle.length*Shape.Rectangle.breadth}"</span><span class="o">)</span>
        <span class="o">}</span>
</pre></table></code></div></div><h3 id="conclusion">Conclusion</h3><p>Hi vọng bài viết có thể giúp các bạn hiểu rõ hơn về sealed class và khi nào thì sử dụng nó một cách hợp lý. Cảm ơn các bạn đã đọc bài viết. Happy coding ^^</p><h3 id="references">References</h3><ol><li><a href="https://kotlinlang.org/docs/reference/sealed-classes.html">Kotlin Docs</a><li><a href="https://www.journaldev.com/18719/kotlin-sealed-class#difference-between-enum-and-sealed-classes">Kotlin Sealed Class</a></ol></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/android/'>Android</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/android/" class="post-tag no-text-decoration" >android</a> <a href="/tags/kotlin/" class="post-tag no-text-decoration" >kotlin</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[Android] Kotlin Sealed Class - Hades&url=https://hadesptit.github.io/posts/kotlin-sealed-class/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[Android] Kotlin Sealed Class - Hades&u=https://hadesptit.github.io/posts/kotlin-sealed-class/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=[Android] Kotlin Sealed Class - Hades&url=https://hadesptit.github.io/posts/kotlin-sealed-class/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://hadesptit.github.io/posts/kotlin-sealed-class/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/android/">android</a> <a class="post-tag" href="/tags/flutter/">flutter</a> <a class="post-tag" href="/tags/dart/">dart</a> <a class="post-tag" href="/tags/rxjava/">rxjava</a> <a class="post-tag" href="/tags/kotlin/">kotlin</a> <a class="post-tag" href="/tags/new/">new</a> <a class="post-tag" href="/tags/performance/">performance</a> <a class="post-tag" href="/tags/android-studio/">android studio</a> <a class="post-tag" href="/tags/as/">as</a> <a class="post-tag" href="/tags/cicd/">cicd</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/android-clean-architecture/"><div class="card-body"> <span class="timeago small" > Feb 1, 2020 <i class="unloaded">2020-02-01T14:15:03+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Android] Clean architecture</h3><div class="text-muted small"><p> Giới thiệu Việc xây dựng 1 kiến trúc nền tốt thật sự quan trọng cho ứng dụng để scale lên một cách đơn giản. Trước đây thì mình cực kì không thích thằng clean này đơn giản vì nó phải code nhiều qu...</p></div></div></a></div><div class="card"> <a href="/posts/android-structure/"><div class="card-body"> <span class="timeago small" > Aug 12, 2016 <i class="unloaded">2016-08-12T14:15:03+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Android] Cách tổ chức thư mục cho 1 project Android</h3><div class="text-muted small"><p> Hi mọi người! Dạo gần đây mình có xây dựng 1 dự án android nhỏ. Dưới đây là một cách tổ chức thư mục mà mình cho là khá hợp lý. Hi vọng mọi người có thể tham khảo và góp ý. ├─ com.abc │ ├─ activ...</p></div></div></a></div><div class="card"> <a href="/posts/android-recycler-view/"><div class="card-body"> <span class="timeago small" > Jul 12, 2018 <i class="unloaded">2018-07-12T14:15:03+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Android] RecyclerView</h3><div class="text-muted small"><p> Giới thiệu RecycleView là một viewGroup mới được giới thiệu trong Android L (API 21). Là một viewGroup có chức năng tương tự như ListView nhưng linh hoạt hơn rất nhiều. ListView chỉ hỗ trợ bạn sc...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/kotlin-starndard-function/" class="btn btn-outline-primary" prompt="previous"><p>[Android] Kotlin standard functions: run-with-let-also-apply</p></a> <a href="/posts/databinding-basic/" class="btn btn-outline-primary" prompt="next"><p>[Android] DataBinding Basic</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/HadesPTIT">Hades</a>.</p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/android/">android</a> <a class="post-tag" href="/tags/flutter/">flutter</a> <a class="post-tag" href="/tags/dart/">dart</a> <a class="post-tag" href="/tags/rxjava/">rxjava</a> <a class="post-tag" href="/tags/kotlin/">kotlin</a> <a class="post-tag" href="/tags/new/">new</a> <a class="post-tag" href="/tags/performance/">performance</a> <a class="post-tag" href="/tags/android-studio/">android studio</a> <a class="post-tag" href="/tags/as/">as</a> <a class="post-tag" href="/tags/cicd/">cicd</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://HadesPTIT.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
