<!doctype html><html lang="en-US" data-mode="dark"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="[Android] Clean architecture" /><meta property="og:locale" content="en_US" /><meta name="description" content="Giới thiệu" /><meta property="og:description" content="Giới thiệu" /><link rel="canonical" href="https://hadesptit.github.io/posts/android-clean-architecture/" /><meta property="og:url" content="https://hadesptit.github.io/posts/android-clean-architecture/" /><meta property="og:site_name" content="Hades" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-02-01T14:15:03+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[Android] Clean architecture" /><meta name="twitter:site" content="@hades_pt" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2020-02-01T14:15:03+00:00","datePublished":"2020-02-01T14:15:03+00:00","description":"Giới thiệu","headline":"[Android] Clean architecture","mainEntityOfPage":{"@type":"WebPage","@id":"https://hadesptit.github.io/posts/android-clean-architecture/"},"url":"https://hadesptit.github.io/posts/android-clean-architecture/"}</script><title>[Android] Clean architecture | Hades</title><link rel="icon" type="image/png" href="/assets/img/favicons/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/svg+xml" href="/assets/img/favicons/favicon.svg"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.36.4/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.18/dayjs.min.js,npm/dayjs@1.11.18/locale/en.js,npm/dayjs@1.11.18/plugin/relativeTime.js,npm/dayjs@1.11.18/plugin/localizedFormat.js,npm/tocbot@4.36.4/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="https://avatars.githubusercontent.com/u/20601191?s=400" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">Hades</a><p class="site-subtitle fst-italic mb-0">Chase excellence success will follow you</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info"></i> <span>ABOUT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <a href="https://github.com/HadesPTIT" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/hades_pt" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['Hphamptit','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" class="flex-shrink-0" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>[Android] Clean architecture</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link" aria-label="Search"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>[Android] Clean architecture</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1580566503" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Feb 1, 2020 </time> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/HadesPTIT">Hades</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="977 words" > <em>5 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">[Android] Clean architecture</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Contents</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">[Android] Clean architecture</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><h1 id="giới-thiệu">Giới thiệu</h1><p>Việc xây dựng 1 kiến trúc nền tốt thật sự quan trọng cho ứng dụng để scale lên một cách đơn giản. <br />Trước đây thì mình cực kì không thích thằng clean này đơn giản vì nó phải code nhiều quá. Nhưng khi làm việc với các dự án cỡ vừa và lơn thì bạn sẽ thấy nó thật sự hữu ịch Trong bài viết này, mình sẽ tìm hiểu và “thích” nó nhé.</p><h2 id="clean-architecture-"><span class="me-2">Clean architecture ?</span><a href="#clean-architecture-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Clean architecture hay còn gọi là kiến trúc sạch được đề xuất vào năm 2012 bởi Robert C. Martin. Clean Architecture dựa trên các khái niệm, quy tắc, và mô hình nổi tiếng, giải thích làm thế nào để kết hợp chúng với nhau, để đề xuất cách xây dựng các ứng dụng chuẩn. Hãy đọc bài viết <a href="http://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html">này</a> để hiểu hơn về, nếu không bạn có thể tẩu hỏa nhập ma đấy.</p><h2 id="why-"><span class="me-2">Why ?</span><a href="#why-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Tại sao lại tiếp cận theo hướng kiến trúc sạch ?</p><ol><li>Tách biệt hoàn toàn các tầng (layer) với nhau với nhiệm vụ riêng biệt giúp cho việc chỉnh sửa dễ dàng hơn.<li>Tăng tính trừu tượng<li>Tránh ràng buộc<li>Dễ dàng kiểm thử</ol><h2 id="layers-"><span class="me-2">Layers ?</span><a href="#layers-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><a href="https://s3-ap-southeast-1.amazonaws.com/kipalog.com/nir3hvc7so_1_a5UQUjgYu5SZAbmkNELI_A.png" class="popup img-link shimmer"><img src="https://s3-ap-southeast-1.amazonaws.com/kipalog.com/nir3hvc7so_1_a5UQUjgYu5SZAbmkNELI_A.png" alt="alt text" loading="lazy"></a></p><ul><li><strong>Domain Layer</strong> : chịu trách nhiệm thực thi các logic độc lập với các layer khác. Layer này chỉ bao gồm các mã kotlin thuần túy, không bao gồm sự phụ nào của Android Framework ở đây.<li><strong>Data Layer</strong> : chịu trách nhiệm phân chia data cần thiết cho app bằng cách implement các interface được phát ra từ tầng domain.<li><strong>Presenter Layer</strong> : chứa cả Domain và Data layer, chịu trách nhiệm thực thi các logic giao diện.</ul><h2 id="what-is-domain-layer-"><span class="me-2">What is Domain layer ?</span><a href="#what-is-domain-layer-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>Domain là tầng chung nhất trong 3 tầng. Nó sẽ kết nối tầng presenter với tầng data. Đây là tầng nơi các business logic của ứng dụng được thực thi. <a href="https://s3-ap-southeast-1.amazonaws.com/kipalog.com/rdtol6i413_2_m06XFPa5OTvOF6zGPC7Q0w.png" class="popup img-link shimmer"><img src="https://s3-ap-southeast-1.amazonaws.com/kipalog.com/rdtol6i413_2_m06XFPa5OTvOF6zGPC7Q0w.png" alt="alt text" loading="lazy"></a></ul><h3 id="usecases"><span class="me-2">UseCases</span><a href="#usecases" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Đóng gói và thực hiện các case của hệ thống theo đúng cái tên của nó. Mỗi usecase thường sẽ mô tả một chức năng riêng biệt.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nf">GetNewsUseCase</span><span class="o">(</span><span class="kd">private</span> <span class="n">val</span> <span class="nl">transformer:</span> <span class="nc">FlowableRxTransformer</span><span class="o">&lt;</span><span class="nc">NewsSourcesEntity</span><span class="o">&gt;,</span>
                     <span class="kd">private</span> <span class="n">val</span> <span class="nl">repositories:</span> <span class="nc">NewsRepository</span><span class="o">):</span> <span class="nc">BaseFlowableUseCase</span><span class="o">&lt;</span><span class="nc">NewsSourcesEntity</span><span class="o">&gt;(</span><span class="n">transformer</span><span class="o">){</span>

    <span class="n">override</span> <span class="n">fun</span> <span class="nf">createFlowable</span><span class="o">(</span><span class="nl">data:</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Any</span><span class="o">&gt;?):</span> <span class="nc">Flowable</span><span class="o">&lt;</span><span class="nc">NewsSourcesEntity</span><span class="o">&gt;</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">repositories</span><span class="o">.</span><span class="na">getNews</span><span class="o">()</span>
    <span class="o">}</span>

    <span class="n">fun</span> <span class="nf">getNews</span><span class="o">():</span> <span class="nc">Flowable</span><span class="o">&lt;</span><span class="nc">NewsSourcesEntity</span><span class="o">&gt;{</span>
        <span class="n">val</span> <span class="n">data</span> <span class="o">=</span> <span class="nc">HashMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;()</span>
        <span class="k">return</span> <span class="nf">single</span><span class="o">(</span><span class="n">data</span><span class="o">)</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h3 id="repositories"><span class="me-2">Repositories</span><a href="#repositories" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Repo là nơi lưu trữ, chỉ định các chức năng được yêu cầu tương ứng với các usecase chỉ định.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="kd">interface</span> <span class="nc">NewsRepository</span> <span class="o">{</span>

    <span class="n">fun</span> <span class="nf">getNews</span><span class="o">():</span> <span class="nc">Flowable</span><span class="o">&lt;</span><span class="nc">NewsSourcesEntity</span><span class="o">&gt;</span>
    <span class="n">fun</span> <span class="nf">getLocalNews</span><span class="o">():</span> <span class="nc">Flowable</span><span class="o">&lt;</span><span class="nc">NewsSourcesEntity</span><span class="o">&gt;</span>
    <span class="n">fun</span> <span class="nf">getRemoteNews</span><span class="o">():</span> <span class="nc">Flowable</span><span class="o">&lt;</span><span class="nc">NewsSourcesEntity</span><span class="o">&gt;</span>
<span class="o">}</span>
</pre></table></code></div></div><h2 id="what-is-data-layer-"><span class="me-2">What is Data Layer ?</span><a href="#what-is-data-layer-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Tầng data có trách nhiệm cung cấp dữ liệu được yêu cầu bởi ứng dụng. Tầng data phải được thiết kế sao cho dữ liệu có thể được sử dụng lại ở bất kì ứng dụng nào mà không cần sửa đổi logic của tầng Presentation.</p><p><a href="https://s3-ap-southeast-1.amazonaws.com/kipalog.com/xab5yuqb1a_3_KbdhwDpsxspHEz7QInpbhA.png" class="popup img-link shimmer"><img src="https://s3-ap-southeast-1.amazonaws.com/kipalog.com/xab5yuqb1a_3_KbdhwDpsxspHEz7QInpbhA.png" alt="alt text" loading="lazy"></a></p><ul><li><strong>api</strong> cung cấp các network interface.<li><strong>db</strong> cung cấp các local database interface.<li><strong>repository</strong> nhiệm vụ implement dữ liệu từ local, remote.</ul><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nf">NewsRepositoryImpl</span><span class="o">(</span><span class="kd">private</span> <span class="n">val</span> <span class="nl">remote:</span> <span class="nc">NewsRemoteImpl</span><span class="o">,</span>
                         <span class="kd">private</span> <span class="n">val</span> <span class="nl">cache:</span> <span class="nc">NewsCacheImpl</span><span class="o">)</span> <span class="o">:</span> <span class="nc">NewsRepository</span> <span class="o">{</span>

    <span class="n">override</span> <span class="n">fun</span> <span class="nf">getLocalNews</span><span class="o">():</span> <span class="nc">Flowable</span><span class="o">&lt;</span><span class="nc">NewsSourcesEntity</span><span class="o">&gt;</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">cache</span><span class="o">.</span><span class="na">getNews</span><span class="o">()</span>
    <span class="o">}</span>

    <span class="n">override</span> <span class="n">fun</span> <span class="nf">getRemoteNews</span><span class="o">():</span> <span class="nc">Flowable</span><span class="o">&lt;</span><span class="nc">NewsSourcesEntity</span><span class="o">&gt;</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">remote</span><span class="o">.</span><span class="na">getNews</span><span class="o">()</span>
    <span class="o">}</span>

    <span class="n">override</span> <span class="n">fun</span> <span class="nf">getNews</span><span class="o">():</span> <span class="nc">Flowable</span><span class="o">&lt;</span><span class="nc">NewsSourcesEntity</span><span class="o">&gt;</span> <span class="o">{</span>
        <span class="n">val</span> <span class="n">updateNewsFlowable</span> <span class="o">=</span> <span class="n">remote</span><span class="o">.</span><span class="na">getNews</span><span class="o">()</span>
        <span class="k">return</span> <span class="n">cache</span><span class="o">.</span><span class="na">getNews</span><span class="o">()</span>
                <span class="o">.</span><span class="na">mergeWith</span><span class="o">(</span><span class="n">updateNewsFlowable</span><span class="o">.</span><span class="na">doOnNext</span><span class="o">{</span>
                    <span class="n">remoteNews</span> <span class="o">-&gt;</span> <span class="n">cache</span><span class="o">.</span><span class="na">saveArticles</span><span class="o">(</span><span class="n">remoteNews</span><span class="o">)</span>
                <span class="o">})</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>Repositories hoạt động như 1 điểm truy cập duy nhất tới data layer.</p><h2 id="what-is-the-presentation-layer"><span class="me-2">What is the Presentation layer?</span><a href="#what-is-the-presentation-layer" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><a href="https://s3-ap-southeast-1.amazonaws.com/kipalog.com/14jkrlp3dp_1_4UH3LeLcGg8tjp1BmPm1jw.png" class="popup img-link shimmer"><img src="https://s3-ap-southeast-1.amazonaws.com/kipalog.com/14jkrlp3dp_1_4UH3LeLcGg8tjp1BmPm1jw.png" alt="alt text" loading="lazy"></a></p><p>Presentation layer cung cấp giao diện người dùng của ứng dụng.<br /> Đây là layer <code class="language-plaintext highlighter-rouge">câm</code> chỉ thực hiện lệnh mà không bao gồm logic trong đó, kết nối mọi thứ với nhau.<br /> Presentation có thể triển khai theo các pattern khác nhau như MVC, MVP, MVVM, MVI…</p><p>Folder <code class="language-plaintext highlighter-rouge">di</code> cung cấp tất cả các phụ thuộc từ khi bắt đàu khởi động ứng dụng cho đến khi kết thúc. Trong android, DI có thể implement bằng dagger, kodein, koin hay tự xây dựng theo service locator pattern.</p><h3 id="tại-sao-nên-dùng-viewmodels-"><span class="me-2">Tại sao nên dùng ViewModels ?</span><a href="#tại-sao-nên-dùng-viewmodels-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Trong tài liệu mô tả android có đề cập đến <a href="https://developer.android.com/topic/libraries/architecture/viewmodel">ViewModel</a> như sau:</p><blockquote><p>Store and manage UI-related data in a lifecycle conscious way. It allows data to survive configuration changes such as screen rotations.</p></blockquote><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nf">NewsViewModel</span><span class="o">(</span><span class="kd">private</span> <span class="n">val</span> <span class="nl">getNewsUseCase:</span> <span class="nc">GetNewsUseCase</span><span class="o">,</span>
                    <span class="kd">private</span> <span class="n">val</span> <span class="nl">mapper:</span> <span class="nc">Mapper</span><span class="o">&lt;</span><span class="nc">NewsSourcesEntity</span><span class="o">,</span> <span class="nc">NewsSources</span><span class="o">&gt;)</span> <span class="o">:</span> <span class="nc">BaseViewModel</span><span class="o">()</span> <span class="o">{</span>

    <span class="n">companion</span> <span class="n">object</span> <span class="o">{</span>
        <span class="kd">private</span> <span class="n">val</span> <span class="no">TAG</span> <span class="o">=</span> <span class="s">"viewmodel"</span>
    <span class="o">}</span>

    <span class="kt">var</span> <span class="n">mNews</span> <span class="o">=</span> <span class="nc">MutableLiveData</span><span class="o">&lt;</span><span class="nc">Data</span><span class="o">&lt;</span><span class="nc">NewsSources</span><span class="o">&gt;&gt;()</span>

    <span class="n">fun</span> <span class="nf">fetchNews</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">val</span> <span class="n">disposable</span> <span class="o">=</span> <span class="n">getNewsUseCase</span><span class="o">.</span><span class="na">getNews</span><span class="o">()</span>
                <span class="o">.</span><span class="na">flatMap</span> <span class="o">{</span> <span class="n">mapper</span><span class="o">.</span><span class="na">Flowable</span><span class="o">(</span><span class="n">it</span><span class="o">)</span> <span class="o">}</span>
                <span class="o">.</span><span class="na">subscribe</span><span class="o">({</span> <span class="n">response</span> <span class="o">-&gt;</span>
                    <span class="nc">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="no">TAG</span><span class="o">,</span> <span class="s">"On Next Called"</span><span class="o">)</span>
                    <span class="n">mNews</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="nc">Data</span><span class="o">(</span><span class="n">responseType</span> <span class="o">=</span> <span class="nc">Status</span><span class="o">.</span><span class="na">SUCCESSFUL</span><span class="o">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="o">)</span>
                <span class="o">},</span> <span class="o">{</span> <span class="n">error</span> <span class="o">-&gt;</span>
                    <span class="nc">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="no">TAG</span><span class="o">,</span> <span class="s">"On Error Called"</span><span class="o">)</span>
                    <span class="n">mNews</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="nc">Data</span><span class="o">(</span><span class="n">responseType</span> <span class="o">=</span> <span class="nc">Status</span><span class="o">.</span><span class="na">ERROR</span><span class="o">,</span> <span class="n">error</span> <span class="o">=</span> <span class="nc">Error</span><span class="o">(</span><span class="n">error</span><span class="o">.</span><span class="na">message</span><span class="o">))</span>
                <span class="o">},</span> <span class="o">{</span>
                    <span class="nc">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="no">TAG</span><span class="o">,</span> <span class="s">"On Complete Called"</span><span class="o">)</span>
                <span class="o">})</span>

        <span class="n">addDisposable</span><span class="o">(</span><span class="n">disposable</span><span class="o">)</span>
    <span class="o">}</span>

    <span class="n">fun</span> <span class="nf">getNewsLiveData</span><span class="o">()</span> <span class="o">=</span> <span class="n">mNews</span>
<span class="o">}</span>
</pre></table></code></div></div><ul><li>Việc chuyển đổi data từ usecase sang UI thông qua ViewModel có thể giữ lại dữ liệu ngay cả khi có configuration change.<li>ViewModel được tích hợp sẵn life aware components</ul><h2 id="how-all-the-layers-are-connected"><span class="me-2">How all the layers are connected?</span><a href="#how-all-the-layers-are-connected" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Sau khi đã hiểu nhiệm vụ của các layer, giờ thì mình sẽ ghép nối lại xem các layer connect với nhau như nào nhé.</p><ul><li>Mỗi layer có các <code class="language-plaintext highlighter-rouge">entities</code> riêng được xác định riêng.<li>Mapper được sử dụng để chuyển đổi các <code class="language-plaintext highlighter-rouge">entities</code> từ layer này qua layer khác.<li>Việc xây dựng các entities riêng biệt cho các layer giúp nó trở nên hoàn toàn độc lập và chỉ có dữ liệu cần thiết mới chuyển sang layer tiếp theo.</ul><p><a href="https://s3-ap-southeast-1.amazonaws.com/kipalog.com/zhgz22cddn_5_a-AUcEVdyRJhIepo9JyJBw.png" class="popup img-link shimmer"><img src="https://s3-ap-southeast-1.amazonaws.com/kipalog.com/zhgz22cddn_5_a-AUcEVdyRJhIepo9JyJBw.png" alt="alt text" loading="lazy"></a></p><h2 id="conclusion"><span class="me-2">Conclusion</span><a href="#conclusion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Hi vọng qua bài viết các bạn có thể hiểu được cơ bản về clean architecture cũng như flow của nó. Mọi người có thể xem qua sample tại <a href="https://github.com/HadesPTIT/news-clean-architecture">đây</a>. Happy coding !!!</p><h2 id="references"><span class="me-2">References</span><a href="#references" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><a href="https://proandroiddev.com/kotlin-clean-architecture-1ad42fcd97fa">Kotlin clean architecture</a><li><a href="https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html">Clean coder blog</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/android/">Android</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/android/" class="post-tag no-text-decoration" >android</a> <a href="/tags/clean-architecture/" class="post-tag no-text-decoration" >clean architecture</a> <a href="/tags/kotlin/" class="post-tag no-text-decoration" >kotlin</a> <a href="/tags/mvvm/" class="post-tag no-text-decoration" >mvvm</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[Android]%20Clean%20architecture%20-%20Hades&url=https%3A%2F%2Fhadesptit.github.io%2Fposts%2Fandroid-clean-architecture%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[Android]%20Clean%20architecture%20-%20Hades&u=https%3A%2F%2Fhadesptit.github.io%2Fposts%2Fandroid-clean-architecture%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=[Android]%20Clean%20architecture%20-%20Hades&url=https%3A%2F%2Fhadesptit.github.io%2Fposts%2Fandroid-clean-architecture%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fhadesptit.github.io%2Fposts%2Fandroid-clean-architecture%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recent Update</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/flutter-338/">[Flutter] Flutter 3.38 & Dart 3.10 có gì mới ?</a><li class="text-truncate lh-lg"> <a href="/posts/flutter-33/">[Flutter] Flutter 3.3 có gì mới ?</a><li class="text-truncate lh-lg"> <a href="/posts/what-news-in-flutter3/">[Flutter] Flutter 3.0 có gì mới ?</a><li class="text-truncate lh-lg"> <a href="/posts/flutter-2.8/">[Flutter] Flutter 2.8 có gì mới ?</a><li class="text-truncate lh-lg"> <a href="/posts/shrinkwrap-vs-slivers/">[Flutter] ShrinkWrap vs Slivers | Decoding Flutter</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/android/">android</a> <a class="post-tag btn btn-outline-primary" href="/tags/flutter/">flutter</a> <a class="post-tag btn btn-outline-primary" href="/tags/dart/">dart</a> <a class="post-tag btn btn-outline-primary" href="/tags/rxjava/">rxjava</a> <a class="post-tag btn btn-outline-primary" href="/tags/kotlin/">kotlin</a> <a class="post-tag btn btn-outline-primary" href="/tags/new/">new</a> <a class="post-tag btn btn-outline-primary" href="/tags/performance/">performance</a> <a class="post-tag btn btn-outline-primary" href="/tags/android-studio/">android studio</a> <a class="post-tag btn btn-outline-primary" href="/tags/as/">as</a> <a class="post-tag btn btn-outline-primary" href="/tags/cicd/">cicd</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/kotlin-sealed-class/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1548252903" data-df="ll" > Jan 23, 2019 </time><h4 class="pt-0 my-2">[Android] Kotlin Sealed Class</h4><div class="text-muted"><p>Introduction Sealed class được dùng để đại diện cho các class phân cấp bị hạn chế. Trong đó một giá trị chỉ có thể có một kiểu từ một tập có giới hạn và không thể có bất kì loại nào khác. Về mặt n...</p></div></div></a></article><article class="col"> <a href="/posts/rxjava-start/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1562422503" data-df="ll" > Jul 6, 2019 </time><h4 class="pt-0 my-2">[RxJava] Khái niệm</h4><div class="text-muted"><p>Giới thiệu Khi tôi mới học Android, ai đó đã nói với tôi rằng “Nếu bạn muốn học thứ gì khó khó, hãy học RxJava”. Trong series này, tôi sẽ cùng các bạn tìm hiểu nó từ những điều đơn giản nhất nhé. ...</p></div></div></a></article><article class="col"> <a href="/posts/android-paging-library/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1558361703" data-df="ll" > May 20, 2019 </time><h4 class="pt-0 my-2">[Android] Architecture Components : Paging Library</h4><div class="text-muted"><p>Introduction Hiện nay việc tải và hiển thị dữ liệu dưới dạng danh sách rất phổ biến và hầu như ứng dụng nào cũng có. Với những tập dữ liệu đầu vào vừa và nhỏ ta thường tải xong sau đó mới hiển thị...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/android-studio-shortcut/" class="btn btn-outline-primary" aria-label="Older" ><p>[Tips & Trick] Android Studio shortcuts</p></a> <a href="/posts/android-custom-view/" class="btn btn-outline-primary" aria-label="Newer" ><p>[Android] Tìm hiểu về Custom View và xây dựng thư viện Circular Seekbar</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://github.com/HadesPTIT">Hades</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p>Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.4.1" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/android/">android</a> <a class="post-tag btn btn-outline-primary" href="/tags/flutter/">flutter</a> <a class="post-tag btn btn-outline-primary" href="/tags/dart/">dart</a> <a class="post-tag btn btn-outline-primary" href="/tags/rxjava/">rxjava</a> <a class="post-tag btn btn-outline-primary" href="/tags/kotlin/">kotlin</a> <a class="post-tag btn btn-outline-primary" href="/tags/new/">new</a> <a class="post-tag btn btn-outline-primary" href="/tags/performance/">performance</a> <a class="post-tag btn btn-outline-primary" href="/tags/android-studio/">android studio</a> <a class="post-tag btn btn-outline-primary" href="/tags/as/">as</a> <a class="post-tag btn btn-outline-primary" href="/tags/cicd/">cicd</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{content}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
